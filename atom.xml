<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>羊末离殇的独立博客</title>
  
  <subtitle>与代码的持久博弈</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://github.ymlsfly.xin/"/>
  <updated>2018-12-18T15:40:10.629Z</updated>
  <id>http://github.ymlsfly.xin/</id>
  
  <author>
    <name>羊末离殇</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://github.ymlsfly.xin/2020/03/11/hello-world/"/>
    <id>http://github.ymlsfly.xin/2020/03/11/hello-world/</id>
    <published>2020-03-11T06:43:05.551Z</published>
    <updated>2018-12-18T15:40:10.629Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><h4 id="hgjhgjg"><a href="#hgjhgjg" class="headerlink" title="hgjhgjg"></a>hgjhgjg</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="默认" scheme="http://github.ymlsfly.xin/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
      <category term="hello" scheme="http://github.ymlsfly.xin/tags/hello/"/>
    
  </entry>
  
  <entry>
    <title>java中复合bean的copy工具类</title>
    <link href="http://github.ymlsfly.xin/2020/03/11/CopyUtil/"/>
    <id>http://github.ymlsfly.xin/2020/03/11/CopyUtil/</id>
    <published>2020-03-11T06:43:05.542Z</published>
    <updated>2019-09-22T06:15:41.300Z</updated>
    
    <content type="html"><![CDATA[<h3 id="诞生由来"><a href="#诞生由来" class="headerlink" title="诞生由来"></a>诞生由来</h3><p>之前项目里就经常有bean之间的属性copy，一直都是用spring自带的工具类来解决，方法如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.beans.BeanUtils#copyProperties(java.lang.Object, java.lang.Object);</span><br></pre></td></tr></table></figure></p><p>该方法只能对一个bean中普通属性字段进行copy，如果这个bean中有其他的bean，即bean中bean，就需要将其值取出，单独对这个子bean进行copy，然后set进父bean，这种copy如果在bean层次少的时候还无所谓，如果在bean的层次比较深的时候，就会发现很是繁琐了，最近遇到的项目里面有bean和bo的转换，其深度就有四五层，所以如果能想出一个新的工具类，能够一次性copy其bean中bena肯定最好不过了。</p><h3 id="以前用的简单包装工具类"><a href="#以前用的简单包装工具类" class="headerlink" title="以前用的简单包装工具类"></a>以前用的简单包装工具类</h3><ul><li>满足单层bean的copy。</li><li>满足单层bean集合的copy。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyUtil</span> </span>&#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"all"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">copy</span><span class="params">(Object fromBean, Class&lt;T&gt; clz)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> InstantiationException, IllegalAccessException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fromBean == <span class="keyword">null</span> || clz == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        T result = clz.newInstance();</span><br><span class="line">        BeanUtils.copyProperties(fromBean, result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">copy</span><span class="params">(Collection&lt;?&gt; fromBeans, Class&lt;T&gt; cls)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> InstantiationException, IllegalAccessException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isEmpty(fromBeans) || <span class="keyword">null</span> == cls) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Object fromBean : fromBeans) &#123;</span><br><span class="line">            T t = copy(fromBean, cls);</span><br><span class="line">            <span class="keyword">if</span> (t != <span class="keyword">null</span>) &#123;</span><br><span class="line">                list.add(t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="通过反射写出的新的一套工具类"><a href="#通过反射写出的新的一套工具类" class="headerlink" title="通过反射写出的新的一套工具类"></a>通过反射写出的新的一套工具类</h3><ul><li>满足单层bean的copy。</li><li>满足单层bean集合的copy。</li><li>满足多层bean的复合copy。</li></ul><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ul><li>获取fromBean中的属性字段，如果toBean中也有其属性字段，则继续下一步。</li><li>反射执行get/is获取其属性field，得到属性类型type，属性值fieldValue。</li><li>如果type是普通类型，则直接反射执行set方法将值写入toBean。</li><li>如果type是List集合类型，调用getFieldIfList获取对应toBean中的该属性值toList：<ul><li>获取这个List类型属性里面包裹的属性类型type_child。</li><li>如果type_child仍是List集合类型，递归调用getFieldIfList去掉List外壳，并将值add进其父List。</li><li>如果type_child不是集合类型，通过Class.forName获取其class：<ul><li>如果type_child是一般类型，直接将传进来的list值add进toList返回。</li><li>如果type_child是child_bean类型，遍历传进来的list，对其每个值又重新调用copy方法set进new出来的新child_bean实例中，返回。</li></ul></li></ul></li><li>如果type是Map类型，暂不考虑。</li><li><p>如果type不是以上类型（忽略考虑了java里面或者其他类里面定义的内置bean类型），判定为bean中bean类型：</p><ul><li><p>反射获取toBean中对应字段的class：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; newToClass = toClass.getDeclaredField(field.getName()).getType();</span><br><span class="line">Object newToBean = newToClass.newInstance();</span><br></pre></td></tr></table></figure></li><li><p>再次调用copy方法将fieldValue写入newToBean，然后执行set方法将newToBean写入toBean。</p></li></ul></li><li>最终返回toBean即目标结果。</li></ul><h4 id="判断是否是普通字段属性"><a href="#判断是否是普通字段属性" class="headerlink" title="判断是否是普通字段属性"></a>判断是否是普通字段属性</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span> fangyang</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span> 返回该字段的类型是否是普通类型</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Date</span> 10:14 2019/9/21</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Param</span> [clazz]</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isNormalField</span><span class="params">(Class clazz)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> clazz == <span class="keyword">int</span>.class || clazz == String.class || clazz == <span class="keyword">float</span>.class</span><br><span class="line">        || clazz == <span class="keyword">double</span>.class || clazz == <span class="keyword">char</span>.class || clazz == <span class="keyword">byte</span>.class</span><br><span class="line">        || clazz == <span class="keyword">short</span>.class || clazz == Date.class || clazz == <span class="keyword">boolean</span>.class</span><br><span class="line">        || clazz == Integer.class || clazz == Float.class</span><br><span class="line">        || clazz == Double.class || clazz == Character.class || clazz == Byte.class</span><br><span class="line">        || clazz == Short.class || clazz == Boolean.class</span><br><span class="line">        || clazz == <span class="keyword">long</span>.class || clazz == Long.class;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="整体工具类"><a href="#整体工具类" class="headerlink" title="整体工具类"></a>整体工具类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Auther</span>: fangyang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019/9/21 09:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String LIST_STR = <span class="string">"java.util.List"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String SERIAL_FIELD_STR = <span class="string">"serialVersionUID"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> LIST_STR_LEN = <span class="string">"java.util.List"</span>.length();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"all"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">copy</span><span class="params">(Object fromBean, Class&lt;T&gt; clz)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException,</span></span><br><span class="line"><span class="function">            NoSuchFieldException, ClassNotFoundException, InstantiationException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fromBean == <span class="keyword">null</span> || clz == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isNormalField(clz)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fromBean.getClass() == clz) &#123;</span><br><span class="line">                <span class="comment">// 类型一致</span></span><br><span class="line">                <span class="keyword">return</span> (T) fromBean;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"this fromBean is not "</span> + clz + <span class="string">" type"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> copy(fromBean, clz.newInstance());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">copy</span><span class="params">(Collection&lt;?&gt; fromBeans, Class&lt;T&gt; cls)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException,</span></span><br><span class="line"><span class="function">            NoSuchFieldException, ClassNotFoundException, InstantiationException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isEmpty(fromBeans) || <span class="keyword">null</span> == cls) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Object fromBean : fromBeans) &#123;</span><br><span class="line">            T t = copy(fromBean, cls);</span><br><span class="line">            <span class="keyword">if</span> (t != <span class="keyword">null</span>) &#123;</span><br><span class="line">                list.add(t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fangyang</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 要求 bean 中对应字段的属性名必须一致，普通类型字段要求字段类型一致</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 10:12 2019/9/21</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [fromBean, toBean] 从 fromBean 复制到 toBean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> E</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"all"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T, E&gt; <span class="function">E <span class="title">copy</span><span class="params">(Object fromBean, E toBean)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException,</span></span><br><span class="line"><span class="function">            NoSuchFieldException, ClassNotFoundException, InstantiationException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fromBean == <span class="keyword">null</span> || toBean == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        Class&lt;?&gt; fromClass = fromBean.getClass();</span><br><span class="line">        Class&lt;?&gt; toClass = toBean.getClass();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fromClass.getDeclaredFields()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (field.getName().equals(SERIAL_FIELD_STR)) &#123;</span><br><span class="line">                <span class="comment">// 序列化字段，忽略</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (toClass.getDeclaredField(field.getName()) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// toClass 中没有该属性字段</span></span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (isNormalField(field.getType())</span><br><span class="line">                        &amp;&amp; toClass.getDeclaredField(field.getName()).getType() != field.getType()) &#123;</span><br><span class="line">                    <span class="comment">// 属性是普通字段，且二者对应属性字段的类型不同</span></span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            String getMethodName = <span class="string">"get"</span> + StringUtils.capitalize(field.getName());</span><br><span class="line">            String setMethodName = <span class="string">"set"</span> + StringUtils.capitalize(field.getName());</span><br><span class="line">            String isMethodName = <span class="string">"is"</span> + StringUtils.capitalize(field.getName());</span><br><span class="line">            Object fieldValue;</span><br><span class="line">            <span class="keyword">if</span> (field.getType() == <span class="keyword">boolean</span>.class || field.getType() == Boolean.class) &#123;</span><br><span class="line">                <span class="comment">// boolean 类型</span></span><br><span class="line">                fieldValue = fromClass.getDeclaredMethod(isMethodName).invoke(fromBean);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                fieldValue = fromClass.getDeclaredMethod(getMethodName).invoke(fromBean);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> == fieldValue) &#123;</span><br><span class="line">                <span class="comment">// fromBean 无此属性值</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (isNormalField(field.getType())) &#123;</span><br><span class="line">                Method method = toClass.getDeclaredMethod(setMethodName, field.getType());</span><br><span class="line">                method.invoke(toBean, fieldValue);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (field.getType() == List.class) &#123;</span><br><span class="line">                List&lt;T&gt; list = (List&lt;T&gt;) fieldValue;</span><br><span class="line">                String str = toClass.getDeclaredField(field.getName()).getGenericType().toString();</span><br><span class="line">                List&lt;Object&gt; toList = getFieldIfList(list, str);</span><br><span class="line">                Method method = toClass.getDeclaredMethod(setMethodName, List.class);</span><br><span class="line">                method.invoke(toBean, toList);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (field.getType() == Map.class)&#123;</span><br><span class="line">                <span class="comment">// TODO Map 暂不处理</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// bean 中 bean</span></span><br><span class="line">                Class&lt;?&gt; newToClass = toClass.getDeclaredField(field.getName()).getType();</span><br><span class="line">                Object newToBean = newToClass.newInstance();</span><br><span class="line">                copy(fieldValue, newToBean);</span><br><span class="line">                Method method = toClass.getDeclaredMethod(setMethodName, newToClass);</span><br><span class="line">                method.invoke(toBean, newToBean);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> toBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fangyang</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 获取当源属性类型是 &#123;<span class="doctag">@link</span> List&#125; 时的目标属性值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 12:13 2019/9/22</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [list, toBeanClassStr]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> java.util.List&lt;java.lang.Object&gt;</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"all"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> &lt;T, E&gt; <span class="function">List&lt;Object&gt; <span class="title">getFieldIfList</span><span class="params">(List&lt;T&gt; list, String toBeanClassStr)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> IllegalAccessException, InstantiationException, ClassNotFoundException,</span></span><br><span class="line"><span class="function">            NoSuchMethodException, NoSuchFieldException, InvocationTargetException </span>&#123;</span><br><span class="line">        String newBeanClassStr = toBeanClassStr.substring(LIST_STR_LEN + <span class="number">1</span>,</span><br><span class="line">                toBeanClassStr.length() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (newBeanClassStr.contains(LIST_STR)) &#123;</span><br><span class="line">            List&lt;Object&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (T t : list) &#123;</span><br><span class="line">                <span class="comment">// 递归去掉 list 外壳</span></span><br><span class="line">                List&lt;Object&gt; toT = getFieldIfList((List&lt;E&gt;) t, newBeanClassStr);</span><br><span class="line">                result.add(toT);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        Class&lt;?&gt; toBeanClass = Class.forName(newBeanClassStr);</span><br><span class="line">        List&lt;Object&gt; toList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (isNormalField(toBeanClass)) &#123;</span><br><span class="line">            <span class="comment">// 说明 list 里面的元素是一般属性字段</span></span><br><span class="line">            toList.addAll(list);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (T t : list) &#123;</span><br><span class="line">                Object toT = copy(t, toBeanClass.newInstance());</span><br><span class="line">                toList.add(toT);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> toList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fangyang</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 返回该字段的类型是否是普通类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 10:14 2019/9/21</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [clazz]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isNormalField</span><span class="params">(Class clazz)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> clazz == <span class="keyword">int</span>.class || clazz == String.class || clazz == <span class="keyword">float</span>.class</span><br><span class="line">                || clazz == <span class="keyword">double</span>.class || clazz == <span class="keyword">char</span>.class || clazz == <span class="keyword">byte</span>.class</span><br><span class="line">                || clazz == <span class="keyword">short</span>.class || clazz == Date.class || clazz == <span class="keyword">boolean</span>.class</span><br><span class="line">                || clazz == Integer.class || clazz == Float.class</span><br><span class="line">                || clazz == Double.class || clazz == Character.class || clazz == Byte.class</span><br><span class="line">                || clazz == Short.class || clazz == Boolean.class</span><br><span class="line">                || clazz == <span class="keyword">long</span>.class || clazz == Long.class;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="简单测试"><a href="#简单测试" class="headerlink" title="简单测试"></a>简单测试</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Bean1_1&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Bean1_2 testBean;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; aList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;List&lt;Integer&gt;&gt; bList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;List&lt;Bean1_3&gt;&gt; cList;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean2</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Bean2_1&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Bean2_2 testBean;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; aList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;List&lt;Integer&gt;&gt; bList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;List&lt;Bean2_3&gt;&gt; cList;</span><br><span class="line">&#125;</span><br><span class="line">... 里面都是一些简单的bean，就不一一展开</span><br></pre></td></tr></table></figure><p>main方法简单set值进行copy，打印对比测试：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bean1(name=aaa, list=[Bean1_1(name=name0, id=<span class="number">6</span>, testBean=[Bean1_1_1(age=<span class="number">17</span>, birthday=Sun Sep <span class="number">22</span> <span class="number">14</span>:<span class="number">11</span>:<span class="number">47</span> CST <span class="number">2019</span>), Bean1_1_1(age=<span class="number">16</span>, birthday=Sun Sep <span class="number">22</span> <span class="number">14</span>:<span class="number">11</span>:<span class="number">47</span> CST <span class="number">2019</span>)], success=<span class="keyword">true</span>), Bean1_1(name=name1, id=<span class="number">0</span>, testBean=[Bean1_1_1(age=<span class="number">15</span>, birthday=Sun Sep <span class="number">22</span> <span class="number">14</span>:<span class="number">11</span>:<span class="number">47</span> CST <span class="number">2019</span>), Bean1_1_1(age=<span class="number">15</span>, birthday=Sun Sep <span class="number">22</span> <span class="number">14</span>:<span class="number">11</span>:<span class="number">47</span> CST <span class="number">2019</span>)], success=<span class="keyword">true</span>)], testBean=Bean1_2(test=<span class="number">100</span>), aList=[a1, a2], bList=[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>]], cList=[[Bean1_3(id=<span class="number">10</span>), Bean1_3(id=<span class="number">10</span>), Bean1_3(id=<span class="number">10</span>)], [Bean1_3(id=<span class="number">11</span>), Bean1_3(id=<span class="number">11</span>), Bean1_3(id=<span class="number">11</span>)]])</span><br><span class="line">Bean2(name=aaa, list=[Bean2_1(name=name0, id=<span class="number">6</span>, testBean=[Bean2_1_1(age=<span class="number">17</span>, birthday=Sun Sep <span class="number">22</span> <span class="number">14</span>:<span class="number">11</span>:<span class="number">47</span> CST <span class="number">2019</span>), Bean2_1_1(age=<span class="number">16</span>, birthday=Sun Sep <span class="number">22</span> <span class="number">14</span>:<span class="number">11</span>:<span class="number">47</span> CST <span class="number">2019</span>)], success=<span class="keyword">true</span>), Bean2_1(name=name1, id=<span class="number">0</span>, testBean=[Bean2_1_1(age=<span class="number">15</span>, birthday=Sun Sep <span class="number">22</span> <span class="number">14</span>:<span class="number">11</span>:<span class="number">47</span> CST <span class="number">2019</span>), Bean2_1_1(age=<span class="number">15</span>, birthday=Sun Sep <span class="number">22</span> <span class="number">14</span>:<span class="number">11</span>:<span class="number">47</span> CST <span class="number">2019</span>)], success=<span class="keyword">true</span>)], testBean=Bean2_2(test=<span class="number">100</span>), aList=[a1, a2], bList=[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>]], cList=[[Bean2_3(id=<span class="number">10</span>), Bean2_3(id=<span class="number">10</span>), Bean2_3(id=<span class="number">10</span>)], [Bean2_3(id=<span class="number">11</span>), Bean2_3(id=<span class="number">11</span>), Bean2_3(id=<span class="number">11</span>)]])</span><br></pre></td></tr></table></figure></p><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>以上为博主应需写出的工具类，肯定不尽完美，读者发现有问题，可以提出来，博主很乐意一直完善该工具类~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;诞生由来&quot;&gt;&lt;a href=&quot;#诞生由来&quot; class=&quot;headerlink&quot; title=&quot;诞生由来&quot;&gt;&lt;/a&gt;诞生由来&lt;/h3&gt;&lt;p&gt;之前项目里就经常有bean之间的属性copy，一直都是用spring自带的工具类来解决，方法如下：&lt;br&gt;&lt;figure c
      
    
    </summary>
    
      <category term="java" scheme="http://github.ymlsfly.xin/categories/java/"/>
    
      <category term="copy" scheme="http://github.ymlsfly.xin/categories/java/copy/"/>
    
    
      <category term="Copy-util" scheme="http://github.ymlsfly.xin/tags/Copy-util/"/>
    
  </entry>
  
  <entry>
    <title>面试(one) 某一次一面</title>
    <link href="http://github.ymlsfly.xin/2019/02/24/%E9%9D%A2%E8%AF%95(one)/"/>
    <id>http://github.ymlsfly.xin/2019/02/24/面试(one)/</id>
    <published>2019-02-24T15:11:59.000Z</published>
    <updated>2019-02-25T16:18:17.290Z</updated>
    
    <content type="html"><![CDATA[<hr><h1 id="Spring的ioc和aop是怎么实现的？"><a href="#Spring的ioc和aop是怎么实现的？" class="headerlink" title="Spring的ioc和aop是怎么实现的？"></a>Spring的ioc和aop是怎么实现的？</h1><h2 id="IOC（Inverse-Of-Control）控制反转"><a href="#IOC（Inverse-Of-Control）控制反转" class="headerlink" title="IOC（Inverse Of Control）控制反转"></a>IOC（Inverse Of Control）控制反转</h2><p>也同DI（Dependency Injection）依赖注入。<br>将对在自身对象中的一个内置对象的控制反转，反转后不再由自己本身的对象进行控制这个内置对象的创建，而是由第三方系统去控制这个内置对象的创建。<br>实现：<br>（1）将bean之间的依赖关系尽可能地抓换为关联关系；<br>（2）将对具体类的关联尽可能地转换为对Java interface的关联，而不是与具体的服务对象相关联；<br>（3）Bean实例具体关联相关java interface的哪个实现类的实例，在配置信息的元数据中描述；<br>（4）由IoC组件（或称容器）根据配置信息，实例化具体bean类、将bean之间的依赖关系注入进来。   </p><h2 id="AOP（Aspect-Oriented-Programming）面向切面编程。"><a href="#AOP（Aspect-Oriented-Programming）面向切面编程。" class="headerlink" title="AOP（Aspect Oriented Programming）面向切面编程。"></a>AOP（Aspect Oriented Programming）面向切面编程。</h2><p>当前已经成为一种比较成熟的编程思想，可以用来很好的解决应用系统中分布于各个模块的交叉关注点问题。在轻量级的J2EE中应用开发中，使用AOP来灵活处理一些具有横切性质的系统级服务，如事务处理、安全检查、缓存、对象池管理等，已经成为一种非常适用的解决方案。 AOP中比较重要的概念有：Aspect、JoinPoint、PonitCut、Advice、Introduction、Weave、Target Object、Proxy Object等。   </p><h1 id="tcp的三次握手？"><a href="#tcp的三次握手？" class="headerlink" title="tcp的三次握手？"></a>tcp的三次握手？</h1><p>首先由Client发出请求连接即 SYN=1 ACK=0，TCP规定SYN=1时不能携带数据，但要消耗一个序号,因此声明自己的序号是 seq=x。然后 Server 进行回复确认，即 SYN=1 ACK=1 seq=y，ack=x+1。再然后 Client 再进行一次确认，但不用SYN 了，这时即为 ACK=1, seq=x+1，ack=y+1。</p><h1 id="tcp的状态？"><a href="#tcp的状态？" class="headerlink" title="tcp的状态？"></a>tcp的状态？</h1><p>tcp的11种状态：</p><ol><li>CLOSED：初始状态，表示TCP连接是“关闭着的”或“未打开的”。</li><li>LISTEN ：表示服务器端的某个SOCKET处于监听状态，可以接受客户端的连接。</li><li>SYN_RCVD ：表示服务器接收到了来自客户端请求连接的SYN报文。在正常情况下，这个状态是服务器端的SOCKET在建立TCP连接时的三次握手会话过程中的一个中间状态，很短暂，基本上用netstat很难看到这种状态，除非故意写一个监测程序，将三次TCP握手过程中最后一个ACK报文不予发送。当TCP连接处于此状态时，再收到客户端的ACK报文，它就会进入到ESTABLISHED 状态。</li><li>SYN_SENT ：这个状态与SYN_RCVD 状态相呼应，当客户端SOCKET执行connect()进行连接时，它首先发送SYN报文，然后随即进入到SYN_SENT 状态，并等待服务端的发送三次握手中的第2个报文。SYN_SENT 状态表示客户端已发送SYN报文。</li><li>ESTABLISHED ：表示TCP连接已经成功建立。</li><li>FIN_WAIT_1 ：这个状态得好好解释一下，其实FIN_WAIT_1 和FIN_WAIT_2 两种状态的真正含义都是表示等待对方的FIN报文。而这两种状态的区别是：FIN_WAIT_1状态实际上是当SOCKET在ESTABLISHED状态时，它想主动关闭连接，向对方发送了FIN报文，此时该SOCKET进入到FIN_WAIT_1 状态。而当对方回应ACK报文后，则进入到FIN_WAIT_2 状态。当然在实际的正常情况下，无论对方处于任何种情况下，都应该马上回应ACK报文，所以FIN_WAIT_1 状态一般是比较难见到的，而FIN_WAIT_2 状态有时仍可以用netstat看到。</li><li>FIN_WAIT_2 ：上面已经解释了这种状态的由来，实际上FIN_WAIT_2状态下的SOCKET表示半连接，即有一方调用close()主动要求关闭连接。注意：FIN_WAIT_2 是没有超时的（不像TIME_WAIT 状态），这种状态下如果对方不关闭（不配合完成4次挥手过程），那这个 FIN_WAIT_2 状态将一直保持到系统重启，越来越多的FIN_WAIT_2 状态会导致内核crash。</li><li>TIME_WAIT ：表示收到了对方的FIN报文，并发送出了ACK报文。 TIME_WAIT状态下的TCP连接会等待2*MSL（Max Segment Lifetime，最大分段生存期，指一个TCP报文在Internet上的最长生存时间。每个具体的TCP协议实现都必须选择一个确定的MSL值，RFC 1122建议是2分钟，但BSD传统实现采用了30秒，Linux可以cat /proc/sys/net/ipv4/tcp_fin_timeout看到本机的这个值），然后即可回到CLOSED 可用状态了。如果FIN_WAIT_1状态下，收到了对方同时带FIN标志和ACK标志的报文时，可以直接进入到TIME_WAIT状态，而无须经过FIN_WAIT_2状态。（这种情况应该就是四次挥手变成三次挥手的那种情况）</li><li>CLOSING ：这种状态在实际情况中应该很少见，属于一种比较罕见的例外状态。正常情况下，当一方发送FIN报文后，按理来说是应该先收到（或同时收到）对方的ACK报文，再收到对方的FIN报文。但是CLOSING 状态表示一方发送FIN报文后，并没有收到对方的ACK报文，反而却也收到了对方的FIN报文。什么情况下会出现此种情况呢？那就是当双方几乎在同时close()一个SOCKET的话，就出现了双方同时发送FIN报文的情况，这是就会出现CLOSING 状态，表示双方都正在关闭SOCKET连接。</li><li>CLOSE_WAIT ：表示正在等待关闭。怎么理解呢？当对方close()一个SOCKET后发送FIN报文给自己，系统毫无疑问地将会回应一个ACK报文给对方，此时TCP连接则进入到CLOSE_WAIT状态。接下来呢，需要检查自己是否还有数据要发送给对方，如果没有的话，也就可以close()这个SOCKET并发送FIN报文给对方，即关闭自己到对方这个方向的连接。有数据的话则看程序的策略，继续发送或丢弃。简单地说，当处于CLOSE_WAIT 状态下，需要完成的事情是等待你去关闭连接。</li><li>LAST_ACK ：当被动关闭的一方在发送FIN报文后，等待对方的ACK报文的时候，就处于LAST_ACK 状态。当收到对方的ACK报文后，也就可以进入到CLOSED 可用状态了。</li></ol><h1 id="servlet中的get和post方法有哪些区别？"><a href="#servlet中的get和post方法有哪些区别？" class="headerlink" title="servlet中的get和post方法有哪些区别？"></a>servlet中的get和post方法有哪些区别？</h1><ol><li>GET中的总字符数是有限的。</li><li>GET发送的数据会追加到URL的后面。</li><li>GET请求可以建立书签。</li><li>GET请求是幂等的，不会修改服务器上的任何内容，能执行多次而不会产生不好的副作用。</li><li>POST不是幂等的，POST提交的数据可能用于不可逆转的事务。</li><li>POST发送的数据是可以很大的，理论不受限，例如可以传文件。</li><li>POST将表单内的数据放置在HTML HEADER内一起传送所指的URL地址。是对用户透明的。</li><li>GET安全性非常低，POST安全性较高。但是执行效率却比POST方法好。</li></ol><h1 id="什么是高并发？"><a href="#什么是高并发？" class="headerlink" title="什么是高并发？"></a>什么是高并发？</h1><p>高并发（High Concurrency）是互联网分布式系统架构设计中必须考虑的因素之一，它通常是指，通过设计保证系统能够同时并行处理很多请求。高并发相关常用的一些指标有响应时间（Response Time），吞吐量（Throughput），每秒查询率QPS（Query Per Second），并发用户数等。</p><h1 id="什么是线程？"><a href="#什么是线程？" class="headerlink" title="什么是线程？"></a>什么是线程？</h1><p>有时被称为轻量进程(Lightweight Process，LWP），是程序执行流的最小单元。一个标准的线程由线程ID，当前指令指针(PC），寄存器集合和堆栈组成。另外，线程是进程中的一个实体，是被系统独立调度和分派的基本单位。</p><h1 id="线程有哪些状态？"><a href="#线程有哪些状态？" class="headerlink" title="线程有哪些状态？"></a>线程有哪些状态？</h1><ol><li>创建状态。在生成线程对象，并没有调用该对象的start方法，这是线程处于创建状态。</li><li>就绪状态。当调用了线程对象的start方法之后，该线程就进入了就绪状态，但是此时线程调度程序还没有把该线程设置为当前线程，此时处于就绪状态。在线程运行之后，从等待或者睡眠中回来之后，也会处于就绪状态。</li><li>运行状态。线程调度程序将处于就绪状态的线程设置为当前线程，此时线程就进入了运行状态，开始运行run函数当中的代码。</li><li>阻塞状态。线程正在运行的时候，被暂停，通常是为了等待某个事件的发生(比如说某项资源就绪)之后再继续运行。sleep，suspend，wait等方法都可以导致线程阻塞。</li><li>死亡状态。如果一个线程的run方法执行结束或者调用stop方法后，该线程就会死亡。对于已经死亡的线程，无法再使用start方法令其进入就绪。</li></ol><h1 id="什么情况下用到多线程？"><a href="#什么情况下用到多线程？" class="headerlink" title="什么情况下用到多线程？"></a>什么情况下用到多线程？</h1><ol><li><p>程序包含复杂的计算任务时<br>主要是利用多线程获取更多的CPU时间（资源）。</p></li><li><p>处理速度较慢的外围设备<br>比如：打印时。再比如网络程序，涉及数据包的收发，时间因素不定。使用独立的线程处理这些任务，可使程序无需专门等待结果。</p></li><li><p>程序设计自身的需要<br>WINDOWS系统是基于消息循环的抢占式多任务系统，为使消息循环系统不至于阻塞，程序需要多个线程的来共同完成某些任务。</p></li></ol><h1 id="有哪些锁？"><a href="#有哪些锁？" class="headerlink" title="有哪些锁？"></a>有哪些锁？</h1><p>锁分类：</p><ol><li>公平锁/非公平锁</li><li>可重入锁</li><li>独享锁/共享锁</li><li>互斥锁/读写锁</li><li>乐观锁/悲观锁</li><li>分段锁</li><li>偏向锁/轻量级锁/重量级锁</li><li>自旋锁</li></ol><h1 id="ReentrantLock和synchronized的区别？"><a href="#ReentrantLock和synchronized的区别？" class="headerlink" title="ReentrantLock和synchronized的区别？"></a>ReentrantLock和synchronized的区别？</h1><ol><li>synchronized是托管给JVM执行的，而Lock是Java写的控制锁的代码。 </li><li>synchronized原始采用的是CPU悲观锁机制，即线程获得的是独占锁。独占锁意味着其他线程只能依靠阻塞来等待线程释放锁。而在CPU转换线程阻塞时会引起线程上下文切换，当有很多线程竞争锁的时候，会引起CPU频繁的上下文切换导致效率很低。　 </li><li>Lock用的是乐观锁方式。每次不加锁而是假设没有冲突而去完成某项操作，如果因为冲突失败就重试，直到成功为止。 </li><li>ReentrantLock必须在finally中释放锁，否则后果很严重，编码角度来说使用synchronized更加简单，不容易遗漏或者出错。 </li><li>ReentrantLock提供了可轮询的锁请求，他可以尝试的去取得锁，如果取得成功则继续处理，取得不成功，可以等下次运行的时候处理，所以不容易产生死锁，而synchronized则一旦进入锁请求要么成功，要么一直阻塞，所以更容易产生死锁。 </li><li>synchronized的话，锁的范围是整个方法或synchronized块部分；而Lock因为是方法调用，可以跨方法，灵活性更大。</li></ol><h1 id="什么是悲观锁和乐观锁？"><a href="#什么是悲观锁和乐观锁？" class="headerlink" title="什么是悲观锁和乐观锁？"></a>什么是悲观锁和乐观锁？</h1><h2 id="悲观锁："><a href="#悲观锁：" class="headerlink" title="悲观锁："></a>悲观锁：</h2><p>总是假设最坏的情况，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会阻塞直到它拿到锁。传统的关系型数据库里边就用到了很多这种锁机制，比如行锁，表锁等，读锁，写锁等，都是在做操作之前先上锁。再比如Java里面的同步原语synchronized关键字的实现也是悲观锁。   </p><h2 id="乐观锁："><a href="#乐观锁：" class="headerlink" title="乐观锁："></a>乐观锁：</h2><p>顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在更新的时候会判断一下在此期间别人有没有去更新这个数据，可以使用版本号等机制。乐观锁适用于多读的应用类型，这样可以提高吞吐量，像数据库提供的类似于write_condition机制，其实都是提供的乐观锁。在Java中java.util.concurrent.atomic包下面的原子变量类就是使用了乐观锁的一种实现方式CAS实现的。   </p><h1 id="java中哪些容器是线程安全的，例如vector？"><a href="#java中哪些容器是线程安全的，例如vector？" class="headerlink" title="java中哪些容器是线程安全的，例如vector？"></a>java中哪些容器是线程安全的，例如vector？</h1><h2 id="同步容器类：使用了synchronized"><a href="#同步容器类：使用了synchronized" class="headerlink" title="同步容器类：使用了synchronized"></a>同步容器类：使用了synchronized</h2><ol><li>Vector</li><li>HashTable<br>并发容器：</li><li>ConcurrentHashMap:分段</li><li>CopyOnWriteArrayList：写时复制</li><li>CopyOnWriteArraySet：写时复制<h2 id="Queue"><a href="#Queue" class="headerlink" title="Queue:"></a>Queue:</h2></li><li>ConcurrentLinkedQueue：是使用非阻塞的方式实现的基于链接节点的无界的线程安全队列，性能非常好。<br>（java.util.concurrent.BlockingQueue 接口代表了线程安全的队列。）</li><li>ArrayBlockingQueue：基于数组的有界阻塞队列</li><li>LinkedBlockingQueue：基于链表的有界阻塞队列。</li><li>PriorityBlockingQueue：支持优先级的无界阻塞队列，即该阻塞队列中的元素可自动排序。默认情况下，元素采取自然升序排列</li><li>DelayQueue：一种延时获取元素的无界阻塞队列。</li><li>SynchronousQueue：不存储元素的阻塞队列。每个put操作必须等待一个take操作，否则不能继续添加元素。内部其实没有任何一个元素，容量是0<h2 id="Deque"><a href="#Deque" class="headerlink" title="Deque:"></a>Deque:</h2>(Deque接口定义了双向队列。双向队列允许在队列头和尾部进行入队出队操作。)</li><li>ArrayDeque:基于数组的双向非阻塞队列。</li><li>LinkedBlockingDeque:基于链表的双向阻塞队列。<h2 id="Sorted容器："><a href="#Sorted容器：" class="headerlink" title="Sorted容器："></a>Sorted容器：</h2></li><li>ConcurrentSkipListMap：是TreeMap的线程安全版本</li><li>ConcurrentSkipListSet：是TreeSet的线程安全版本</li></ol><h1 id="oracle的分页举例？"><a href="#oracle的分页举例？" class="headerlink" title="oracle的分页举例？"></a>oracle的分页举例？</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> </span><br><span class="line">( <span class="keyword">SELECT</span> <span class="keyword">ROWNUM</span> r, t1.* <span class="keyword">FROM</span> student t1 <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span> &lt; <span class="number">20</span> ) t2</span><br><span class="line"><span class="keyword">where</span> t2.r &gt;= <span class="number">15</span>;</span><br></pre></td></tr></table></figure><h1 id="数据库有哪些优化方式？"><a href="#数据库有哪些优化方式？" class="headerlink" title="数据库有哪些优化方式？"></a>数据库有哪些优化方式？</h1><ol><li>索引</li><li>分库分表分区</li><li>数据库引擎</li><li>预处理</li><li>mysql like查询</li><li>读写分离</li></ol><h1 id="什么是数据库的脏读，怎么防止脏读？"><a href="#什么是数据库的脏读，怎么防止脏读？" class="headerlink" title="什么是数据库的脏读，怎么防止脏读？"></a>什么是数据库的脏读，怎么防止脏读？</h1><p>脏读就是指读到还没完全弄好的数据。比如，你要读取数据库中的字段A、字段B，你读取时恰巧有其他用户正在更新这2个字段，而且是先更新A、再更新B，此时就可能会发生脏读：</p><ol><li>如果都未更新你就读取了，或者都更新完了你才读取，这都不是脏读，因为你得到的是更新前的有效值，或完全更新后的值。</li><li>如果那个用户更新一半你就读取了，也就是说更新了A，正打算要更新B但尚未更新时，你就读取了，此时你得到的就是脏数据。  </li></ol><p>避免脏读的办法就是采取事务，使得他用户正在更新时锁定数据库，阻止你读取，直至全部完成才让你读取。</p><h1 id="springboot运行是执行哪个文件就行了？"><a href="#springboot运行是执行哪个文件就行了？" class="headerlink" title="springboot运行是执行哪个文件就行了？"></a>springboot运行是执行哪个文件就行了？</h1><p>运行的是【工程名字+Application.java】这个文件。</p><h1 id="java使用哪个命令运行jar包？"><a href="#java使用哪个命令运行jar包？" class="headerlink" title="java使用哪个命令运行jar包？"></a>java使用哪个命令运行jar包？</h1><ol><li>java -cp<br>java -cp 和 -classpath 一样，是指定类运行所依赖其他类的路径，通常是类库，jar包之类，需要全路径到jar包，<br>window上分号“;”<br>linux上分号“:”<br>java -cp .;myClass.jar packname.mainclassname<br>表达式支持通配符，例如：<br>java -cp .;c:\classes01\myClass.jar;c:\classes02*.jar  packname.mainclassname<br>java -cp lib/<em>;etc/ com.Start param1 param2<br>将lib下的所有jar文件以及etc下的所有配置文件添加到 classpath 中<br>并在classpath 中寻找 com.Start类（main方法类）并运行<br>param1，param2 为main方法的参数可不填<br>注意：jar 文件引入classpath，通配符不能写成 </em>.jar， 只能使用 <em> 或 123</em><br>注意：配置文件引入classpath，只能写到目录 /， 不能添加 *    </li><li>java -jar<br>java -jar myClass.jar<br>执行该命令时，会用到目录META-INF\MANIFEST.MF文件，<br>在该文件中，有一个叫Main－Class的参数，它说明了java -jar命令执行的类<br>java -jar  *.jar param1 param2<br>运行jar包，会自动到 jar 包中查询mainfest中定义的启动类并运行<br>param1，param2 为main方法的参数可不填   </li></ol><h1 id="linux上查询进程服务的命令？"><a href="#linux上查询进程服务的命令？" class="headerlink" title="linux上查询进程服务的命令？"></a>linux上查询进程服务的命令？</h1><p>ps aux</p><h1 id="linux上程序运行cpu过高，使用哪个命令定位到导致其的代码位置？"><a href="#linux上程序运行cpu过高，使用哪个命令定位到导致其的代码位置？" class="headerlink" title="linux上程序运行cpu过高，使用哪个命令定位到导致其的代码位置？"></a>linux上程序运行cpu过高，使用哪个命令定位到导致其的代码位置？</h1><p>jstack是java虚拟机自带的一种堆栈跟踪工具。jstack用于打印出给定的java进程ID或core file或远程调试服务的Java堆栈信息，如果是在64位机器上，需要指定选项”-J-d64”，Windows的jstack使用方式只支持以下的这种方式：<br>jstack [-l] pid<br>主要分为两个功能：   </p><ol><li>针对活着的进程做本地的或远程的线程dump； </li><li>针对core文件做线程dump。<br>jstack用于生成java虚拟机当前时刻的线程快照。线程快照是当前java虚拟机内每一条线程正在执行的方法堆栈的集合，生成线程快照的主要目的是定位线程出现长时间停顿的原因，如线程间死锁、死循环、请求外部资源导致的长时间等待等。 线程出现停顿的时候通过jstack来查看各个线程的调用堆栈，就可以知道没有响应的线程到底在后台做什么事情，或者等待什么资源。 如果java程序崩溃生成core文件，jstack工具可以用来获得core文件的java stack和native stack的信息，从而可以轻松地知道java程序是如何崩溃和在程序何处发生问题。另外，jstack工具还可以附属到正在运行的java程序中，看到当时运行的java程序的java stack和native stack的信息, 如果现在运行的java程序呈现hung的状态，jstack是非常有用的。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;h1 id=&quot;Spring的ioc和aop是怎么实现的？&quot;&gt;&lt;a href=&quot;#Spring的ioc和aop是怎么实现的？&quot; class=&quot;headerlink&quot; title=&quot;Spring的ioc和aop是怎么实现的？&quot;&gt;&lt;/a&gt;Spring的ioc和aop是怎么实
      
    
    </summary>
    
      <category term="面试" scheme="http://github.ymlsfly.xin/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="面试" scheme="http://github.ymlsfly.xin/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>effect_java_study</title>
    <link href="http://github.ymlsfly.xin/2018/12/19/effect-java-study/"/>
    <id>http://github.ymlsfly.xin/2018/12/19/effect-java-study/</id>
    <published>2018-12-19T14:07:07.000Z</published>
    <updated>2018-12-22T08:18:37.877Z</updated>
    
    <content type="html"><![CDATA[<h2 id="effect-java学习笔记"><a href="#effect-java学习笔记" class="headerlink" title="effect-java学习笔记"></a>effect-java学习笔记</h2><h4 id="基本类型和装箱类型的选择"><a href="#基本类型和装箱类型的选择" class="headerlink" title="基本类型和装箱类型的选择"></a>基本类型和装箱类型的选择</h4><ul><li>优先使用基本类型而不是装箱的基本类型，也要注意无意识的自动装箱。</li></ul><h4 id="警惕内存泄露"><a href="#警惕内存泄露" class="headerlink" title="警惕内存泄露"></a>警惕内存泄露</h4><ul><li>清空对象引用应该是例外而不是规范。</li><li>当一个类自己管理内存时，程序员应该警惕内存泄漏问题。另一个常见的内存泄漏来源是缓存。</li></ul><h4 id="重写equals方法必须遵守的规定"><a href="#重写equals方法必须遵守的规定" class="headerlink" title="重写equals方法必须遵守的规定"></a>重写equals方法必须遵守的规定</h4><p>equals方法实现了一个等价关系（equivalence relation）。它有以下这些属性:</p><ul><li>自反性：对于任何非空引用x，x.equals(x)必须返回true。</li><li>对称性：对于任何非空引用x和y，如果且仅当y.equals(x)返回true时x.equals(y)必须返回true。</li><li>传递性：对于任何非空引用x、y、z，如果x.equals(y)返回true，y.equals(z)返回true，则x.equals(z)必须返回true。</li><li>一致性：对于任何非空引用x和y，如果在equals比较中使用的信息没有修改，则x.equals(y)的多次调用必须始终返回true或始终返回false。</li><li>对于任何非空引用x，x.equals(null)必须返回false。</li></ul><ol><li>当重写equals方法时，同时也要重写hashCode方法。</li><li>不要让equals方法试图太聪明。</li><li>在equal 时方法声明中，不要将参数Object替换成其他类型。</li></ol><h4 id="在每个类中，在重写-equals-方法的时侯，一定要重写-hashcode-方法"><a href="#在每个类中，在重写-equals-方法的时侯，一定要重写-hashcode-方法" class="headerlink" title="在每个类中，在重写 equals 方法的时侯，一定要重写 hashcode 方法"></a>在每个类中，在重写 equals 方法的时侯，一定要重写 hashcode 方法</h4><ol><li>当在一个应用程序执行过程中，如果在equals方法比较中没有修改任何信息，在一个对象上重复调用hashCode方法时，它必须始终返回相同的值。从一个应用程序到另一个应用程序的每一次执行返回的值可以是不一致的。</li><li>如果两个对象根据equals(Object)方法比较是相等的，那么在两个对象上调用hashCode就必须产生的结果是相同的整数。</li><li>如果两个对象根据equals(Object)方法比较并不相等，则不要求在每个对象上调用hashCode都必须产生不同的结果。 但是，程序员应该意识到，为不相等的对象生成不同的结果可能会提高散列表（hash tables）的性能。</li></ol><ul><li>当无法重写hashCode时，所违反第二个关键条款是：相等的对象必须具有相等的哈希码（ hash codes）。</li><li>不要试图从哈希码计算中排除重要的属性来提高性能。</li><li>不要为hashCode返回的值提供详细的规范，因此客户端不能合理地依赖它； 你可以改变它的灵活性。</li></ul><h4 id="始终重写toString方法"><a href="#始终重写toString方法" class="headerlink" title="始终重写toString方法"></a>始终重写toString方法</h4><h4 id="接口仅用来定义类型"><a href="#接口仅用来定义类型" class="headerlink" title="接口仅用来定义类型"></a>接口仅用来定义类型</h4><ol><li>不在接口中定义常量，将常量放到与其紧密相关联的类或接口中，或将常量定义在工具类中，接口中最好仅保留类型的定义。</li><li>（如果一个非final类实现了常量接口，那么此类的所有子类都会被该常量接口所污染）。</li><li>如果大量使用实用工具类导出的常量，则通过使用静态导入来限定具有类名的常量。</li></ol><h4 id="优先考虑静态成员类"><a href="#优先考虑静态成员类" class="headerlink" title="优先考虑静态成员类"></a>优先考虑静态成员类</h4><p>嵌套类（nested class）是在另一个类中定义的类。 嵌套类应该只存在于其宿主类（enclosing class）中。 如果一个嵌套类在其他一些情况下是有用的，那么它应该是一个顶级类。 有四种嵌套类：静态成员类，非静态成员类，匿名类和局部类。 除了第一种以外，剩下的三种都被称为内部类（inner class）。   </p><ul><li>静态成员类是最简单的嵌套类。 最好把它看作是一个普通的类，恰好在另一个类中声明，并且可以访问所有宿主类的成员，甚至是那些被声明为私有类的成员。 静态成员类是其宿主类的静态成员，并遵循与其他静态成员相同的可访问性规则。 如果它被声明为private，则只能在宿主类中访问，静态成员类的一个常见用途是作为公共帮助类，仅在与其外部类一起使用时才有用。</li><li>非静态成员类实例和其宿主实例之间的关联是在创建成员类实例时建立的，并且之后不能被修改。 通常情况下，通过在宿主类的实例方法中调用非静态成员类构造方法来自动建立关联。 尽管很少有可能使用表达式enclosingInstance.new MemberClass(args)手动建立关联。 该关联在非静态成员类实例中占用了空间，并为其构建添加了时间开销。</li><li>一个匿名类没有名字。 它不是其宿主类的成员。 它不是与其他成员一起声明，而是在使用时同时声明和实例化。 在表达式合法的代码中，匿名类是允许的。 当且仅当它们出现在非静态上下文中时，匿名类才会封装实例。 但是，即使它们出现在静态上下文中，它们也不能有除常量型变量之外的任何静态成员，这些常量型变量包括final的基本类型，或者初始化常量表达式的字符串属性。匿名类是创建小方法对象和处理对象的首选方法，但lambda表达式现在是首选。 匿名类的另一个常见用途是实现静态工厂方法。</li><li>局部类是四种嵌套类中使用最少的。 一个局部类可以在任何可以声明局部变量的地方声明，并遵守相同的作用域规则。 局部类与其他类型的嵌套类具有共同的属性。 像成员类一样，他们有名字，可以重复使用。 就像匿名类一样，只有在非静态上下文中定义它们时，它们才会包含实例，并且它们不能包含静态成员。 像匿名类一样，应该保持简短，以免损害可读性。</li></ul><h4 id="永远不要将多个顶级类或接口放在一个源文件中。"><a href="#永远不要将多个顶级类或接口放在一个源文件中。" class="headerlink" title="永远不要将多个顶级类或接口放在一个源文件中。"></a>永远不要将多个顶级类或接口放在一个源文件中。</h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;effect-java学习笔记&quot;&gt;&lt;a href=&quot;#effect-java学习笔记&quot; class=&quot;headerlink&quot; title=&quot;effect-java学习笔记&quot;&gt;&lt;/a&gt;effect-java学习笔记&lt;/h2&gt;&lt;h4 id=&quot;基本类型和装箱类型的选择&quot;
      
    
    </summary>
    
      <category term="java" scheme="http://github.ymlsfly.xin/categories/java/"/>
    
    
      <category term="effect-java" scheme="http://github.ymlsfly.xin/tags/effect-java/"/>
    
  </entry>
  
  <entry>
    <title>svn安装部署</title>
    <link href="http://github.ymlsfly.xin/2018/12/19/svn/"/>
    <id>http://github.ymlsfly.xin/2018/12/19/svn/</id>
    <published>2018-12-19T12:45:37.000Z</published>
    <updated>2018-12-19T12:49:11.775Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SVN服务器的部署使用"><a href="#SVN服务器的部署使用" class="headerlink" title="SVN服务器的部署使用"></a>SVN服务器的部署使用</h1><pre><code>本文是博主亲自折腾过然后记录下的笔记，基本已经很全了，希望对其他的朋友都有帮助。   注明，博主折腾所用的是ubuntu服务器。</code></pre><h2 id="部署安装svn服务器"><a href="#部署安装svn服务器" class="headerlink" title="部署安装svn服务器"></a><em><strong>部署安装svn服务器</strong></em></h2><h3 id="1、安装svn"><a href="#1、安装svn" class="headerlink" title="1、安装svn"></a>1、安装svn</h3><p> 查看是否已经安装了svn：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn --version</span><br></pre></td></tr></table></figure></p><p>如果已经安装，可以卸载（自选，重装即卸载）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get remove --purge subversion</span><br><span class="line"><span class="comment"># （--purge 选项表示彻底删除该软件和相关文件）</span></span><br></pre></td></tr></table></figure></p><p>更新源并安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install subversion</span><br></pre></td></tr></table></figure></p><h3 id="2、创建svn版本库"><a href="#2、创建svn版本库" class="headerlink" title="2、创建svn版本库"></a>2、创建svn版本库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir /<span class="built_in">test</span>/svn</span><br><span class="line">mkdir /<span class="built_in">test</span>/svn/repository</span><br><span class="line"><span class="comment"># 更改repository的权限（第一次搭建没有赋予权限，客户端访问服务器被拒绝）</span></span><br><span class="line">chmod -R 777 /<span class="built_in">test</span>/svn/repository</span><br><span class="line"><span class="comment"># 创建版本库</span></span><br><span class="line">svnadmin create /<span class="built_in">test</span>/svn/repository</span><br></pre></td></tr></table></figure><h3 id="3、修改配置文件"><a href="#3、修改配置文件" class="headerlink" title="3、修改配置文件"></a>3、修改配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /<span class="built_in">test</span>/svn/repository</span><br><span class="line">chmod -R 777 db</span><br></pre></td></tr></table></figure><ol><li><p>修改配置文件conf/svnserve.conf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim /<span class="built_in">test</span>/svn/repository/conf/svnserve.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匿名用户可读（可改成none，即不可读）</span></span><br><span class="line">anon-access = <span class="built_in">read</span></span><br><span class="line"><span class="comment"># 权限用户可写</span></span><br><span class="line">auth-access = write</span><br><span class="line"><span class="comment"># 密码文件为passwd</span></span><br><span class="line">password-db = passwd</span><br><span class="line"><span class="comment"># 权限文件为authz</span></span><br><span class="line">authz-db = authz</span><br><span class="line"><span class="comment"># （tip：去掉前面的# 并且顶格，不然会报错）</span></span><br></pre></td></tr></table></figure></li><li><p>添加访问用户密码文件conf/passwd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim /<span class="built_in">test</span>/svn/repository/conf/passwd</span><br><span class="line"></span><br><span class="line">[users]</span><br><span class="line">fy = 123</span><br><span class="line">hello = hello</span><br><span class="line"><span class="comment"># （直接用户名 = 密码，一行一个用户，明文密码）</span></span><br></pre></td></tr></table></figure></li><li><p>设置用户权限conf/authz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /<span class="built_in">test</span>/svn/repository/conf/authz</span><br><span class="line"></span><br><span class="line">[groups]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切记组要定义在目录上面，否则会报错</span></span><br><span class="line"><span class="comment"># 用户fy属于admin权限组</span></span><br><span class="line">admin = fy</span><br><span class="line"></span><br><span class="line">[/]</span><br><span class="line"><span class="comment"># admin权限组的权限是读和写</span></span><br><span class="line">@admin = rw</span><br><span class="line"><span class="comment"># 所有的组都具有读权限和写权限</span></span><br><span class="line">* = r</span><br><span class="line"><span class="comment"># （[/]代表的根目录，注意定义用户组一定要放在最上面）</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="4、启动svn服务器"><a href="#4、启动svn服务器" class="headerlink" title="4、启动svn服务器"></a>4、启动svn服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">svnserve -d -r /<span class="built_in">test</span>/svn</span><br><span class="line"><span class="comment"># （-d：表示在后台运行，-r：指定服务器的根目录）</span></span><br></pre></td></tr></table></figure><p>用如下命令查看svnserve是否已经运行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep svnserve</span><br><span class="line">&gt;&gt;root     28019  0.0  0.1  73492  2860 ?        Ss   Apr04   0:00 svnserve -d -r /software/svn/</span><br><span class="line"><span class="comment"># （表示服务器已经在后台运行了）</span></span><br></pre></td></tr></table></figure></p><p>如果需要关闭svn服务器，可以用如下命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall svnserve</span><br></pre></td></tr></table></figure></p><h3 id="5、客户端连接"><a href="#5、客户端连接" class="headerlink" title="5、客户端连接"></a>5、客户端连接</h3><p>在windows上打开小乌龟客户端，输入地址访问：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">svn://ip/repository</span></span><br><span class="line"># （按照登录用户不同，所得权限就不同）</span><br></pre></td></tr></table></figure></p><h2 id="svn和Apache整合"><a href="#svn和Apache整合" class="headerlink" title="svn和Apache整合"></a><em><strong>svn和Apache整合</strong></em></h2><h3 id="1、安装Apache"><a href="#1、安装Apache" class="headerlink" title="1、安装Apache"></a>1、安装Apache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install apache2</span><br></pre></td></tr></table></figure><h3 id="2、修改Apache端口"><a href="#2、修改Apache端口" class="headerlink" title="2、修改Apache端口"></a>2、修改Apache端口</h3><p>（可选，此处因为博主nginx用了80端口，所以更换Apache端口为8081）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/apache2/ports/conf</span><br><span class="line">Listen 8081</span><br><span class="line"></span><br><span class="line">vim /etc/apache2/sites-available/000-default.conf</span><br><span class="line">&lt;VirtualHost *:8081&gt;</span><br></pre></td></tr></table></figure></p><h3 id="3、安装整合需要的组件"><a href="#3、安装整合需要的组件" class="headerlink" title="3、安装整合需要的组件"></a>3、安装整合需要的组件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install libapache2-svn</span><br><span class="line">apt-get install apache2-utils</span><br></pre></td></tr></table></figure><h3 id="4、修改Apache模块儿部分的配置文件"><a href="#4、修改Apache模块儿部分的配置文件" class="headerlink" title="4、修改Apache模块儿部分的配置文件"></a>4、修改Apache模块儿部分的配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/apache2/mods-enabled/dav_svn.load</span><br><span class="line">LoadModule dav_svn_module /usr/lib/apache2/modules/mod_dav_svn.so  </span><br><span class="line">LoadModule authz_svn_module /usr/lib/apache2/modules/mod_authz_svn.so</span><br></pre></td></tr></table></figure><h3 id="5、生成新的整合后登录的密码文件"><a href="#5、生成新的整合后登录的密码文件" class="headerlink" title="5、生成新的整合后登录的密码文件"></a>5、生成新的整合后登录的密码文件</h3><p>（可以直接用SVN的密码文件，但会覆盖，所以最好先备份，<br>原密码文件只能用于svn://前缀协议的登录，此生成的新密码文件只能用于http ://前缀协议的登录）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cp /<span class="built_in">test</span>/svn/repository/conf/passwd /<span class="built_in">test</span>/svn/repository/conf/passwd.bak</span><br><span class="line">htpasswd -c /<span class="built_in">test</span>/svn/repository/conf/passwd <span class="string">'用户1'</span></span><br><span class="line">htpasswd /<span class="built_in">test</span>/svn/repository/conf/passwd <span class="string">'用户2'</span></span><br><span class="line"><span class="comment"># （切记：首次创建需要添加-c选项，如果再次添加用户的话不需要添加-c选项了，如果添加-c选项，之前已经添加的用户就会消失，相当于从新开始了）</span></span><br></pre></td></tr></table></figure></p><h3 id="6、配置Apache，以http的协议方式访问svn服务"><a href="#6、配置Apache，以http的协议方式访问svn服务" class="headerlink" title="6、配置Apache，以http的协议方式访问svn服务"></a>6、配置Apache，以http的协议方式访问svn服务</h3><p>（在安装libapache2-svn的时候，生成了一个路径为/etc/apache2/mods-available/dav_svn.conf的文件，直接进行修改即可）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/apache2/mods-available/dav_svn.conf</span><br><span class="line"></span><br><span class="line">&lt;Location /svn&gt;</span><br><span class="line"><span class="comment"># http中需要输入的前缀</span></span><br><span class="line">DAV svn</span><br><span class="line"><span class="comment"># SVNParentPath /test/svn/repository  </span></span><br><span class="line"><span class="comment"># 挂载linux的文件路径</span></span><br><span class="line">SVNPath /<span class="built_in">test</span>/svn/repository</span><br><span class="line">AuthType Basic</span><br><span class="line">AuthName <span class="string">"Subversion Repository"</span></span><br><span class="line"><span class="comment"># 文字提示</span></span><br><span class="line">AuthUserFile /<span class="built_in">test</span>/svn/repository/conf/passwd</span><br><span class="line"><span class="comment"># 密码文件</span></span><br><span class="line">AuthzSVNAccessFile /<span class="built_in">test</span>/svn/repository/conf/authz</span><br><span class="line"><span class="comment"># 权限配置文件</span></span><br><span class="line">Require valid-user</span><br><span class="line"><span class="comment"># 每次登陆都输入密码</span></span><br><span class="line">&lt;/Location&gt;</span><br></pre></td></tr></table></figure></p><h3 id="7、重启svn，重启Apache"><a href="#7、重启svn，重启Apache" class="headerlink" title="7、重启svn，重启Apache"></a>7、重启svn，重启Apache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">killall svnserve</span><br><span class="line">svnserve -d -r /<span class="built_in">test</span>/svn</span><br><span class="line">service apache2 restart</span><br></pre></td></tr></table></figure><h3 id="8、svn登录"><a href="#8、svn登录" class="headerlink" title="8、svn登录"></a>8、svn登录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip:8081/svn</span><br></pre></td></tr></table></figure><h2 id="一点小tip"><a href="#一点小tip" class="headerlink" title="一点小tip"></a>一点小tip</h2><h3 id="问题补充"><a href="#问题补充" class="headerlink" title="问题补充"></a>问题补充</h3><ul><li>客户端没有报错原因，在服务器端可以检查配置文件是否有误<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">svnauthz-validate /<span class="built_in">test</span>/svn/repository/conf/svnserve.conf</span><br><span class="line">svnauthz-validate /<span class="built_in">test</span>/svn/repository/conf/passwd</span><br><span class="line">svnauthz-validate /<span class="built_in">test</span>/svn/repository/conf/authz</span><br></pre></td></tr></table></figure></li></ul><p>如果读者有啥好的建议，或新的tip，等等都可以留言，博主会及时更新此博客！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;SVN服务器的部署使用&quot;&gt;&lt;a href=&quot;#SVN服务器的部署使用&quot; class=&quot;headerlink&quot; title=&quot;SVN服务器的部署使用&quot;&gt;&lt;/a&gt;SVN服务器的部署使用&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;本文是博主亲自折腾过然后记录下的笔记，基本已经很全了
      
    
    </summary>
    
      <category term="svn" scheme="http://github.ymlsfly.xin/categories/svn/"/>
    
    
      <category term="svn" scheme="http://github.ymlsfly.xin/tags/svn/"/>
    
  </entry>
  
  <entry>
    <title>使用laydate来显示个性化的时间输入框</title>
    <link href="http://github.ymlsfly.xin/2018/03/16/%E4%BD%BF%E7%94%A8laydate%E6%9D%A5%E6%98%BE%E7%A4%BA%E4%B8%AA%E6%80%A7%E5%8C%96%E7%9A%84%E6%97%B6%E9%97%B4%E8%BE%93%E5%85%A5%E6%A1%86/"/>
    <id>http://github.ymlsfly.xin/2018/03/16/使用laydate来显示个性化的时间输入框/</id>
    <published>2018-03-16T09:08:35.000Z</published>
    <updated>2018-03-16T11:26:51.860Z</updated>
    
    <content type="html"><![CDATA[<h2 id="内容简介"><a href="#内容简介" class="headerlink" title="内容简介"></a>内容简介</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">常规用法</span><br><span class="line">国际化</span><br><span class="line">年选择器</span><br><span class="line">年月选择器</span><br><span class="line">时间选择器</span><br><span class="line">日期时间选择器</span><br><span class="line">日期范围</span><br><span class="line">年范围</span><br><span class="line">年月范围</span><br><span class="line">时间范围</span><br><span class="line">日期时间范围</span><br><span class="line">自定义格式</span><br><span class="line">开启公历节日</span><br><span class="line">自定义重要日</span><br><span class="line">限定可选日期</span><br><span class="line">限定可选时间</span><br><span class="line">初始赋值</span><br><span class="line">选中后的回调</span><br><span class="line">日期切换的回调</span><br><span class="line">不出现底部栏</span><br><span class="line">只出现确定按钮</span><br><span class="line">自定义事件</span><br><span class="line">自定义颜色</span><br><span class="line">格子主题</span><br></pre></td></tr></table></figure><h2 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/laydate/laydate.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">/*常规用法*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date1_1'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*国际版*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date1_2',</span></span><br><span class="line"><span class="undefined">lang: 'en'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*年选择器*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date2_1',</span></span><br><span class="line"><span class="undefined">type: 'year'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*年月选择器*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date2_2',</span></span><br><span class="line"><span class="undefined">type: 'month'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*时间选择器*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date2_3',</span></span><br><span class="line"><span class="undefined">type: 'time'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*日期时间选择器*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date2_4',</span></span><br><span class="line"><span class="undefined">type: 'datetime'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*日期范围*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date3_1',</span></span><br><span class="line"><span class="undefined">range: true</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*年范围*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date3_2',</span></span><br><span class="line"><span class="undefined">type: 'year',</span></span><br><span class="line"><span class="undefined">range: true</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*年月范围*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date3_3',</span></span><br><span class="line"><span class="undefined">type: 'month',</span></span><br><span class="line"><span class="undefined">range: true</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*时间范围*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date3_4',</span></span><br><span class="line"><span class="undefined">type: 'time',</span></span><br><span class="line"><span class="undefined">range: true</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*日期时间范围*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date3_5',</span></span><br><span class="line"><span class="undefined">type: 'datetime',</span></span><br><span class="line"><span class="undefined">range: true</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*自定义格式*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date4_1',</span></span><br><span class="line"><span class="undefined">format: 'yyyy年MM月dd日'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date4_2',</span></span><br><span class="line"><span class="undefined">format: 'dd/MM/yyyy'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date4_3',</span></span><br><span class="line"><span class="undefined">format: 'yyyyMM'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date4_4',</span></span><br><span class="line"><span class="undefined">type: 'time',</span></span><br><span class="line"><span class="undefined">format: 'H点M分'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date4_5',</span></span><br><span class="line"><span class="undefined">type: 'month',</span></span><br><span class="line"><span class="undefined">range: '→',</span></span><br><span class="line"><span class="undefined">format: 'yyyy-MM'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date4_6',</span></span><br><span class="line"><span class="undefined">type: 'datetime',</span></span><br><span class="line"><span class="undefined">range: '到',</span></span><br><span class="line"><span class="undefined">format: 'yyyy年M月d日H时m分s秒'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*开启公历节日*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date5_1',</span></span><br><span class="line"><span class="undefined">calendar: true</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*自定义重要日*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date5_2',</span></span><br><span class="line"><span class="undefined">mark: &#123;</span></span><br><span class="line"><span class="undefined">'0-10-14': '生日',</span></span><br><span class="line"><span class="undefined">'0-12-31': '跨年' //每年的日期</span></span><br><span class="line"><span class="undefined">,</span></span><br><span class="line"><span class="undefined">'0-0-10': '工资' //每月某天</span></span><br><span class="line"><span class="undefined">,</span></span><br><span class="line"><span class="undefined">'0-0-15': '月中',</span></span><br><span class="line"><span class="undefined">'2017-8-15': '' //如果为空字符，则默认显示数字+徽章</span></span><br><span class="line"><span class="undefined">,</span></span><br><span class="line"><span class="undefined">'2099-10-14': '呵呵'</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">done: function(value, date) &#123;</span></span><br><span class="line"><span class="undefined">if(date.year === 2017 &amp;&amp; date.month === 8 &amp;&amp; date.date === 15) &#123; </span></span><br><span class="line"><span class="undefined">/*点击2017年8月15日，弹出提示语*/</span></span><br><span class="line"><span class="undefined">alert('这一天是：中国人民抗日战争胜利72周年');</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*限定可选日期*/</span></span><br><span class="line"><span class="undefined">var ins22 = laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date6_1',</span></span><br><span class="line"><span class="undefined">min: '2016-10-14',</span></span><br><span class="line"><span class="undefined">max: '2080-10-14',</span></span><br><span class="line"><span class="undefined">ready: function() &#123;</span></span><br><span class="line"><span class="xml">ins22.hint('日期可选值设定在 <span class="tag">&lt;<span class="name">br</span>&gt;</span> 2016-10-14 到 2080-10-14');</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*前后若干天可选，这里以7天为例*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date6_2',</span></span><br><span class="line"><span class="undefined">min: -7,</span></span><br><span class="line"><span class="undefined">max: 7</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*限定可选时间*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date6_3',</span></span><br><span class="line"><span class="undefined">type: 'time',</span></span><br><span class="line"><span class="undefined">min: '09:30:00',</span></span><br><span class="line"><span class="undefined">max: '17:30:00',</span></span><br><span class="line"><span class="undefined">btns: ['clear', 'confirm']</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*初始赋值*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date7_1',</span></span><br><span class="line"><span class="undefined">value: '1989-10-14'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*选中后的回调*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date7_2',</span></span><br><span class="line"><span class="undefined">done: function(value, date) &#123;</span></span><br><span class="line"><span class="undefined">alert('你选择的日期是：' + value + '\n获得的对象是' + JSON.stringify(date));</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*日期切换的回调*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date7_3',</span></span><br><span class="line"><span class="undefined">change: function(value, date) &#123;</span></span><br><span class="line"><span class="undefined">alert('你选择的日期是：' + value + '\n\n获得的对象是' + JSON.stringify(date));</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*不出现底部栏*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date7_4',</span></span><br><span class="line"><span class="undefined">showBottom: false</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*只出现确定按钮*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date7_5',</span></span><br><span class="line"><span class="undefined">btns: ['confirm']</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*自定义事件*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date7_6',</span></span><br><span class="line"><span class="undefined">trigger: 'mousedown'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*墨绿主题*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date8_1',</span></span><br><span class="line"><span class="undefined">theme: 'molv'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*自定义颜色*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date8_2',</span></span><br><span class="line"><span class="undefined">theme: '#393D49'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*格子主题*/</span></span><br><span class="line"><span class="undefined">laydate.render(&#123;</span></span><br><span class="line"><span class="undefined">elem: '.date8_3',</span></span><br><span class="line"><span class="undefined">theme: 'grid'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">date:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"date"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">datetime-local:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"datetime-local"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">time:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"time"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">中文版：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date1_1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">国际版：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date1_2"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">年选择器：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date2_1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">年月选择器：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date2_2"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">时间选择器：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date2_3"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">日期时间选择器：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date2_4"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">日期范围：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date3_1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">年范围：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date3_2"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">年月范围：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date3_3"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">时间范围：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date3_4"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">日期时间范围：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date3_5"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">yyyy年MM月dd日：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date4_1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">dd/MM/yyyy：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date4_2"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">yyyyMM：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date4_3"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">H点M分：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date4_4"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">yyyy-MM：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date4_5"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">yyyy年M月d日H时m分s秒：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date4_6"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">开启公历节日：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date5_1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">自定义重要日：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date5_2"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">限定可选日期：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date6_1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">前后若干天可选：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date6_2"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">限定可选时间：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date6_3"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">初始赋值：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date7_1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">选中后的回调：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date7_2"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">日期切换的回调：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date7_3"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">不出现底部栏：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date7_4"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">只出现确定按钮：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date7_5"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">自定义事件：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date7_6"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">墨绿主题：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date8_1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">自定义颜色：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date8_2"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">格子主题：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">class</span>=<span class="string">"date8_3"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><hr><p><a href="http://github.ifdream.xin/demo/laydate/laydateDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/laydate/laydateDemo.html</a></p><hr><h2 id="资源文件链接"><a href="#资源文件链接" class="headerlink" title="资源文件链接"></a>资源文件链接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/js/laydate/laydate.js</span><br><span class="line">http://github.ifdream.xin/js/laydate/theme.zip</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;内容简介&quot;&gt;&lt;a href=&quot;#内容简介&quot; class=&quot;headerlink&quot; title=&quot;内容简介&quot;&gt;&lt;/a&gt;内容简介&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr
      
    
    </summary>
    
      <category term="日期时间输入框" scheme="http://github.ymlsfly.xin/categories/%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E8%BE%93%E5%85%A5%E6%A1%86/"/>
    
    
      <category term="datetime" scheme="http://github.ymlsfly.xin/tags/datetime/"/>
    
  </entry>
  
  <entry>
    <title>cannot be read or is not a valid ZIP file</title>
    <link href="http://github.ymlsfly.xin/2018/01/30/cannot-be-read-or-is-not-a-valid-ZIP-file/"/>
    <id>http://github.ymlsfly.xin/2018/01/30/cannot-be-read-or-is-not-a-valid-ZIP-file/</id>
    <published>2018-01-30T08:23:42.000Z</published>
    <updated>2018-01-30T08:32:33.890Z</updated>
    
    <content type="html"><![CDATA[<p>博主今天在eclipse中导入一个maven项目，在项目上报了个叹号，项目不能运行，打开problem窗口，终于在里面看到了错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cannot be read or is not a valid ZIP file</span><br></pre></td></tr></table></figure><p>百思不得其解，终于在网上找到了答案，这种异常错误是依赖的jar包没有完全下好。到repository 中删去相应的jar目录 让maven重新去下载。如果还报错，删除maven报错，eclipse中打开pom.xml 编辑状态 重新保存。看看最新的报错信息，进入对应的目录，删除即可。</p><p>博主就是到自己本地的maven仓库找到错误中指定位置指定的jar，将其完全删除，然后回到maven项目，随便变动下pom.xml文件，然后重新保存，让其重新下载那个没下载好的jar，等下完后就发现项目上的叹号没有了，问题解决了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;博主今天在eclipse中导入一个maven项目，在项目上报了个叹号，项目不能运行，打开problem窗口，终于在里面看到了错误：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;
      
    
    </summary>
    
      <category term="异常错误集" scheme="http://github.ymlsfly.xin/categories/%E5%BC%82%E5%B8%B8%E9%94%99%E8%AF%AF%E9%9B%86/"/>
    
    
      <category term="maven" scheme="http://github.ymlsfly.xin/tags/maven/"/>
    
      <category term="eclipse报错" scheme="http://github.ymlsfly.xin/tags/eclipse%E6%8A%A5%E9%94%99/"/>
    
  </entry>
  
  <entry>
    <title>zTree的试炼</title>
    <link href="http://github.ymlsfly.xin/2018/01/29/zTree%E7%9A%84%E8%AF%95%E7%82%BC/"/>
    <id>http://github.ymlsfly.xin/2018/01/29/zTree的试炼/</id>
    <published>2018-01-29T09:29:09.000Z</published>
    <updated>2018-01-29T11:04:52.745Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>jQuery的插件特别多，前几天博主盯上了zTree，这个有名的jquery树插件，然后通过网上一些别人的资料，以及官方的API，将zTree稍过了下，今天就将其分享出来！</p><h2 id="功能介绍"><a href="#功能介绍" class="headerlink" title="功能介绍"></a>功能介绍</h2><ol><li>初始化zTree</li><li>zTree的配置</li><li>添加/删除/获取/修改节点</li><li>全选/反选节点</li><li>节点上移下移</li><li>节点右键菜单</li></ol><h2 id="贴代码"><a href="#贴代码" class="headerlink" title="贴代码"></a>贴代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span> zTreeDemo <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/demo.css"</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/zTreeStyle.css"</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">#rMenuUl&#123;</span></span><br><span class="line"><span class="undefined">border: 1px dashed #617775;</span></span><br><span class="line"><span class="undefined">display: none;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">#rMenuUl li&#123;</span></span><br><span class="line"><span class="undefined">list-style: none;</span></span><br><span class="line"><span class="undefined">text-align: center;</span></span><br><span class="line"><span class="undefined">width: 100px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">#rMenuUl li:hover&#123;</span></span><br><span class="line"><span class="undefined">background-color: #617775;</span></span><br><span class="line"><span class="undefined">color: white;</span></span><br><span class="line"><span class="undefined">cursor: pointer;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jquery.ztree.all.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var zTreeObj;</span></span><br><span class="line"><span class="undefined">var nowRightClickNode = null;</span></span><br><span class="line"><span class="undefined">// zTree 的参数配置，深入使用请参考 API 文档（setting 配置详解）</span></span><br><span class="line"><span class="undefined">var setting = &#123;</span></span><br><span class="line"><span class="undefined">treeId: "",</span></span><br><span class="line"><span class="undefined">treeObj: null,</span></span><br><span class="line"><span class="undefined">view: &#123;</span></span><br><span class="line"><span class="undefined">selectedMulti: true, //设置是否能够同时选中多个节点</span></span><br><span class="line"><span class="undefined">showIcon: true, //设置是否显示节点图标</span></span><br><span class="line"><span class="undefined">showLine: true, //设置是否显示节点与节点之间的连线</span></span><br><span class="line"><span class="undefined">showTitle: true, //设置是否显示节点的title提示信息</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">simpleData: &#123;</span></span><br><span class="line"><span class="undefined">enable: false, //设置是否启用简单数据格式（zTree支持标准数据格式跟简单数据格式）</span></span><br><span class="line"><span class="undefined">idKey: "id", //设置启用简单数据格式时id对应的属性名称</span></span><br><span class="line"><span class="undefined">pidKey: "pId" //设置启用简单数据格式时parentId对应的属性名称,ztree根据id及pid层级关系构建树结构</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">check: &#123;</span></span><br><span class="line"><span class="undefined">enable: true //设置是否显示checkbox复选框</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">callback: &#123;</span></span><br><span class="line"><span class="undefined">/*定义节点单击事件回调函数*/</span></span><br><span class="line"><span class="undefined">onClick: onClick,</span></span><br><span class="line"><span class="undefined">/*定义节点右键单击事件回调函数*/</span></span><br><span class="line"><span class="undefined">onRightClick: OnRightClick,</span></span><br><span class="line"><span class="undefined">/*定义节点重新编辑成功前回调函数，一般用于节点编辑时判断输入的节点名称是否合法*/</span></span><br><span class="line"><span class="undefined">beforeRename: beforeRename,</span></span><br><span class="line"><span class="undefined">/*定义节点双击事件回调函数*/</span></span><br><span class="line"><span class="undefined">onDblClick: "onDblClick",</span></span><br><span class="line"><span class="undefined">/*定义节点复选框选中或取消选中事件的回调函数*/</span></span><br><span class="line"><span class="undefined">onCheck: onCheck</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">async: &#123;</span></span><br><span class="line"><span class="undefined">/*设置启用异步加载*/</span></span><br><span class="line"><span class="undefined">enable: true,</span></span><br><span class="line"><span class="undefined">/*异步加载类型:post和get*/</span></span><br><span class="line"><span class="undefined">type: "get",</span></span><br><span class="line"><span class="undefined">/*定义ajax提交参数的参数类型，一般为json格式*/</span></span><br><span class="line"><span class="undefined">contentType: "application/json",</span></span><br><span class="line"><span class="undefined">/*定义数据请求路径*/</span></span><br><span class="line"><span class="undefined">url: "/Design/Get",</span></span><br><span class="line"><span class="undefined">/*定义提交时参数的名称，=号前面标识节点属性，后面标识提交时json数据中参数的名称*/</span></span><br><span class="line"><span class="undefined">autoParam: ["id=id", "name=name"]</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">/*节点数据*/</span></span><br><span class="line"><span class="undefined">var zNodes = [&#123;</span></span><br><span class="line"><span class="undefined">name: "test1",</span></span><br><span class="line"><span class="undefined">open: true,</span></span><br><span class="line"><span class="undefined">children: [&#123;</span></span><br><span class="line"><span class="undefined">name: "test1_1"</span></span><br><span class="line"><span class="undefined">&#125;, &#123;</span></span><br><span class="line"><span class="undefined">name: "test1_2"</span></span><br><span class="line"><span class="undefined">&#125;]</span></span><br><span class="line"><span class="undefined">&#125;,&#123;</span></span><br><span class="line"><span class="undefined">name: "test2",</span></span><br><span class="line"><span class="undefined">open: true,</span></span><br><span class="line"><span class="undefined">children: [&#123;</span></span><br><span class="line"><span class="undefined">name: "test2_1"</span></span><br><span class="line"><span class="undefined">&#125;, &#123;</span></span><br><span class="line"><span class="undefined">name: "test2_2"</span></span><br><span class="line"><span class="undefined">&#125;]</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">];</span></span><br><span class="line"><span class="undefined">$(document).ready(function() &#123;</span></span><br><span class="line"><span class="undefined">/*初始化时会返回该树*/</span></span><br><span class="line"><span class="undefined">var zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, zNodes);</span></span><br><span class="line"><span class="undefined">/*获取所有选中的节点*/</span></span><br><span class="line"><span class="undefined">$("#getCheckedNodes").click(function()&#123;</span></span><br><span class="line"><span class="undefined">var nodes = zTreeObj.getCheckedNodes();</span></span><br><span class="line"><span class="undefined">var str = "选中的节点数：" + nodes.length;</span></span><br><span class="line"><span class="undefined">$.each(nodes, function(index,n) &#123;</span></span><br><span class="line"><span class="undefined">str += "\n" + n.name ;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">alert(str);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*添加节点*/</span></span><br><span class="line"><span class="undefined">$("#addNode").click(function() &#123;</span></span><br><span class="line"><span class="undefined">/*获取到该树*/</span></span><br><span class="line"><span class="undefined">var tree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">/*</span></span><br><span class="line"><span class="undefined"> *  parentNode:指定的父节点，如果增加根节点，请设置 parentNode 为 null 即可</span></span><br><span class="line"><span class="undefined">index:新节点插入的位置（从 0 开始），index = -1 时，插入到最后，此参数可忽略</span></span><br><span class="line"><span class="undefined">newNodes：需要增加的节点数据 JSON 对象集合，数据只需要满足 zTree 的节点数据必需的属性即可 </span></span><br><span class="line"><span class="undefined">isSilent：true 时，添加节点后不展开父节点，其他值或缺省状态都自动展开</span></span><br><span class="line"><span class="undefined"> * </span></span><br><span class="line"><span class="undefined"> * */</span></span><br><span class="line"><span class="undefined">tree.addNodes(null, 2, [&#123;</span></span><br><span class="line"><span class="undefined">name:"hello",</span></span><br><span class="line"><span class="undefined">open : true ,</span></span><br><span class="line"><span class="undefined">children : [</span></span><br><span class="line"><span class="undefined">&#123;name:"hello1"&#125; , &#123;name:"hello2"&#125;</span></span><br><span class="line"><span class="undefined">]&#125;], false);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*全选所有节点*/</span></span><br><span class="line"><span class="undefined">$("#checkAll").click(function()&#123;</span></span><br><span class="line"><span class="undefined">var tree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">/*checked参数为true时全部勾选，为false时全部取消勾选。*/</span></span><br><span class="line"><span class="undefined">tree.checkAllNodes(true);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*反选所有节点*/</span></span><br><span class="line"><span class="undefined">$("#checkAllNo").click(function()&#123;</span></span><br><span class="line"><span class="undefined">var tree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">var nodes = tree.getNodes();</span></span><br><span class="line"><span class="undefined">$.each(nodes, function(index,n) &#123;</span></span><br><span class="line"><span class="undefined">/*</span></span><br><span class="line"><span class="undefined"> * check_Child_State子节点勾选状态</span></span><br><span class="line"><span class="undefined"> * -1不存在子节点 或 子节点全部设置为 nocheck = true</span></span><br><span class="line"><span class="undefined">0无 子节点被勾选</span></span><br><span class="line"><span class="undefined">1部分 子节点被勾选</span></span><br><span class="line"><span class="undefined">2全部 子节点被勾选</span></span><br><span class="line"><span class="undefined"> * */</span></span><br><span class="line"><span class="undefined">if(n.check_Child_State == 0)&#123;</span></span><br><span class="line"><span class="undefined">checkXNode(tree , n);</span></span><br><span class="line"><span class="undefined">&#125;else&#123;</span></span><br><span class="line"><span class="undefined">checkCNode(tree , n);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">/*通过递归来反选某节点*/</span></span><br><span class="line"><span class="undefined">function checkCNode(tree , node)&#123;</span></span><br><span class="line"><span class="undefined">if(node.children != null)&#123;</span></span><br><span class="line"><span class="undefined">if(node.check_Child_State == 2)&#123;</span></span><br><span class="line"><span class="undefined">/*原来的子节点全被选中*/</span></span><br><span class="line"><span class="undefined">tree.checkNode(node,false);</span></span><br><span class="line"><span class="undefined">$.each(node.children, function(index , n) &#123;</span></span><br><span class="line"><span class="undefined">checkCNode(tree,n);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;else&#123;</span></span><br><span class="line"><span class="undefined">$.each(node.children, function(index , n) &#123;</span></span><br><span class="line"><span class="undefined">if(n.checked)&#123;</span></span><br><span class="line"><span class="undefined">checkCNode(tree , n);</span></span><br><span class="line"><span class="undefined">&#125;else&#123;</span></span><br><span class="line"><span class="undefined">checkXNode(tree,n);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;else&#123;</span></span><br><span class="line"><span class="undefined">/*node无子节点*/</span></span><br><span class="line"><span class="undefined">tree.checkNode(node,false); </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*通过递归来选择某节点*/</span></span><br><span class="line"><span class="undefined">function checkXNode(tree,node)&#123;</span></span><br><span class="line"><span class="undefined">tree.checkNode(node);</span></span><br><span class="line"><span class="undefined">if(node.children != null)&#123;</span></span><br><span class="line"><span class="undefined">$.each(node.children, function(index , n) &#123;</span></span><br><span class="line"><span class="undefined">checkXNode(tree , n);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*通过递归将某节点置为未选*/</span></span><br><span class="line"><span class="undefined">function checkNNode(tree , node)&#123;</span></span><br><span class="line"><span class="undefined">tree.checkNode(node,false); </span></span><br><span class="line"><span class="undefined">if(node.children)&#123;</span></span><br><span class="line"><span class="undefined">$.each(node.children, function(index , n) &#123;</span></span><br><span class="line"><span class="undefined">checkNNode(tree , n);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*节点单击事件*/</span></span><br><span class="line"><span class="undefined">function onClick(e, treeId, treeNode) &#123;</span></span><br><span class="line"><span class="undefined">/*如果不是叶子结点，结束*/</span></span><br><span class="line"><span class="undefined">if(treeNode.isParent)</span></span><br><span class="line"><span class="undefined">return;</span></span><br><span class="line"><span class="undefined">/*获取当前结点上的相关属性数据，执行相关逻辑*/</span></span><br><span class="line"><span class="undefined">alert(treeNode.name);</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">/*节点复选框事件*/</span></span><br><span class="line"><span class="undefined">function onCheck() &#123;</span></span><br><span class="line"><span class="undefined">/*获取树对象*/</span></span><br><span class="line"><span class="undefined">var treeObj = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">/*获取勾选状态改变的节点*/</span></span><br><span class="line"><span class="undefined">var nodes = treeObj.getChangeCheckedNodes();</span></span><br><span class="line"><span class="undefined">var designIds = [];</span></span><br><span class="line"><span class="undefined">/*定义初始勾选状态为未勾选*/</span></span><br><span class="line"><span class="undefined">var status = 0;</span></span><br><span class="line"><span class="undefined">if(nodes[0].checked)</span></span><br><span class="line"><span class="undefined">/*如果状态改变节点为勾选状态，说明当前操作是从未勾选变为已勾选。*/</span></span><br><span class="line"><span class="undefined">status = 1;</span></span><br><span class="line"><span class="undefined">$.each(nodes, function(i, item) &#123;</span></span><br><span class="line"><span class="undefined">/*将状态改变的节点id输出到数组*/</span></span><br><span class="line"><span class="undefined">designIds.push(item.id);</span></span><br><span class="line"><span class="undefined">/*将节点的初始状态置为当前状态。否则每次勾选操作获取状态改变节点时只会跟树初始化的状态相比较。*/</span></span><br><span class="line"><span class="undefined">item.checkedOld = item.checked;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">$.ajax(&#123;</span></span><br><span class="line"><span class="undefined">type: "Post",</span></span><br><span class="line"><span class="undefined">url: "url",</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">"designIds": designIds</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">success: function(data) &#123;</span></span><br><span class="line"><span class="undefined">RealBimOcx.BatchAddSubClrInfoBegin();</span></span><br><span class="line"><span class="undefined">$.each(data.result, function(i, item) &#123;</span></span><br><span class="line"><span class="undefined">/*这里根据发生改变的节点是勾选还是为勾选进行相关逻辑操作。*/</span></span><br><span class="line"><span class="undefined">if(status == 1)</span></span><br><span class="line"><span class="undefined">RealBimOcx.AddSubClrInfo(item, 255, 255, 0);</span></span><br><span class="line"><span class="undefined">else</span></span><br><span class="line"><span class="undefined">RealBimOcx.AddSubClrInfo(item, 0, 255, 0);</span></span><br><span class="line"><span class="undefined">if(i % 100 == 0) &#123;</span></span><br><span class="line"><span class="undefined">RealBimOcx.BatchAddSubClrInfoEnd();</span></span><br><span class="line"><span class="undefined">RealBimOcx.BatchAddSubClrInfoBegin();</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">RealBimOcx.BatchAddSubClrInfoEnd();</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">/*节点右键单击回调函数*/</span></span><br><span class="line"><span class="undefined">function OnRightClick(event, treeId, treeNode) &#123;</span></span><br><span class="line"><span class="undefined">nowRightClickNode = treeNode;</span></span><br><span class="line"><span class="undefined">var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">$("#treeDemo").hide();</span></span><br><span class="line"><span class="undefined">if(treeNode)&#123;</span></span><br><span class="line"><span class="undefined">/*点击的是节点*/</span></span><br><span class="line"><span class="undefined">if(treeNode.getParentNode() == null)&#123;</span></span><br><span class="line"><span class="undefined">zTree.cancelSelectedNode();</span></span><br><span class="line"><span class="undefined">/*根据鼠标位置显示右键操作面板*/</span></span><br><span class="line"><span class="undefined">showRMenu("root", event.clientX, event.clientY);</span></span><br><span class="line"><span class="undefined">&#125; else if(!treeNode.noR) &#123;</span></span><br><span class="line"><span class="undefined">zTree.selectNode(treeNode,false,false);</span></span><br><span class="line"><span class="undefined">showRMenu("node", event.clientX, event.clientY);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">$("#treeDemo").show();</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*根据节点类型，控制右键操作菜单哪些可用哪些不可用*/</span></span><br><span class="line"><span class="undefined">function showRMenu(type, x, y) &#123;</span></span><br><span class="line"><span class="undefined">$("#rMenu ul").show();</span></span><br><span class="line"><span class="undefined">if(type == "root") &#123;</span></span><br><span class="line"><span class="undefined">$("#m_del").hide();</span></span><br><span class="line"><span class="undefined">$("#m_edit").hide();</span></span><br><span class="line"><span class="undefined">$("#m_up").hide();</span></span><br><span class="line"><span class="undefined">$("#m_down").hide();</span></span><br><span class="line"><span class="undefined">$("#m_ulevel").hide();</span></span><br><span class="line"><span class="undefined">$("#m_dlevel").hide();</span></span><br><span class="line"><span class="undefined">$("#m_add").addClass('mboder');</span></span><br><span class="line"><span class="undefined">&#125; else &#123;</span></span><br><span class="line"><span class="undefined">$("#m_del").show();</span></span><br><span class="line"><span class="undefined">$("#m_edit").show();</span></span><br><span class="line"><span class="undefined">$("#m_up").show();</span></span><br><span class="line"><span class="undefined">$("#m_down").show();</span></span><br><span class="line"><span class="undefined">$("#m_add").removeClass('mboder');</span></span><br><span class="line"><span class="undefined">$("#m_ulevel").show();</span></span><br><span class="line"><span class="undefined">$("#m_dlevel").show();</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">$("#rMenu").css(&#123;</span></span><br><span class="line"><span class="undefined">"top": y + "px",</span></span><br><span class="line"><span class="undefined">"left": x + "px",</span></span><br><span class="line"><span class="undefined">"display": "block"</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">$("body").bind("mousedown", onBodyMouseDown);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*隐藏右键面板*/</span></span><br><span class="line"><span class="undefined">function hideRMenu() &#123;</span></span><br><span class="line"><span class="undefined">var rMenu = $("#rMenu");</span></span><br><span class="line"><span class="undefined">if(rMenu) rMenu.css(&#123;</span></span><br><span class="line"><span class="undefined">"display": "none"</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">$("body").unbind("mousedown", onBodyMouseDown);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*单击页面其他位置 隐藏右键面板*/</span></span><br><span class="line"><span class="undefined">function onBodyMouseDown(event) &#123;</span></span><br><span class="line"><span class="undefined">if(!(event.target.id == "rMenu" || $(event.target).parents("#rMenu").length &gt; 0)) &#123;</span></span><br><span class="line"><span class="undefined">$("#rMenu").css(&#123;</span></span><br><span class="line"><span class="undefined">"display": "none"</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*增加节点*/</span></span><br><span class="line"><span class="undefined">function addTreeNode() &#123;</span></span><br><span class="line"><span class="undefined"> var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">hideRMenu();</span></span><br><span class="line"><span class="undefined">var name = window.prompt("请输入新增的子节点的名称：");</span></span><br><span class="line"><span class="undefined">if(name == null || name == "")return;</span></span><br><span class="line"><span class="undefined">var newNode = &#123;</span></span><br><span class="line"><span class="undefined">name: name</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">newNode.checked = nowRightClickNode.checked;</span></span><br><span class="line"><span class="undefined">newNode.pid = nowRightClickNode.id;</span></span><br><span class="line"><span class="undefined">zTree.addNodes(nowRightClickNode, newNode);</span></span><br><span class="line"><span class="undefined">/*得到新增加的节点*/</span></span><br><span class="line"><span class="undefined">var node = zTree.getNodeByParam("name", name, null); </span></span><br><span class="line"><span class="undefined">/*选中新增加的节点*/</span></span><br><span class="line"><span class="undefined">zTree.selectNode(node);</span></span><br><span class="line"><span class="undefined">/*让新增加的节点处于编辑状态*/</span></span><br><span class="line"><span class="undefined">zTree.editName(node); </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*编辑节点*/</span></span><br><span class="line"><span class="undefined">function editTreeNode() &#123;</span></span><br><span class="line"><span class="undefined">var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">/*得到选中节点集合*/</span></span><br><span class="line"><span class="undefined">var nodes = zTree.getSelectedNodes(); </span></span><br><span class="line"><span class="undefined">if (nodes &amp;&amp; nodes.length &gt; 0) &#123;</span></span><br><span class="line"><span class="undefined">/*得到选中节点的父节点*/</span></span><br><span class="line"><span class="undefined">var parent = nodes[0].getParentNode(); </span></span><br><span class="line"><span class="undefined">if (parent) &#123;</span></span><br><span class="line"><span class="undefined">/*如果选中节点父节点存在，将当前节点的pid属性值设置为父节点的id*/</span></span><br><span class="line"><span class="undefined">nodes[0].pid = parent.id; </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*让选中节点处于编辑状态*/</span></span><br><span class="line"><span class="undefined">zTree.editName(nodes[0]); </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">hideRMenu();</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">/*节点编辑状态离开时触发事件 */</span></span><br><span class="line"><span class="undefined">    /*编辑并保存节点（对编辑的检查）*/</span></span><br><span class="line"><span class="undefined">    function beforeRename(treeId, treeNode, newName, isCancel) &#123;</span></span><br><span class="line"><span class="undefined">if (newName.length == 0) &#123; //节点名称判断</span></span><br><span class="line"><span class="undefined">alert("节点名不能为空。");</span></span><br><span class="line"><span class="undefined">return false;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">return true;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">/*删除节点数据 */</span></span><br><span class="line"><span class="undefined">function removeTreeNode() &#123;</span></span><br><span class="line"><span class="undefined"> var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">hideRMenu();</span></span><br><span class="line"><span class="undefined">var nodes = zTree.getSelectedNodes();</span></span><br><span class="line"><span class="undefined">if (nodes &amp;&amp; nodes.length &gt; 0) &#123;</span></span><br><span class="line"><span class="undefined">if (nodes[0].children &amp;&amp; nodes[0].children.length &gt; 0) &#123;</span></span><br><span class="line"><span class="undefined">if(window.confirm("包含下级子节点，是否连带删除？"))&#123;</span></span><br><span class="line"><span class="undefined">zTree.removeNode(nodes[0]);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125; else &#123;</span></span><br><span class="line"><span class="undefined">zTree.removeNode(nodes[0]);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">/*上移*/</span></span><br><span class="line"><span class="undefined">function m_up()&#123;</span></span><br><span class="line"><span class="undefined">var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">hideRMenu();</span></span><br><span class="line"><span class="undefined">var nodes = zTree.getSelectedNodes();</span></span><br><span class="line"><span class="undefined">var n = nodes[0];</span></span><br><span class="line"><span class="undefined">if(n &amp;&amp; !n.isFirstNode)&#123;</span></span><br><span class="line"><span class="undefined">zTree.moveNode(n.getPreNode(),n,"prev");</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*下移*/</span></span><br><span class="line"><span class="undefined">function m_down()&#123;</span></span><br><span class="line"><span class="undefined">var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">hideRMenu();</span></span><br><span class="line"><span class="undefined">var nodes = zTree.getSelectedNodes();</span></span><br><span class="line"><span class="undefined">var n = nodes[0];</span></span><br><span class="line"><span class="undefined">if(n &amp;&amp; !n.isLastNode)&#123;</span></span><br><span class="line"><span class="undefined">zTree.moveNode(n.getNextNode(),n,"next");</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*重置节点*/</span></span><br><span class="line"><span class="undefined">function resetTree()&#123;</span></span><br><span class="line"><span class="undefined">var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">hideRMenu();</span></span><br><span class="line"><span class="undefined">var nodes = zTree.getSelectedNodes();</span></span><br><span class="line"><span class="undefined">if(nodes)checkNNode(zTree , nodes[0])</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*升一级*/</span></span><br><span class="line"><span class="undefined">function uLevel()&#123;</span></span><br><span class="line"><span class="undefined">var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">hideRMenu();</span></span><br><span class="line"><span class="undefined">var nodes = zTree.getSelectedNodes();</span></span><br><span class="line"><span class="undefined">var n = nodes[0];</span></span><br><span class="line"><span class="undefined">if(n)&#123;</span></span><br><span class="line"><span class="undefined">zTree.moveNode(n.getParentNode(),n,"next");</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">/*降一级*/</span></span><br><span class="line"><span class="undefined">function dLevel()&#123;</span></span><br><span class="line"><span class="undefined">var zTree = $.fn.zTree.getZTreeObj("treeDemo");</span></span><br><span class="line"><span class="undefined">hideRMenu();</span></span><br><span class="line"><span class="undefined">var nodes = zTree.getSelectedNodes();</span></span><br><span class="line"><span class="undefined">var n = nodes[0];</span></span><br><span class="line"><span class="undefined">if(n)&#123;</span></span><br><span class="line"><span class="undefined">/*默认往下一个节点降*/</span></span><br><span class="line"><span class="undefined">/*zTree.moveNode(n.getNextNode(),n,"inner");*/</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"treeDemo"</span> <span class="attr">style</span>=<span class="string">"background-color: #7EC4CC;"</span> <span class="attr">class</span>=<span class="string">"ztree"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"getCheckedNodes"</span>&gt;</span>获取选中的节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"addNode"</span>&gt;</span>添加节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"checkAll"</span>&gt;</span>全选所有节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"checkAllNo"</span>&gt;</span>反选所有节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--自定义的右键弹出面板--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"rMenu"</span> <span class="attr">style</span>=<span class="string">"z-index:100;position: absolute;background-color: white;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"rMenuUl"</span><span class="attr">onselectstart</span>=<span class="string">"return false;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"m_add"</span> <span class="attr">onclick</span>=<span class="string">"addTreeNode()"</span>&gt;</span>新增节点<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"m_del"</span> <span class="attr">onclick</span>=<span class="string">"removeTreeNode()"</span>&gt;</span>删除节点<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"m_edit"</span> <span class="attr">onclick</span>=<span class="string">"editTreeNode()"</span> <span class="attr">style</span>=<span class="string">"border-bottom:1px solid #cecece"</span>&gt;</span>编辑节点<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"m_up"</span> <span class="attr">onclick</span>=<span class="string">"m_up()"</span>&gt;</span>上移<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"m_down"</span> <span class="attr">onclick</span>=<span class="string">"m_down()"</span> <span class="attr">style</span>=<span class="string">"border-bottom:1px solid #cecece"</span>&gt;</span>下移<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"m_reset"</span> <span class="attr">onclick</span>=<span class="string">"resetTree()"</span>&gt;</span>重置节点<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"m_ulevel"</span> <span class="attr">onclick</span>=<span class="string">"uLevel()"</span>&gt;</span>升一级<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"m_dlevel"</span> <span class="attr">onclick</span>=<span class="string">"dLevel()"</span>&gt;</span>降一级<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><hr><p><a href="http://github.ifdream.xin/demo/zTree/zTreeDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/zTree/zTreeDemo.html</a></p><hr><h2 id="资源文件链接"><a href="#资源文件链接" class="headerlink" title="资源文件链接"></a>资源文件链接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/css/zTree/demo.css</span><br><span class="line">http://github.ifdream.xin/css/zTree/zTreeStyle.css</span><br><span class="line">http://github.ifdream.xin/css/zTree/img.zip</span><br><span class="line">http://github.ifdream.xin/js/jquery.min.js</span><br><span class="line">http://github.ifdream.xin/js/zTree/jquery.ztree.all.min.js</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>zTree插件的功能很强大，官方API也很详细，博主才只是略学了一二，读者应该学不止于此，可以上官方API上看看，再进一步学学，也可以在下面留言，和博主探讨，本文若有不足希望大家能够指出，一起学习，一起进步，谢谢！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;jQuery的插件特别多，前几天博主盯上了zTree，这个有名的jquery树插件，然后通过网上一些别人的资料，以及官方的API，将zTre
      
    
    </summary>
    
      <category term="JQuery插件" scheme="http://github.ymlsfly.xin/categories/JQuery%E6%8F%92%E4%BB%B6/"/>
    
    
      <category term="zTree" scheme="http://github.ymlsfly.xin/tags/zTree/"/>
    
  </entry>
  
  <entry>
    <title>高亮代码的集结</title>
    <link href="http://github.ymlsfly.xin/2018/01/29/%E9%AB%98%E4%BA%AE%E4%BB%A3%E7%A0%81%E7%9A%84%E9%9B%86%E7%BB%93/"/>
    <id>http://github.ymlsfly.xin/2018/01/29/高亮代码的集结/</id>
    <published>2018-01-29T03:23:34.000Z</published>
    <updated>2018-01-29T05:58:33.736Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前因为有需要，就对代码高亮这块儿特别关注了下，然后发现插件有很多，花了一段时间功夫，对各个不同的代码高亮插件都过了一遍，现将其都总结了下。</p><h2 id="贴代码"><a href="#贴代码" class="headerlink" title="贴代码"></a>贴代码</h2><h3 id="highlight"><a href="#highlight" class="headerlink" title="highlight"></a>highlight</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>highlightDemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--样式可以自己选择，引用不同的样式文件即可--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/highlight/agate.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/highlight/highlight.pack.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">hljs.initHighlightingOnLoad();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段java代码<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span> <span class="attr">class</span>=<span class="string">"java"</span>&gt;</span></span><br><span class="line">public static void main(String []args)&#123;</span><br><span class="line">System.out.println("Hello World");</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段bash命令<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span> <span class="attr">class</span>=<span class="string">"bash"</span>&gt;</span></span><br><span class="line">cd /tmp</span><br><span class="line">pwd</span><br><span class="line">touch firstTemp</span><br><span class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="prettify"><a href="#prettify" class="headerlink" title="prettify"></a>prettify</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>prettifyDemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/prettify/prettify.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/prettify/desert.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.2.1.min.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/prettify/prettify.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"prettyPrint()"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段css代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">class</span>=<span class="string">"prettyprint"</span>&gt;</span></span><br><span class="line">*&#123;</span><br><span class="line">margin : 0 ;</span><br><span class="line">padding : 0 ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段java代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">class</span>=<span class="string">"prettyprint"</span>&gt;</span></span><br><span class="line">public static void main(String []args)&#123;</span><br><span class="line">System.out.println("Hello World");</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="prism"><a href="#prism" class="headerlink" title="prism"></a>prism</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>prismDemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/prism/prism.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/prism/prism-line-numbers.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.2.1.min.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/prism/prism.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/prism/prism-line-numbers.min.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">$(function()&#123;</span></span><br><span class="line"><span class="undefined">var code = "var data = 1;";</span></span><br><span class="line"><span class="undefined">var html = Prism.highlight(code, Prism.languages.javascript);</span></span><br><span class="line"><span class="undefined">$("#abc").html(html);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段css代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">class</span>=<span class="string">"line-numbers"</span>&gt;</span><span class="tag">&lt;<span class="name">code</span> <span class="attr">class</span>=<span class="string">"language-css"</span>&gt;</span>p &#123; color: red &#125;<span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段java代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">class</span>=<span class="string">"line-numbers"</span>&gt;</span><span class="tag">&lt;<span class="name">code</span> <span class="attr">class</span>=<span class="string">"language-java"</span>&gt;</span>public static void main(String []args)&#123;</span><br><span class="line">System.out.println("Hello World");</span><br><span class="line">&#125;<span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>动态添加的js代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"abc"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="rainbow"><a href="#rainbow" class="headerlink" title="rainbow"></a>rainbow</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>rainbowDemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/rainbow/kimbie-dark.css"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/rainbow/rainbow-custom.min.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段java代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span> <span class="attr">data-language</span>=<span class="string">"java"</span>&gt;</span></span><br><span class="line">public static void main(String []args)&#123;</span><br><span class="line">System.out.println("Hello World");</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段css代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span> <span class="attr">data-language</span>=<span class="string">"css"</span>&gt;</span></span><br><span class="line">*&#123;</span><br><span class="line">margin: 0 ;</span><br><span class="line">padding : 0 ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="SyntaxHighlighter"><a href="#SyntaxHighlighter" class="headerlink" title="SyntaxHighlighter"></a>SyntaxHighlighter</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>SyntaxHighlighterDemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/SyntaxHighlighter/shCore.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/SyntaxHighlighter/shThemeDefault.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/SyntaxHighlighter/shCore.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--需要哪个语言的就要导入哪个语言的js包shBrushXxx.js，且一定要放在核心包的下面--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/SyntaxHighlighter/shBrushJava.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/SyntaxHighlighter/shBrushCss.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">SyntaxHighlighter.all();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段java代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">class</span>=<span class="string">"brush:java"</span>&gt;</span></span><br><span class="line">public static void main(String []args)&#123;</span><br><span class="line">System.out.println("Hello World");</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段css代码块儿<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">class</span>=<span class="string">"brush:css"</span>&gt;</span></span><br><span class="line">*&#123;</span><br><span class="line">margin : 0 ;</span><br><span class="line">padding : 0 ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><h3 id="highlight-1"><a href="#highlight-1" class="headerlink" title="highlight"></a>highlight</h3><hr><p><a href="http://github.ifdream.xin/demo/highlight/highlightDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/highlight/highlightDemo.html</a></p><hr><h3 id="prettify-1"><a href="#prettify-1" class="headerlink" title="prettify"></a>prettify</h3><hr><p><a href="http://github.ifdream.xin/demo/prettify/prettifyDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/prettify/prettifyDemo.html</a></p><hr><h3 id="prism-1"><a href="#prism-1" class="headerlink" title="prism"></a>prism</h3><hr><p><a href="http://github.ifdream.xin/demo/prism/prismDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/prism/prismDemo.html</a></p><hr><h3 id="rainbow-1"><a href="#rainbow-1" class="headerlink" title="rainbow"></a>rainbow</h3><hr><p><a href="http://github.ifdream.xin/demo/rainbow/rainbowDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/rainbow/rainbowDemo.html</a></p><hr><h3 id="SyntaxHighlighter-1"><a href="#SyntaxHighlighter-1" class="headerlink" title="SyntaxHighlighter"></a>SyntaxHighlighter</h3><hr><p><a href="http://github.ifdream.xin/demo/SyntaxHighlighter/SyntaxHighlighterDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/SyntaxHighlighter/SyntaxHighlighterDemo.html</a></p><hr><h2 id="资源文件链接"><a href="#资源文件链接" class="headerlink" title="资源文件链接"></a>资源文件链接</h2><h3 id="highlight-2"><a href="#highlight-2" class="headerlink" title="highlight"></a>highlight</h3><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/css/highlight/default.css</span><br><span class="line">http://github.ifdream.xin/css/highlight/androidstudio.css</span><br><span class="line">http://github.ifdream.xin/css/highlight/agate.css</span><br><span class="line">http://github.ifdream.xin/js/highlight/highlight.pack.js</span><br></pre></td></tr></table></figure><hr><h3 id="prettify-2"><a href="#prettify-2" class="headerlink" title="prettify"></a>prettify</h3><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/css/prettify/prettify.css</span><br><span class="line">http://github.ifdream.xin/css/prettify/sunburst.css</span><br><span class="line">http://github.ifdream.xin/css/prettify/sons-of-obsidian.css</span><br><span class="line">http://github.ifdream.xin/css/prettify/doxy.css</span><br><span class="line">http://github.ifdream.xin/css/prettify/desert.css</span><br><span class="line">http://github.ifdream.xin/js/jquery.min.js</span><br><span class="line">http://github.ifdream.xin/js/prettify/prettify.js</span><br><span class="line">http://github.ifdream.xin/js/prettify/run_prettify.js</span><br></pre></td></tr></table></figure><hr><h3 id="prism-2"><a href="#prism-2" class="headerlink" title="prism"></a>prism</h3><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/css/prism/prism.css</span><br><span class="line">http://github.ifdream.xin/css/prism/prism-line-numbers.css</span><br><span class="line">http://github.ifdream.xin/js/jquery.min.js</span><br><span class="line">http://github.ifdream.xin/js/prism/prism.js</span><br><span class="line">http://github.ifdream.xin/js/prism/prism-line-numbers.min.js</span><br></pre></td></tr></table></figure><hr><h3 id="rainbow-2"><a href="#rainbow-2" class="headerlink" title="rainbow"></a>rainbow</h3><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/css/rainbow/kimbie-light.css</span><br><span class="line">http://github.ifdream.xin/css/rainbow/kimbie-dark.css</span><br><span class="line">http://github.ifdream.xin/js/rainbow-custom.min.js</span><br></pre></td></tr></table></figure><hr><h3 id="SyntaxHighlighter-2"><a href="#SyntaxHighlighter-2" class="headerlink" title="SyntaxHighlighter"></a>SyntaxHighlighter</h3><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/css/SyntaxHighlighter/css.zip</span><br><span class="line">http://github.ifdream.xin/js/shCore.js</span><br><span class="line">http://github.ifdream.xin/js/shBrushXml.js</span><br><span class="line">http://github.ifdream.xin/js/shBrushJava.js</span><br><span class="line">http://github.ifdream.xin/js/shBrushCss.js</span><br></pre></td></tr></table></figure><hr><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>以上纯属博主自己整理总结，若有纰漏或有错误，欢迎读者留言指出，本博客将定址更新！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;之前因为有需要，就对代码高亮这块儿特别关注了下，然后发现插件有很多，花了一段时间功夫，对各个不同的代码高亮插件都过了一遍，现将其都总结了下。
      
    
    </summary>
    
      <category term="代码高亮" scheme="http://github.ymlsfly.xin/categories/%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE/"/>
    
    
      <category term="highCode" scheme="http://github.ymlsfly.xin/tags/highCode/"/>
    
  </entry>
  
  <entry>
    <title>富文本simditor</title>
    <link href="http://github.ymlsfly.xin/2018/01/29/%E5%AF%8C%E6%96%87%E6%9C%ACsimditor/"/>
    <id>http://github.ymlsfly.xin/2018/01/29/富文本simditor/</id>
    <published>2018-01-29T03:00:22.000Z</published>
    <updated>2018-01-29T03:19:03.342Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>今天博主再添加一个新的富文本编辑器的学习，同样也是一个轻便的插件，简约、高效的simditor。</p><h2 id="贴代码"><a href="#贴代码" class="headerlink" title="贴代码"></a>贴代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>simditorDemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/app.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/mobile.css"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/simditor.css"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/module.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/hotkeys.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/uploader.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/simditor.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">$(function() &#123;</span></span><br><span class="line"><span class="undefined">var editor = new Simditor(&#123;</span></span><br><span class="line"><span class="undefined">textarea: $('#editor'),</span></span><br><span class="line"><span class="undefined">/*（默认值：''）编辑器的 placeholder，如果为空 Simditor 会取 textarea 的 placeholder 属性；*/</span></span><br><span class="line"><span class="undefined">placeholder: "请在这里输入内容：",</span></span><br><span class="line"><span class="undefined">/*（默认值：true）是否显示工具栏按钮；*/</span></span><br><span class="line"><span class="undefined">toolbar: [</span></span><br><span class="line"><span class="undefined">'title',</span></span><br><span class="line"><span class="undefined">'bold',</span></span><br><span class="line"><span class="undefined">'italic',</span></span><br><span class="line"><span class="undefined">'underline',</span></span><br><span class="line"><span class="undefined">'strikethrough',</span></span><br><span class="line"><span class="undefined">'fontScale',</span></span><br><span class="line"><span class="undefined">'color',</span></span><br><span class="line"><span class="undefined">'ol',</span></span><br><span class="line"><span class="undefined">'ul',</span></span><br><span class="line"><span class="undefined">'blockquote',</span></span><br><span class="line"><span class="undefined">'code',</span></span><br><span class="line"><span class="undefined">'table',</span></span><br><span class="line"><span class="undefined">'link',</span></span><br><span class="line"><span class="undefined">'image',</span></span><br><span class="line"><span class="undefined">'hr',</span></span><br><span class="line"><span class="undefined">'indent',</span></span><br><span class="line"><span class="undefined">'outdent',</span></span><br><span class="line"><span class="undefined">'alignment'</span></span><br><span class="line"><span class="undefined">],</span></span><br><span class="line"><span class="undefined">/*（默认值：true）是否让工具栏按钮在页面滚动的过程中始终可见；*/</span></span><br><span class="line"><span class="undefined">toolbarFloat: true,</span></span><br><span class="line"><span class="undefined">/*（默认值：false）是否隐藏工具栏，隐藏后 toolbarFloat 会失效；*/</span></span><br><span class="line"><span class="undefined">toolbarHidden: false,</span></span><br><span class="line"><span class="undefined">/*（默认值：'images/image.png'）编辑器插入混排图片时使用的默认图片；*/</span></span><br><span class="line"><span class="undefined">defaultImage: 'images/image.png',</span></span><br><span class="line"><span class="undefined">/*（默认值：true）是否在编辑器中使用 tab 键来缩进；*/</span></span><br><span class="line"><span class="undefined">tabIndent: true,</span></span><br><span class="line"><span class="undefined">/*（默认值：&#123;&#125;）键值对，在编辑器中增加 hidden 字段（input:hidden），通常用于生成 form 表单的默认参数；*/</span></span><br><span class="line"><span class="undefined">params: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">/*（默认值：false）false 或者键值对，编辑器上传本地图片的配置，常用的属性有 url 和 params；*/</span></span><br><span class="line"><span class="undefined">upload: &#123;</span></span><br><span class="line"><span class="undefined">url: '',</span></span><br><span class="line"><span class="undefined">params: null,</span></span><br><span class="line"><span class="undefined">fileKey: 'upload_file',</span></span><br><span class="line"><span class="undefined">connectionCount: 3,</span></span><br><span class="line"><span class="undefined">leaveConfirm: '上传操作正在进行，您真的要离开本页面？'</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">/*（默认值：false）是否允许粘贴上传图片，依赖 upload 选项，仅支持 Firefox 和 Chrome 浏览器。*/</span></span><br><span class="line"><span class="undefined">pasteImage: true</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width: 900px; height: 300px; "</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"editor"</span> <span class="attr">placeholder</span>=<span class="string">"Balabala"</span> <span class="attr">autofocus</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><hr><p><a href="http://github.ifdream.xin/demo/simditor/simditorDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/simditor/simditorDemo.html</a></p><hr><h2 id="资源文件链接"><a href="#资源文件链接" class="headerlink" title="资源文件链接"></a>资源文件链接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/css/simditor/app.css</span><br><span class="line">http://github.ifdream.xin/css/simditor/mobile.css</span><br><span class="line">http://github.ifdream.xin/css/simditor/simditor.css</span><br><span class="line">http://github.ifdream.xin/js/jquery.min.js</span><br><span class="line">http://github.ifdream.xin/js/simditor/hotkeys.js</span><br><span class="line">http://github.ifdream.xin/js/simditor/module.js</span><br><span class="line">http://github.ifdream.xin/js/simditor/simditor.js</span><br><span class="line">http://github.ifdream.xin/js/simditor/uploader.js</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;今天博主再添加一个新的富文本编辑器的学习，同样也是一个轻便的插件，简约、高效的simditor。&lt;/p&gt;
&lt;h2 id=&quot;贴代码&quot;&gt;&lt;a h
      
    
    </summary>
    
      <category term="富文本编辑器" scheme="http://github.ymlsfly.xin/categories/%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    
    
      <category term="富文本" scheme="http://github.ymlsfly.xin/tags/%E5%AF%8C%E6%96%87%E6%9C%AC/"/>
    
      <category term="simditor" scheme="http://github.ymlsfly.xin/tags/simditor/"/>
    
  </entry>
  
  <entry>
    <title>linux上的tomcat</title>
    <link href="http://github.ymlsfly.xin/2018/01/20/linux%E4%B8%8A%E7%9A%84tomcat/"/>
    <id>http://github.ymlsfly.xin/2018/01/20/linux上的tomcat/</id>
    <published>2018-01-20T05:28:17.000Z</published>
    <updated>2018-02-01T03:05:47.653Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>大家都知道我们在本地机器上安装配置tomcat，可能只是为了开发测试，而真正的用tomcat，是在服务器上，从安全性考虑，服务器一般都是linux，所以我们就要会在linux服务器上安装配置tomcat。</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>这里有个前提条件，就是服务器已经配置了jdk，且环境变量也配置无误，没有安装配置jdk的可以参考博主前面的一篇在linux上配置jdk的文章。这里和安装jdk一样，博主还是将tomcat解压到/software/目录下。</p><h2 id="开放端口"><a href="#开放端口" class="headerlink" title="开放端口"></a>开放端口</h2><p>针对如果开启了防火墙的服务器，需要打开tomcat的监听端口,让外部能访问tomcat，这里仍是使用tomcat的默认监听端口8080.</p><ol><li><p>if firewall</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line">service firewalld restart</span><br></pre></td></tr></table></figure></li><li><p>if iptables</p></li></ol><ul><li><p>方法一</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables -I INPUT -p tcp --dport 8080 -j ACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br></pre></td></tr></table></figure></li><li><p>方法二</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/iptables -A INPUT -p tcp -m tcp --dport 8080 -j ACCEPT</span><br><span class="line">service iptables restart</span><br></pre></td></tr></table></figure></li></ul><h2 id="启动、重启和关闭"><a href="#启动、重启和关闭" class="headerlink" title="启动、重启和关闭"></a>启动、重启和关闭</h2><p>tomcat的启动、重启和关闭其实就是执行tomcat/bin/下的startup.sh、restartup.sh和shutdown.sh文件。</p><p>进入到/software/tomcat/bin目录：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./startup.sh</span><br><span class="line">./restartup.sh</span><br><span class="line">./shutdown.sh</span><br></pre></td></tr></table></figure></p><h2 id="修改web登录账号"><a href="#修改web登录账号" class="headerlink" title="修改web登录账号"></a>修改web登录账号</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /software/tomcat/conf/tomcat-users.xml</span><br></pre></td></tr></table></figure><p>加上：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"manager"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"manager-gui"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"manager-script"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"manager-jmx"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"manager-status"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"admin"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"admin-gui"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">username</span>=<span class="string">"root"</span> <span class="attr">password</span>=<span class="string">"root"</span> <span class="attr">roles</span>=<span class="string">"admin-gui,admin,manager-gui,manager-script,manager-jmx,manager-status,manager"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Tomcat的目录结构</span><br><span class="line">   ·bin     //存放Tomcat的命令脚本文件</span><br><span class="line">   ·conf    //存放Tomcat服务器的各种配置文件,最主要是server.xml</span><br><span class="line">   ·lib     //存放Tomcat服务器支撑jar包</span><br><span class="line">   ·logs    //存放日志文件</span><br><span class="line">   ·temp    //存放临时文件</span><br><span class="line">   ·webapps //web应用所在目录，外界访问web资源的存放目录</span><br><span class="line">   ·work    //Tomcat的工作目录</span><br><span class="line">web应用的目录结构</span><br><span class="line">   webapp                           -- web应用所在目录</span><br><span class="line">     |--- html, jsp, css, js文件等  -- 这些文件一般在web应用根目录下，根目录下的文件外界可以直接访问.</span><br><span class="line">     |--- WEB-INF 目录              -- java类、jar包、web配置文件,存在这个目录下，外界无法直接访问，由web服务器负责调用.</span><br><span class="line">           |--- classes 目录        -- java类</span><br><span class="line">           |--- lib 目录            -- java类运行所需要的jar包</span><br><span class="line">           |--- web.xml 文件        -- web应用的配置文件</span><br></pre></td></tr></table></figure><h2 id="tomcat8-5的问题"><a href="#tomcat8-5的问题" class="headerlink" title="tomcat8.5的问题"></a>tomcat8.5的问题</h2><p>如果你安装的是tomcat8.5，你在进入web页面的manager时，会发现报错进不去：<br>注意：此时上面修改web登录账号的步骤也需要执行（如果web登录账号没修改）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">You are not authorized to view this page.</span><br><span class="line">By default the Host Manager is only accessible from a browser running on the same machine as Tomcat. If you wish to modify this restriction, you&apos;ll need to edit the Host Manager&apos;s context.xml file...</span><br></pre></td></tr></table></figure></p><p>这个问题在tomcat的官网上也有说明，解决方法如下：<br>在tomcat/conf/Catalina/localhost/下新建一个文件manager.xml，写入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim tomcat/conf/Catalina/localhost/manager.xml</span><br></pre></td></tr></table></figure></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">privileged</span>=<span class="string">"true"</span> <span class="attr">antiResourceLocking</span>=<span class="string">"false"</span>   </span></span><br><span class="line"><span class="tag">         <span class="attr">docBase</span>=<span class="string">"$&#123;catalina.home&#125;/webapps/manager"</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.valves.RemoteAddrValve"</span> <span class="attr">allow</span>=<span class="string">"^.*$"</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br></pre></td></tr></table></figure><p>tomcat8.5的host manager进不去，报403错误，解决方法如下：<br>修改tomcat/webapps/host-manager/META-INF/context.xml文件（使之允许所有IP）：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim tomcat/webapps/host-manager/META-INF/context.xml</span><br></pre></td></tr></table></figure></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">antiResourceLocking</span>=<span class="string">"false"</span> <span class="attr">privileged</span>=<span class="string">"true"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.valves.RemoteAddrValve"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">allow</span>=<span class="string">"^.*$"</span> /&gt;</span> #修改这里</span><br><span class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip:8080</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>如果你有想要安装启动多个tomcat，则可以通过修改其监听端口的方法，注意要在防火墙开放监听的端口，还可以通过docker的方法来实现在服务器上启动多个tomcat，这些大家可以参考博主前面的【拥有并启动多个tomcat】和【Docker梦工厂】。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;大家都知道我们在本地机器上安装配置tomcat，可能只是为了开发测试，而真正的用tomcat，是在服务器上，从安全性考虑，服务器一般都是li
      
    
    </summary>
    
      <category term="软件安装" scheme="http://github.ymlsfly.xin/categories/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="linux" scheme="http://github.ymlsfly.xin/tags/linux/"/>
    
      <category term="tomcat" scheme="http://github.ymlsfly.xin/tags/tomcat/"/>
    
  </entry>
  
  <entry>
    <title>linux配置jdk</title>
    <link href="http://github.ymlsfly.xin/2018/01/20/linux%E9%85%8D%E7%BD%AEjdk/"/>
    <id>http://github.ymlsfly.xin/2018/01/20/linux配置jdk/</id>
    <published>2018-01-20T05:27:40.000Z</published>
    <updated>2018-01-29T11:20:46.853Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>windows图形化界面，在它上面安装配置软件，一般都下一步下一步就完成了，安装jdk也如此，只是配置环境变量需要在：这台电脑-&gt;属性-&gt;高级系统设置-&gt;环境变量中配置JAVA_HOME和PATH即可。linux命令行界面，让很多人有点小怕，不会配置jdk，其实也并不难，简单几步，跟着博主配置的步骤走，即可完成。</p><h2 id="步骤开始"><a href="#步骤开始" class="headerlink" title="步骤开始"></a>步骤开始</h2><h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h3><p>在windows上下载好需要安装的jdk压缩包，通过远程工具传到服务器上，或直接复制下载链接，在服务器上通过wget命令下载。</p><p>这里博主下载的jdk-8u144-linux-x64.tar.gz<br>并将其放在/software/文件夹下</p><h3 id="开始配置"><a href="#开始配置" class="headerlink" title="开始配置"></a>开始配置</h3><p>先执行解压命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /software</span><br><span class="line">tar -xzvf jdk-8u144-linux-x64.tar.gz</span><br></pre></td></tr></table></figure></p><h3 id="环境变量（临时性，及时生效）"><a href="#环境变量（临时性，及时生效）" class="headerlink" title="环境变量（临时性，及时生效）"></a>环境变量（临时性，及时生效）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/software/jdk1.8.0_144</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>此处要注意JAVA_HOME的路径，一定是jdk解压包的绝对路径，和windows一样。</p><h3 id="环境变量（永久生效，但不及时生效）"><a href="#环境变量（永久生效，但不及时生效）" class="headerlink" title="环境变量（永久生效，但不及时生效）"></a>环境变量（永久生效，但不及时生效）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#把环境变量配置（上面三句话）到profile文件里，放到done后面</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="comment">#可以执行下面这句命令使该文件立即生效</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="检测"><a href="#检测" class="headerlink" title="检测"></a>检测</h3><p>到此，你的服务器上的jdk就配置好了，可以试一下命令【java -version】，服务器会显示出当前环境变量中的java版本。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;windows图形化界面，在它上面安装配置软件，一般都下一步下一步就完成了，安装jdk也如此，只是配置环境变量需要在：这台电脑-&amp;gt;属性
      
    
    </summary>
    
      <category term="软件安装" scheme="http://github.ymlsfly.xin/categories/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="linux" scheme="http://github.ymlsfly.xin/tags/linux/"/>
    
      <category term="jdk" scheme="http://github.ymlsfly.xin/tags/jdk/"/>
    
  </entry>
  
  <entry>
    <title>Java设计模式之单例模式</title>
    <link href="http://github.ymlsfly.xin/2018/01/20/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
    <id>http://github.ymlsfly.xin/2018/01/20/Java设计模式之单例模式/</id>
    <published>2018-01-20T05:10:30.000Z</published>
    <updated>2018-01-20T05:24:13.355Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>java设计模式颇多，这里先奉上博主最开始接触学习的一个设计模式，也是其中比较简单的一个设计模式—单例模式。</p><h2 id="贴代码"><a href="#贴代码" class="headerlink" title="贴代码"></a>贴代码</h2><ol><li>饿汉式</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Oneoo1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Oneoo1</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Oneoo1 instance=<span class="keyword">new</span> Oneoo1();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Oneoo1 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>懒汉式（饱汉式）</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Oneoo2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Oneoo2</span><span class="params">()</span> </span>&#123;  &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Oneoo2 instance;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Oneoo2 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance==<span class="keyword">null</span>) &#123;</span><br><span class="line">            instance=<span class="keyword">new</span> Oneoo2();</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>单例模式特点是内存中存在的始终是同一个对象，饿汉式是子类加载时创建实例对象，懒汉式是在调用时创建。单例模式在jdk底层用得也是蛮多的，在诸多设计模式中相比较简单，容易理解，作为学习设计模式的第一块台阶最好不过了！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;java设计模式颇多，这里先奉上博主最开始接触学习的一个设计模式，也是其中比较简单的一个设计模式—单例模式。&lt;/p&gt;
&lt;h2 id=&quot;贴代码
      
    
    </summary>
    
      <category term="Java设计模式" scheme="http://github.ymlsfly.xin/categories/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="java" scheme="http://github.ymlsfly.xin/tags/java/"/>
    
      <category term="单例" scheme="http://github.ymlsfly.xin/tags/%E5%8D%95%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>富文本wangEditor</title>
    <link href="http://github.ymlsfly.xin/2018/01/19/%E5%AF%8C%E6%96%87%E6%9C%ACwangEditor/"/>
    <id>http://github.ymlsfly.xin/2018/01/19/富文本wangEditor/</id>
    <published>2018-01-19T15:49:08.000Z</published>
    <updated>2018-01-26T01:08:07.700Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>wangEditor</p></blockquote><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前面博主已经介绍了富文本编辑器wangEditor，今天就来推荐一款也比较简单的富文本编辑器wangEditor，hhh！</p><h2 id="贴代码"><a href="#贴代码" class="headerlink" title="贴代码"></a>贴代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">title</span>&gt;</span>wandEditor<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/wangEditor.min.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">                  .editor2_toolbarClass&#123;</span></span><br><span class="line"><span class="undefined">                        /*这里用id取不出元素，需要额外加class*/</span></span><br><span class="line"><span class="undefined">                        width: 800px;</span></span><br><span class="line"><span class="undefined">                        border: 1px dashed red;</span></span><br><span class="line"><span class="undefined">                        margin-top: 10px;</span></span><br><span class="line"><span class="undefined">                  &#125;</span></span><br><span class="line"><span class="undefined">                  #editor2_text&#123;</span></span><br><span class="line"><span class="undefined">                        margin-top: 10px;</span></span><br><span class="line"><span class="undefined">                        width: 300px;</span></span><br><span class="line"><span class="undefined">                        height: 200px;</span></span><br><span class="line"><span class="undefined">                        border: 2px solid #678;</span></span><br><span class="line"><span class="undefined">                  &#125;</span></span><br><span class="line"><span class="undefined">            </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">                  $(function()&#123;</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        //window.wangEditor可以共用一个，此处为了方便看，才new了多个</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        //普通地创建一个富文本编辑器</span></span><br><span class="line"><span class="undefined">                        var E1 = window.wangEditor;</span></span><br><span class="line"><span class="undefined">                        var editor1 = new E1("#editor1");</span></span><br><span class="line"><span class="undefined">                    var $textarea1 = $('#textarea1');</span></span><br><span class="line"><span class="undefined">                    editor1.customConfig.onchange = function (html) &#123;</span></span><br><span class="line"><span class="undefined">                        // 监控变化，同步更新到 textarea</span></span><br><span class="line"><span class="undefined">                        $textarea1.val(html)</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    // 关闭粘贴样式的过滤</span></span><br><span class="line"><span class="undefined">                      editor1.customConfig.pasteFilterStyle = false;</span></span><br><span class="line"><span class="undefined">                      // 自定义处理粘贴的文本内容</span></span><br><span class="line"><span class="undefined">                      editor1.customConfig.pasteTextHandle = function (content) &#123;</span></span><br><span class="line"><span class="undefined">                          // content 即粘贴过来的内容（html 或 纯文本），可进行自定义处理然后返回</span></span><br><span class="line"><span class="undefined">                          return content + '内容在粘贴内容后面追加';</span></span><br><span class="line"><span class="undefined">                      &#125;</span></span><br><span class="line"><span class="undefined">                      //插入网络图片的回调</span></span><br><span class="line"><span class="undefined">                      editor1.customConfig.linkImgCallback = function (url) &#123;</span></span><br><span class="line"><span class="undefined">                            console.log(url) // url 即插入图片的地址</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                      //插入链接的校验</span></span><br><span class="line"><span class="undefined">                      editor1.customConfig.linkCheck = function (text, link) &#123;</span></span><br><span class="line"><span class="undefined">                            console.log(text) // 插入的文字</span></span><br><span class="line"><span class="undefined">                            console.log(link) // 插入的链接</span></span><br><span class="line"><span class="undefined">                            return true // 返回 true 表示校验成功</span></span><br><span class="line"><span class="undefined">                            // return '验证失败' // 返回字符串，即校验失败的提示信息</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                      //插入网络图片的校验</span></span><br><span class="line"><span class="undefined">                      editor1.customConfig.linkImgCheck = function (src) &#123;</span></span><br><span class="line"><span class="undefined">                            console.log(src) // 图片的链接</span></span><br><span class="line"><span class="undefined">                            return true // 返回 true 表示校验成功</span></span><br><span class="line"><span class="undefined">                            // return '验证失败' // 返回字符串，即校验失败的提示信息</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                      // 自定义菜单配置</span></span><br><span class="line"><span class="undefined">                      editor1.customConfig.menus = [</span></span><br><span class="line"><span class="undefined">                            'head',  // 标题</span></span><br><span class="line"><span class="undefined">                            'bold',  // 粗体</span></span><br><span class="line"><span class="undefined">                            'italic',  // 斜体</span></span><br><span class="line"><span class="undefined">                            'underline',  // 下划线</span></span><br><span class="line"><span class="undefined">                            'strikeThrough',  // 删除线</span></span><br><span class="line"><span class="undefined">                            'foreColor',  // 文字颜色</span></span><br><span class="line"><span class="undefined">                            'backColor',  // 背景颜色</span></span><br><span class="line"><span class="undefined">                            'link',  // 插入链接</span></span><br><span class="line"><span class="undefined">                            'list',  // 列表</span></span><br><span class="line"><span class="undefined">                            'justify',  // 对齐方式</span></span><br><span class="line"><span class="undefined">                            'quote',  // 引用</span></span><br><span class="line"><span class="undefined">                            'emoticon',  // 表情</span></span><br><span class="line"><span class="undefined">                            'image',  // 插入图片</span></span><br><span class="line"><span class="undefined">                            'table',  // 表格</span></span><br><span class="line"><span class="undefined">                            'video',  // 插入视频</span></span><br><span class="line"><span class="undefined">                            'code',  // 插入代码</span></span><br><span class="line"><span class="undefined">                            'undo',  // 撤销</span></span><br><span class="line"><span class="undefined">                            'redo'  // 重复</span></span><br><span class="line"><span class="undefined">                        ];</span></span><br><span class="line"><span class="undefined">                        // 自定义配置颜色（字体颜色、背景色）</span></span><br><span class="line"><span class="undefined">                      editor1.customConfig.colors = [</span></span><br><span class="line"><span class="undefined">                          '#000000',</span></span><br><span class="line"><span class="undefined">                          '#eeece0',</span></span><br><span class="line"><span class="undefined">                          '#1c487f',</span></span><br><span class="line"><span class="undefined">                          '#4d80bf',</span></span><br><span class="line"><span class="undefined">                          '#c24f4a',</span></span><br><span class="line"><span class="undefined">                          '#8baa4a',</span></span><br><span class="line"><span class="undefined">                          '#7b5ba1',</span></span><br><span class="line"><span class="undefined">                          '#46acc8',</span></span><br><span class="line"><span class="undefined">                          '#f9963b',</span></span><br><span class="line"><span class="undefined">                          '#ffffff'</span></span><br><span class="line"><span class="undefined">                      ];</span></span><br><span class="line"><span class="undefined">                        editor1.create();</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        //注意此功能不能动态改变</span></span><br><span class="line"><span class="undefined">                        // 禁用编辑功能</span></span><br><span class="line"><span class="undefined">                        editor1.$textElem.attr('contenteditable', false);</span></span><br><span class="line"><span class="undefined">                        // 开启编辑功能</span></span><br><span class="line"><span class="undefined">                        editor1.$textElem.attr('contenteditable', true);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        var E2 = window.wangEditor;</span></span><br><span class="line"><span class="undefined">                        // 两个参数也可以传入 elem 对象，class 选择器</span></span><br><span class="line"><span class="undefined">                        var editor2 = new E2("#editor2_toolbar" , "#editor2_text");</span></span><br><span class="line"><span class="undefined">                        editor2.create();</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        $("#htmlEditor1").click(function()&#123;</span></span><br><span class="line"><span class="undefined">                              //直接覆盖掉编辑器里的内容</span></span><br><span class="line"><span class="undefined">                              editor1.txt.html("内容已被格式化...");</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="undefined">                        $("#appendEditor1").click(function()&#123;</span></span><br><span class="line"><span class="undefined">                              //增加的内容必须是标签式的，仅被解析标签</span></span><br><span class="line"><span class="xml">                              editor1.txt.append("<span class="tag">&lt;<span class="name">p</span>&gt;</span>增加的内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">'#'</span>&gt;</span>aa<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">'#'</span>&gt;</span>bb<span class="tag">&lt;/<span class="name">a</span>&gt;</span>");</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                        $("#getHtmlEditor1").click(function()&#123;</span></span><br><span class="line"><span class="undefined">                              alert("获取Editor1的html：" + editor1.txt.html());</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="undefined">                        $("#getTextEditor1").click(function()&#123;</span></span><br><span class="line"><span class="undefined">                              alert("获取Editor1的text：" + editor1.txt.text());</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="undefined">                        </span></span><br><span class="line"><span class="undefined">                  &#125;);</span></span><br><span class="line"><span class="undefined">            </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"editor1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"htmlEditor1"</span>&gt;</span>动态给Editor1格式化内容<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"appendEditor1"</span>&gt;</span>动态给Editor1增加内容<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"getHtmlEditor1"</span>&gt;</span>获取Editor1的html<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"getTextEditor1"</span>&gt;</span>获取Editor1的text<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"editor2_toolbar"</span> <span class="attr">class</span>=<span class="string">"editor2_toolbarClass"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"editor2_text"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"textarea1"</span> <span class="attr">style</span>=<span class="string">"width:100%; height:200px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">      <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><hr><p><a href="http://github.ifdream.xin/demo/wangEditor/wangEditorDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/wangEditor/wangEditorDemo.html</a></p><hr><h2 id="资源文件链接"><a href="#资源文件链接" class="headerlink" title="资源文件链接"></a>资源文件链接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/js/jquery.min.js</span><br><span class="line">http://github.ifdream.xin/js/wangEditor/wangEditor.min.js</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;wangEditor&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;
      
    
    </summary>
    
      <category term="富文本编辑器" scheme="http://github.ymlsfly.xin/categories/%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    
    
      <category term="富文本" scheme="http://github.ymlsfly.xin/tags/%E5%AF%8C%E6%96%87%E6%9C%AC/"/>
    
      <category term="wangEditor" scheme="http://github.ymlsfly.xin/tags/wangEditor/"/>
    
  </entry>
  
  <entry>
    <title>富文本summernote</title>
    <link href="http://github.ymlsfly.xin/2018/01/19/%E5%AF%8C%E6%96%87%E6%9C%ACsummernote/"/>
    <id>http://github.ymlsfly.xin/2018/01/19/富文本summernote/</id>
    <published>2018-01-19T04:49:57.000Z</published>
    <updated>2018-01-26T01:07:54.810Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Summernote</p></blockquote><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>爱各种知识的博主对富文本挺感兴趣的，就对富文本编辑器都看了下，学习了下，不咋样，可以用吧，hhh，现将学习的第一个富文本编辑器summernote献上！</p><h2 id="贴代码"><a href="#贴代码" class="headerlink" title="贴代码"></a>贴代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">title</span>&gt;</span>Summernote<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--引入需要的css文件--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap.css"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/summernote.css"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--引入需要的js文件--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/bootstrap.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/summernote.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lang/summernote-zh-CN.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--预备富文本1--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"summernote"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--预备富文本2--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"reply"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--各种点击事件的按钮--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"save"</span>&gt;</span>获取<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"addContent"</span>&gt;</span>添加内容/编辑<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"showRichtext"</span>&gt;</span>点击显示富文本框<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"dialog_fide"</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--预备被动态显示内容的块儿--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">                  /***对富文本中的内容提取过滤并操作 */</span></span><br><span class="line"><span class="undefined">                  $("#reply").summernote(&#123;</span></span><br><span class="line"><span class="undefined">                        width : 500 ,  //宽度</span></span><br><span class="line"><span class="undefined">                        height: 100,  //高度</span></span><br><span class="line"><span class="undefined">                        toolbar: false,  //工具栏不显示</span></span><br><span class="line"><span class="undefined">                        placeholder: '可以@人...' , //无内容输入时显示的文本</span></span><br><span class="line"><span class="undefined">                        minHeight : 100 ,  //可拉伸最小高度</span></span><br><span class="line"><span class="undefined">                        maxHeight : 100,  //可拉伸最大高度</span></span><br><span class="line"><span class="undefined">                        hint: &#123;  //输入内容时的监听</span></span><br><span class="line"><span class="undefined">                              mentions: ['jayden', 'sam', 'alvin', 'david'],  //验证的词库</span></span><br><span class="line"><span class="undefined">                              match: /\B@(\w*)$/,  //匹配的目标</span></span><br><span class="line"><span class="undefined">                              search: function(keyword, callback) &#123; //目标被匹配到了时的回调</span></span><br><span class="line"><span class="undefined">                                    callback($.grep(this.mentions, function(item) &#123;</span></span><br><span class="line"><span class="undefined">                                          return item.indexOf(keyword) == 0;</span></span><br><span class="line"><span class="undefined">                                    &#125;));</span></span><br><span class="line"><span class="undefined">                              &#125;,</span></span><br><span class="line"><span class="undefined">                              content: function(item) &#123;  //返回的内容</span></span><br><span class="line"><span class="undefined">                                    return '@' + item;</span></span><br><span class="line"><span class="undefined">                              &#125;</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                  &#125;);</span></span><br><span class="line"><span class="undefined">                  /*** 得到富文本当中的内容*/</span></span><br><span class="line"><span class="undefined">                  $("#save").click(function() &#123;</span></span><br><span class="line"><span class="undefined">                        var markupStr = $('#summernote').summernote('code');</span></span><br><span class="line"><span class="undefined">                        alert("获取富文本中的内容：" + markupStr);</span></span><br><span class="line"><span class="undefined">                        /*在下方div=content当中显示输入的内容*/</span></span><br><span class="line"><span class="undefined">                        $("#content").html(markupStr);</span></span><br><span class="line"><span class="undefined">                  &#125;);</span></span><br><span class="line"><span class="undefined">                  /*** 向富文本当中添加内容 * */</span></span><br><span class="line"><span class="undefined">                  $("#addContent").click(function() &#123;</span></span><br><span class="line"><span class="undefined">                        var markupStr = '向富文本中添加内容';</span></span><br><span class="line"><span class="undefined">                        $('#summernote').summernote('code', markupStr);</span></span><br><span class="line"><span class="undefined">                  &#125;);</span></span><br><span class="line"><span class="undefined">                  /***点击显示富文本框，需要 将上面富文本初始化代码注释掉*/</span></span><br><span class="line"><span class="undefined">                  $("#showRichtext").click(function() &#123;</span></span><br><span class="line"><span class="undefined">                        $('#summernote').summernote(&#123;</span></span><br><span class="line"><span class="undefined">                              dialogsInBody: true ,</span></span><br><span class="line"><span class="undefined">                              minHeight : 100 ,</span></span><br><span class="line"><span class="undefined">                              maxHeight : 200,</span></span><br><span class="line"><span class="undefined">                              lang :'zh-CN' ,  //指定工具栏的语言包</span></span><br><span class="line"><span class="undefined">                              placeholder : 'placeholder'  //无输入时显示的内容</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="undefined">                  &#125;);</span></span><br><span class="line"><span class="undefined">                  /***点击显示富文本框，需要 将上面富文本初始化代码注释掉*/</span></span><br><span class="line"><span class="undefined">                  $("#dialog_fide").click(function() &#123;</span></span><br><span class="line"><span class="undefined">                        $('#summernote').summernote(&#123;</span></span><br><span class="line"><span class="undefined">                              dialogsFade: true // Add fade effect on dialogs</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="undefined">                        var markupStr = '初始化富文本就向文本中写入内容';</span></span><br><span class="line"><span class="undefined">                        $('#summernote').summernote('code', markupStr);</span></span><br><span class="line"><span class="undefined">                  &#125;);</span></span><br><span class="line"><span class="undefined">                   /***销毁指定的富文本*/</span></span><br><span class="line"><span class="undefined">                   $('#summernote').summernote('destroy');</span></span><br><span class="line"><span class="undefined">            </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><hr><p><a href="http://github.ifdream.xin/demo/summernote/summernoteDemo.html" target="_blank" rel="noopener">http://github.ifdream.xin/demo/summernote/summernoteDemo.html</a></p><hr><h2 id="资源文件链接"><a href="#资源文件链接" class="headerlink" title="资源文件链接"></a>资源文件链接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">http://github.ifdream.xin/css/bootstrap/bootstrap.css</span><br><span class="line">http://github.ifdream.xin/css/summernote/summernote.css</span><br><span class="line">http://github.ifdream.xin/js/jquery.min.js</span><br><span class="line">http://github.ifdream.xin/js/bootstrap/bootstrap.js</span><br><span class="line">http://github.ifdream.xin/js/summernote/summernote.js</span><br><span class="line">http://github.ifdream.xin/js/summernote/summernote-zh-CN.js</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Summernote&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;
      
    
    </summary>
    
      <category term="富文本编辑器" scheme="http://github.ymlsfly.xin/categories/%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    
    
      <category term="富文本" scheme="http://github.ymlsfly.xin/tags/%E5%AF%8C%E6%96%87%E6%9C%AC/"/>
    
      <category term="summernote" scheme="http://github.ymlsfly.xin/tags/summernote/"/>
    
  </entry>
  
  <entry>
    <title>剑指jdbc</title>
    <link href="http://github.ymlsfly.xin/2018/01/18/%E5%89%91%E6%8C%87jdbc/"/>
    <id>http://github.ymlsfly.xin/2018/01/18/剑指jdbc/</id>
    <published>2018-01-18T12:52:42.000Z</published>
    <updated>2018-01-18T13:31:37.692Z</updated>
    
    <content type="html"><![CDATA[<h3 id="各数据库的驱动及url"><a href="#各数据库的驱动及url" class="headerlink" title="各数据库的驱动及url"></a>各数据库的驱动及url</h3><h4 id="mysql数据库"><a href="#mysql数据库" class="headerlink" title="mysql数据库"></a>mysql数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">驱动 ：com.mysql.jdbc.Driver</span><br><span class="line">url : jdbc:mysql://IP地址:3306/数据库名</span><br><span class="line">jar : mysql-connector-java-5.1.25.jar</span><br></pre></td></tr></table></figure><h4 id="sqlserver数据库"><a href="#sqlserver数据库" class="headerlink" title="sqlserver数据库"></a>sqlserver数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">驱动 ： com.microsoft.jdbc.sqlserver.SQLServerDriver</span><br><span class="line">url : jdbc:microsoft:sqlserver://IP地址:1433;DatabaseName=数据库名</span><br><span class="line">jar : sqljdbc*.jar</span><br></pre></td></tr></table></figure><h4 id="oracle数据库"><a href="#oracle数据库" class="headerlink" title="oracle数据库"></a>oracle数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">驱动 ：oracle.jdbc.driver.OracleDriver</span><br><span class="line">url : jdbc:oracle:thin://IP地址:1521:数据库名</span><br><span class="line">jar : ojdbc-**.jar</span><br></pre></td></tr></table></figure><h3 id="署上博主封装的jdbcDao"><a href="#署上博主封装的jdbcDao" class="headerlink" title="署上博主封装的jdbcDao"></a>署上博主封装的jdbcDao</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseDAO</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String JDBC_DRIVER = <span class="string">"驱动"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">"url"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER = <span class="string">"用户名"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PASSWD = <span class="string">"密码"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Connection conn = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Statement st = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> PreparedStatement pst = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line"><span class="class"><span class="keyword">class</span>.<span class="title">forName</span>(<span class="title">JDBC_DRIVER</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获得数据库连接</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Connection <span class="title">getConn</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = DriverManager.getConnection(URL, USER, PASSWD);</span><br><span class="line">conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> conn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Statement <span class="title">getStatement</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">st = getConn().createStatement();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> st;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> PreparedStatement <span class="title">getPrepareStatement</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">pst = getConn().prepareStatement(sql);</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pst;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">commit</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn.commit();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rollback</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn.rollback();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (st != <span class="keyword">null</span>)</span><br><span class="line">st.close();</span><br><span class="line"><span class="keyword">if</span> (pst != <span class="keyword">null</span>)</span><br><span class="line">pst.close();</span><br><span class="line"><span class="keyword">if</span> (conn != <span class="keyword">null</span>)</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs)</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (rs != <span class="keyword">null</span>)</span><br><span class="line">rs.close();</span><br><span class="line"><span class="keyword">if</span> (st != <span class="keyword">null</span>)</span><br><span class="line">st.close();</span><br><span class="line"><span class="keyword">if</span> (pst != <span class="keyword">null</span>)</span><br><span class="line">pst.close();</span><br><span class="line"><span class="keyword">if</span> (conn != <span class="keyword">null</span>)</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="致言"><a href="#致言" class="headerlink" title="致言"></a>致言</h3><p>现在做项目基本上都是用框架，博主封装的DAO仅供参考学习，也欢迎大家提出宝贵的意见！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;各数据库的驱动及url&quot;&gt;&lt;a href=&quot;#各数据库的驱动及url&quot; class=&quot;headerlink&quot; title=&quot;各数据库的驱动及url&quot;&gt;&lt;/a&gt;各数据库的驱动及url&lt;/h3&gt;&lt;h4 id=&quot;mysql数据库&quot;&gt;&lt;a href=&quot;#mysql数据库&quot;
      
    
    </summary>
    
      <category term="数据库" scheme="http://github.ymlsfly.xin/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="jdbc" scheme="http://github.ymlsfly.xin/tags/jdbc/"/>
    
      <category term="数据库" scheme="http://github.ymlsfly.xin/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>拥有并启动多个Tomcat</title>
    <link href="http://github.ymlsfly.xin/2018/01/18/%E6%8B%A5%E6%9C%89%E5%B9%B6%E5%90%AF%E5%8A%A8%E5%A4%9A%E4%B8%AATomcat/"/>
    <id>http://github.ymlsfly.xin/2018/01/18/拥有并启动多个Tomcat/</id>
    <published>2018-01-18T12:07:37.000Z</published>
    <updated>2018-01-19T16:13:45.896Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Tomcat</p></blockquote><p> tomcat，俗称tom猫，我们作为javaweb开发者，标准的程序猿，怎么可能会少了它呢。之前博主就有那么一个需求，想在电脑上使用不同版本的tomcat，而且可以同时启动，互不影响，这个需要占用端口的server可并不那么easy，博主倒腾了半天，终于成功了。</p><h2 id="windows上的多个tomcat"><a href="#windows上的多个tomcat" class="headerlink" title="windows上的多个tomcat"></a>windows上的多个tomcat</h2><h3 id="前提准备"><a href="#前提准备" class="headerlink" title="前提准备"></a>前提准备</h3><p>首先你得有多个版本的tomcat，直接去tomcat官网下载即可，此处博主用tomcat7.0和tomcat8.5两个来演示，如果有需求，你可以照葫芦画瓢安装部署更多。</p><h3 id="showtime"><a href="#showtime" class="headerlink" title="showtime"></a>showtime</h3><h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CATALINA_HOME7.0  =  D:\tomcat7.0</span><br><span class="line">CATALIAN_BASE7.0  =  D:\tomcat7.0</span><br><span class="line"></span><br><span class="line">CATALINA_HOME8.5  =  D:\tomcat8.5</span><br><span class="line">CATALINA_BASE8.5  =  D:\tomcat8.5</span><br></pre></td></tr></table></figure><p>此案例中，博主的tomcat7.0和tomcat8.5均放在D盘根目录。</p><h4 id="文件配置修改"><a href="#文件配置修改" class="headerlink" title="文件配置修改"></a>文件配置修改</h4><ol><li><p>此时在tomcat7.0文件夹中  </p><ul><li><p>修改startup.bat文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CATALINA_HOME-&gt;CATALINA_HOME7.0</span><br></pre></td></tr></table></figure></li><li><p>修改catalina.bat文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CATALINA_HOME-&gt;CATALINA_HOME7.0</span><br><span class="line">CATALINA_BASE-&gt;CATALINA_BASE7.0</span><br></pre></td></tr></table></figure><p>它的端口监听不改变，表示当启动它时仍让它监听8080端口。</p></li></ul></li><li><p>此时在tomcat8.5文件夹中  </p><ul><li><p>修改startup.bat文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CATALINA_HOME-&gt;CATALINA_HOME8.5</span><br></pre></td></tr></table></figure></li><li><p>修改catalina.bat文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CATALINA_HOME-&gt;CATALINA_HOME8.5</span><br><span class="line">CATALINA_BASE-&gt;CATALINA_BASE8.5</span><br></pre></td></tr></table></figure><p>上面已经说了8080端口留给tomcat7.0监听了，故此时需要修改tomcat8.5的监听端口：<br>修改server.conf文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//找到下面这段</span><br><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8009"</span>  <span class="attr">protocol</span>=<span class="string">"AJP/1.3"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Server</span> <span class="attr">port</span>=<span class="string">"8005"</span> <span class="attr">shutdown</span>=<span class="string">"SHUTDOWN"</span>&gt;</span></span><br><span class="line">//修改为：</span><br><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8088"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8089"</span>  <span class="attr">protocol</span>=<span class="string">"AJP/1.3"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Server</span> <span class="attr">port</span>=<span class="string">"8085"</span> <span class="attr">shutdown</span>=<span class="string">"SHUTDOWN"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此时即将tomcat8.5的启动监听端口指定为了8088，再同时启动也不会有冲突了。</p></li></ul></li></ol><h3 id="linux上安装配置多个tomcat"><a href="#linux上安装配置多个tomcat" class="headerlink" title="linux上安装配置多个tomcat"></a>linux上安装配置多个tomcat</h3><p>我们想在linux上部署多个tomcat，最简单的方法便是利用docker了，这个神器必须得用，前面已有一篇博客对docker有了很详细的讲解，这里就不详细说明了。你可以启动多个docker容器，每个里面启动的不同的tomcat，然后将里面的8080端口映射成宿主服务器的不同端口即可，此时就相当于宿主服务器部署启动了多个监听不同端口的tomcat了。这个案例刚好可以展现出docker的一番魅力了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Tomcat&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; tomcat，俗称tom猫，我们作为javaweb开发者，标准的程序猿，怎么可能会少了它呢。之前博主就有那么一个需求，想在电脑上使用不同版本
      
    
    </summary>
    
      <category term="软件安装" scheme="http://github.ymlsfly.xin/categories/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="server" scheme="http://github.ymlsfly.xin/tags/server/"/>
    
      <category term="工具" scheme="http://github.ymlsfly.xin/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="tomcat" scheme="http://github.ymlsfly.xin/tags/tomcat/"/>
    
  </entry>
  
  <entry>
    <title>mantis的学习</title>
    <link href="http://github.ymlsfly.xin/2018/01/18/mantis%E7%9A%84%E5%AD%A6%E4%B9%A0/"/>
    <id>http://github.ymlsfly.xin/2018/01/18/mantis的学习/</id>
    <published>2018-01-18T04:38:57.000Z</published>
    <updated>2018-01-18T12:14:06.837Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Mantis</p></blockquote><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="基本概述"><a href="#基本概述" class="headerlink" title="基本概述"></a>基本概述</h3><p>缺陷管理平台Mantis，也叫做MantisBT，全称Mantis Bug Tracker。它是一个基于PHP技术的轻量级的开源缺陷跟踪系统，以web操作的形式提供项目管理以及缺陷跟踪服务。所谓缺陷跟踪系统，它主要完成对缺陷报告的记录、分析和状态更新管理。</p><h3 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h3><p>（1）个人可定制的Email通知功能，每个用户可根据自身的工作特点只订阅相关缺陷状态邮件；<br>（2）支持多项目、多语言；<br>（3）权限设置灵活，不同角色有不同权限，每个项目可设为公开或私有状态，每个缺陷可设为公开或私有状态，每个缺陷可以在不同项目间移动；<br>（4）主页可发布项目相关新闻，方便信息传播；<br>（5）具有方便的缺陷关联功能，除重复缺陷外，每个缺陷都可以链接到其他相关缺陷；<br>（6）缺陷报告可打印或输出为CSV格式，1.1.7版：支持可定制的报表输出，可定制用户输入域；<br>（7）有各种缺陷趋势图和柱状图，为项目状态分析提供依据，如果不能满足要求，可以把数据输出到Excel中进一步分析；<br>（8）流程定制方便且符合标准，满足一般的缺陷跟踪。</p><h2 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h2><h3 id="Windows环境下Xampp-mantis"><a href="#Windows环境下Xampp-mantis" class="headerlink" title="Windows环境下Xampp+mantis"></a>Windows环境下Xampp+mantis</h3><h4 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h4><ol><li>将下载好的mantis解压放在D:\xampp\htdocs文件夹下<br>在浏览器中输入<br><a href="http://localhost/mantis/" target="_blank" rel="noopener">http://localhost/mantis/</a><br>或<br><a href="http://localhost:800/mantis" target="_blank" rel="noopener">http://localhost:800/mantis</a>  (xampp的Apache修改了端口号)</li><li>点击 Install/Upgrade Database<br>文本框中默认信息不动<br>在“Password (for Database)”输入刚修改的ROOT密码。<br>“Admin Username (to create Database if required)”输入root，<br>“Admin Password (to create Database if required)”输入ROOT密码，如123456。<br>点击“Install/Upgrade Database”进行安装。<br>安装完成后，右侧标签全为绿色GOOD。</li><li>再次在地址栏中输入<a href="http://localhost/mantis（或http://localhost:800/mantis" target="_blank" rel="noopener">http://localhost/mantis（或http://localhost:800/mantis</a>  xampp的Apache端口修改了） 进入Mantis登录页面。<br>初始用户名为“administrator”，密码为“root”， Mantis安装完成。安装完成后要删除mantis目录下的admin文件夹！</li><li>汉化<br>打开安装目录\xampp\htdocs\mantis\config_defaults_inc.php文件，<br>修改$g_default_language  = ‘english’; 为$g_default_language  = ‘chinese_simplified’;</li><li>时间设置<br>使用个人账户登录系统后，可在【个人资料】-&gt;【更改个人设置】，在“时区”选项中选择”shanghai”。此种方法需要每个账户自行修改。</li></ol><h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h4><p>新建账户时无法设置账户登录密码。<br>在Mantis目录下config_defaults_inc.php文件中找到$g_send_reset_password，然后设置：$g_send_reset_password =OFF  即可。<br>重新使用administrator账号及密码，登录mantis, 依次选择 管理 -&gt; 用户管理 -&gt; “创建用户”， 即可看到填写密码的输入框。</p><h4 id="可能的错误"><a href="#可能的错误" class="headerlink" title="可能的错误"></a>可能的错误</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">安装时出现错误</span><br><span class="line">Schema CreateTableSQL ( mantis_config_table )</span><br><span class="line"></span><br><span class="line">BAD</span><br><span class="line">CREATE TABLE mantis_config_table ( config_id VARCHAR(64) NOT NULL, project_id INTEGER NOT NULL DEFAULT 0, user_id INTEGER NOT NULL DEFAULT 0, access_reqd INTEGER DEFAULT 0, type INTEGER DEFAULT 90, value LONGTEXT NOT NULL, PRIMARY KEY (config_id, project_id, user_id) )ENGINE=MyISAM DEFAULT CHARSET=utf8</span><br><span class="line">Table &apos;mantis_config_table&apos; already exist</span><br><span class="line">登录时出现错误</span><br><span class="line">APPLICATION ERROR #401 </span><br><span class="line">Database query failed. Error received from database was #1054: Unknown column &apos;priority&apos; in &apos;field list&apos; for the query: SELECT basename, priority, protected FROM mantis_plugin_table WHERE enabled=? ORDER BY priority DESC.</span><br><span class="line"></span><br><span class="line">Please use the &quot;Back&quot; button in your web browser to return to the previous page. There you can correct whatever problems were identified in this error or select another action. You can also click an option from the menu bar to go directly to a new section.</span><br><span class="line">分析解决：</span><br><span class="line">    数据库中有相关的表，可能重复点击进入了（login_page.php和install.php）</span><br><span class="line">    1.进入mysql中清理干净相关的表再装。2.删除mantis包重新复制进去安装。</span><br></pre></td></tr></table></figure><h3 id="linux环境下安装（Apache-mantis）"><a href="#linux环境下安装（Apache-mantis）" class="headerlink" title="linux环境下安装（Apache+mantis）"></a>linux环境下安装（Apache+mantis）</h3><h4 id="准备工作："><a href="#准备工作：" class="headerlink" title="准备工作："></a>准备工作：</h4><p>可以现在windows下下载好mantis的tar压缩包，然后通过远程传输到linux服务器上。<br>或直接在服务器上下载：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://sourceforge.net/projects/mantisbt/files/mantis-stable/1.2.15/mantisbt-1.2.15.tar.gz/download</span><br></pre></td></tr></table></figure></p><p>在linux上进入到放mantis压缩包的目录：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf mantisbt-1.2.15-tar</span><br></pre></td></tr></table></figure></p><p>将解压完的文件夹改名为mantis，并将其移到apache下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv mantisbt-1.2.15 /var/www/html/mantis</span><br></pre></td></tr></table></figure></p><p>对mantis文件夹进行赋权限，然后进入该文件夹下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 /var/www/html/mantis</span><br><span class="line"><span class="built_in">cd</span> /var/www/html/mantis</span><br></pre></td></tr></table></figure></p><p>复制出mantis配置文件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp config_inc.php.sample config_inc.php</span><br></pre></td></tr></table></figure></p><h4 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h4><p>打开网址安装mantis自动生成数据库：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip/mantis/admin/install.php//输入框按实际的填</span><br></pre></td></tr></table></figure></p><h4 id="配置参数"><a href="#配置参数" class="headerlink" title="配置参数"></a>配置参数</h4><p>修改mantis配置文件（配置数据库参数）：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim config_inc.php</span><br><span class="line">//修改以下参数（主机名、用户名、密码、数据库名、数据库种类）</span><br><span class="line"><span class="variable">$g_hostname</span>      = <span class="string">'localhost'</span>;</span><br><span class="line"><span class="variable">$g_db_username</span>   = <span class="string">'mantisdbuser'</span>;</span><br><span class="line"><span class="variable">$g_db_password</span>   = <span class="string">''</span>;</span><br><span class="line"><span class="variable">$g_database_name</span> = <span class="string">'bugtracker'</span>;</span><br><span class="line"><span class="variable">$g_db_type</span>       = <span class="string">'mysql'</span>;</span><br></pre></td></tr></table></figure></p><p>删除mantis下的admin文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf admin/</span><br></pre></td></tr></table></figure></p><p>修改语言：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim config_defaults_inc.php</span><br><span class="line"><span class="variable">$g_default_language</span>  = <span class="string">'english'</span>; 为<span class="variable">$g_default_language</span>  = <span class="string">'chinese_simplified'</span>;</span><br></pre></td></tr></table></figure></p><p>网址栏打开mentis会有如下警告<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You should disable the default &apos;administrator&apos; account or change its password.</span><br></pre></td></tr></table></figure></p><p>此时默认的登录用户是administrator，密码是root，登录上去将密码修改即可，再无此警告。</p><h3 id="可能出现的警告处理"><a href="#可能出现的警告处理" class="headerlink" title="可能出现的警告处理"></a>可能出现的警告处理</h3><h4 id="php版本不一致"><a href="#php版本不一致" class="headerlink" title="php版本不一致"></a>php版本不一致</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM WARNING: <span class="string">'mysqli_real_connect(): Headers and client library minor version mismatch. Headers:50556 Library:50637'</span> in <span class="string">'/var/www/html/mantis/library/adodb/drivers/adodb-mysqli.inc.php'</span> line <span class="number">110</span></span><br></pre></td></tr></table></figure><p>在服务器上执行以下命令查看mysql相关版本：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">php -i | grep Client</span><br><span class="line">Client API version =&gt; 5.6.38</span><br><span class="line">Client API library version =&gt; 5.6.38</span><br><span class="line">Client API header version =&gt; 5.5.56-MariaDB</span><br><span class="line">Client API version =&gt; 5.6.38</span><br><span class="line">Soap Client =&gt; enabled</span><br></pre></td></tr></table></figure></p><p>可以发现版本不一致…<br>解决方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum remove -y php-mysql</span><br><span class="line">yum install -y php-mysqlnd</span><br></pre></td></tr></table></figure></p><p>将php里支持的php-mysql换成了php-mysqlnd<br>再次查看：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">php -i | grep Client</span><br><span class="line">Client API version =&gt; mysqlnd 5.0.10 - 20111026 - <span class="variable">$Id</span>: e707c415db32080b3752b232487a435ee0372157 $</span><br><span class="line">Client API library version =&gt; mysqlnd 5.0.10 - 20111026 - <span class="variable">$Id</span>: e707c415db32080b3752b232487a435ee0372157 $</span><br><span class="line">Client API version =&gt; mysqlnd 5.0.10 - 20111026 - <span class="variable">$Id</span>: e707c415db32080b3752b232487a435ee0372157 $</span><br><span class="line">Soap Client =&gt; enabled</span><br></pre></td></tr></table></figure></p><p>可以发现此时版本一致了…<br>最后记得要重启服务：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd</span><br><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure></p><h4 id="php的date未修改"><a href="#php的date未修改" class="headerlink" title="php的date未修改"></a>php的date未修改</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM WARNING: <span class="string">'date_default_timezone_get(): It is not safe to rely on the system'</span>s timezone settings. You are *required* to <span class="keyword">use</span> <span class="title">the</span> <span class="title">date</span>.<span class="title">timezone</span> <span class="title">setting</span> <span class="title">or</span> <span class="title">the</span> <span class="title">date_default_timezone_set</span>() <span class="title">function</span>. <span class="title">In</span> <span class="title">case</span> <span class="title">you</span> <span class="title">used</span> <span class="title">any</span> <span class="title">of</span> <span class="title">those</span> <span class="title">methods</span> <span class="title">and</span> <span class="title">you</span> <span class="title">are</span> <span class="title">still</span> <span class="title">getting</span> <span class="title">this</span> <span class="title">warning</span>, <span class="title">you</span> <span class="title">most</span> <span class="title">likely</span> <span class="title">misspelled</span> <span class="title">the</span> <span class="title">timezone</span> <span class="title">identifier</span>. <span class="title">We</span> <span class="title">selected</span> <span class="title">the</span> <span class="title">timezone</span> '<span class="title">UTC</span>' <span class="title">for</span> <span class="title">now</span>, <span class="title">but</span> <span class="title">please</span> <span class="title">set</span> <span class="title">date</span>.<span class="title">timezone</span> <span class="title">to</span> <span class="title">select</span> <span class="title">your</span> <span class="title">timezone</span>.' <span class="title">in</span> '/<span class="title">var</span>/<span class="title">www</span>/<span class="title">html</span>/<span class="title">mantis</span>/<span class="title">core</span>.<span class="title">php</span>' <span class="title">line</span> 254</span><br></pre></td></tr></table></figure><p>解决方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/php.ini</span><br><span class="line">//找到<span class="comment">#date.timezone =修改如下：</span></span><br><span class="line">date.timezone =<span class="string">"Asia/Shanghai"</span></span><br><span class="line">//最后记得重启服务</span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Mantis&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;h3 id=
      
    
    </summary>
    
      <category term="软件安装" scheme="http://github.ymlsfly.xin/categories/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="mantis" scheme="http://github.ymlsfly.xin/tags/mantis/"/>
    
      <category term="测试" scheme="http://github.ymlsfly.xin/tags/%E6%B5%8B%E8%AF%95/"/>
    
      <category term="工具" scheme="http://github.ymlsfly.xin/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>testlink的学习</title>
    <link href="http://github.ymlsfly.xin/2018/01/18/testlink%E7%9A%84%E5%AD%A6%E4%B9%A0/"/>
    <id>http://github.ymlsfly.xin/2018/01/18/testlink的学习/</id>
    <published>2018-01-18T01:02:06.000Z</published>
    <updated>2018-01-18T12:13:34.195Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>TestLink</p></blockquote><p>是基于web的测试用例管理系统，主要功能是测试用例的创建、管理和执行，并且还提供了一些简单的统计功能。</p><p>testlink这类工具一般都用于在服务器端，所以博主偏重讲下linux下的testlink的安装配置。</p><h2 id="Windows-xampp安装配置testlink"><a href="#Windows-xampp安装配置testlink" class="headerlink" title="Windows+xampp安装配置testlink"></a>Windows+xampp安装配置testlink</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li>从网上下载testlink的压缩包，将安装包解压，放到xampp的htdocs目录下，改名为testlink。</li><li><p>启动Apache，浏览器打开testlink，点击New installation，选择协议，点击下一步：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip/testlink</span><br></pre></td></tr></table></figure></li><li><p>continue然后配置mysql，安装成功，登录testlink，默认用户名/密码为admin/admin</p></li></ol><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>中间配置可能会有警告，对其安装并没有影响，如果有需要可以修改篇配置来消掉警告。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Maximun Session Idle Time before Timeout ：shot.consider to extend</span><br><span class="line">//配置文件中找到对应值调大</span><br><span class="line">Checking max.execution time(Parameter max_execution_time) 30 seconds –we suggest 120 seconds in order to manage hundred of test cases</span><br><span class="line">//配置文件中找到对应值调大</span><br><span class="line">Checking maximal allowed memory (Parameter memory_limit) </span><br><span class="line">//配置文件中找到对应值调大</span><br></pre></td></tr></table></figure></p><h2 id="linux-Apache安装配置testlink"><a href="#linux-Apache安装配置testlink" class="headerlink" title="linux+Apache安装配置testlink"></a>linux+Apache安装配置testlink</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><ol><li><p>在服务器上直接下载testlink压缩包，或在Windows上通过远程工具将下载好的testlink压缩包传到服务器。也可以在服务器上直接通过wget命令下载。</p></li><li><p>解压，然后将其移至Apache工作目录/var/www/html/文件夹下，重命名为testlink：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf testlink-1.9.14.tar.gz</span><br><span class="line">mv testlink-1.9.14 /var/www/html/testlink</span><br></pre></td></tr></table></figure></li><li><p>在浏览器打开<a href="http://ip/testlink" target="_blank" rel="noopener">http://ip/testlink</a><br><img src="https://raw.githubusercontent.com/1139195320/imgs/8b908968111c3b8292200570a420089d0185eef3/testlink/1.png" alt=""><br><img src="https://raw.githubusercontent.com/1139195320/imgs/8b908968111c3b8292200570a420089d0185eef3/testlink/2.png" alt=""></p></li><li>警告和错误信息处理：（操作后都必须要重启Apache）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">警告信息：</span><br><span class="line">Maximum Session Idle Time before Timeout</span><br><span class="line">24 minutes and 0 seconds - (Short. Consider to exten</span><br><span class="line">d.)</span><br><span class="line">解决：修改php.ini文件</span><br><span class="line">session.gc_maxlifetime = 3600</span><br><span class="line"></span><br><span class="line">警告信息：</span><br><span class="line">Checking max. execution time (Parameter max_execution_time)</span><br><span class="line">30 seconds - We suggest 120 seconds in order to manage hundred of test cases (edit php.ini)</span><br><span class="line">解决：</span><br><span class="line">修改php.ini文件</span><br><span class="line">max_execution_time = 12Checking LDAP libraryFailed! LDAP library not enabled. LDAP authentication cannot be used. (default internal authentication will works)</span><br><span class="line"></span><br><span class="line">警告信息：Checking if /var/testlink/logs/ directory exists [S]</span><br><span class="line">Failed!</span><br><span class="line">Checking if /var/testlink/upload_area/ directory exists [S]</span><br><span class="line">解决：</span><br><span class="line">修改/testlink/config_inc.php文件</span><br><span class="line">log_path = &apos;/var/www/html/testlink/logs/&apos;;</span><br><span class="line">$g_repositoryPath = &apos;/var/www/html/testlink/upload_area/&apos;;</span><br><span class="line">然后检查/var/www/html/testlink/下是否有logs文件夹和upload_area文件夹，没有则创建。</span><br><span class="line">检查这两个文件夹的权限，均赋权777</span><br><span class="line">chmod 777 logs/</span><br><span class="line">chmod 777 upload_area/</span><br></pre></td></tr></table></figure></li></ol><p><img src="https://raw.githubusercontent.com/1139195320/imgs/8b908968111c3b8292200570a420089d0185eef3/testlink/3.png" alt=""></p><ol><li>在浏览器中直接输入地址访问登录：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip/testlink/</span><br></pre></td></tr></table></figure></li></ol><p>默认登录账号/密码为：admin/admin</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p><img src="https://raw.githubusercontent.com/1139195320/imgs/8b908968111c3b8292200570a420089d0185eef3/testlink/4.png" alt=""></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">警告信息：</span><br><span class="line">There are security warnings for your consideration. See details on file: C:/xampp/htdocs/testlink/logs/config_check.txt. To disable any reference to these checkings, set $tlCfg-&gt;config_check_warning_mode = &apos;SILENT&apos;;</span><br><span class="line">解决：</span><br><span class="line">vim /var/www/html/testlink/config.inc.php</span><br><span class="line">将$tlCfg-&gt;config_check_warning_mode = &apos;FILE&apos;;修改为：</span><br><span class="line">$tlCfg-&gt;config_check_warning_mode = &apos;SILENT&apos;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;TestLink&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;是基于web的测试用例管理系统，主要功能是测试用例的创建、管理和执行，并且还提供了一些简单的统计功能。&lt;/p&gt;
&lt;p&gt;testlink这类
      
    
    </summary>
    
      <category term="软件安装" scheme="http://github.ymlsfly.xin/categories/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="测试" scheme="http://github.ymlsfly.xin/tags/%E6%B5%8B%E8%AF%95/"/>
    
      <category term="工具" scheme="http://github.ymlsfly.xin/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="testlink" scheme="http://github.ymlsfly.xin/tags/testlink/"/>
    
  </entry>
  
  <entry>
    <title>Docker梦工厂</title>
    <link href="http://github.ymlsfly.xin/2018/01/17/Docker%E6%A2%A6%E5%B7%A5%E5%8E%82/"/>
    <id>http://github.ymlsfly.xin/2018/01/17/Docker梦工厂/</id>
    <published>2018-01-17T12:39:23.000Z</published>
    <updated>2018-01-17T13:26:38.526Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Docker</p></blockquote><h2 id="小述Docker"><a href="#小述Docker" class="headerlink" title="小述Docker"></a>小述Docker</h2><p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p><h2 id="Centos7下部署Docker"><a href="#Centos7下部署Docker" class="headerlink" title="Centos7下部署Docker"></a>Centos7下部署Docker</h2><h3 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h3><ol><li><p>首先检查内核版本，要求必须要在3.10+</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure></li><li><p>确保yum是最新的（可以忽略此步）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure></li><li><p>添加docker于yum仓库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tee /etc/yum.repos.d/docker.repo &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">[dockerrepo]</span><br><span class="line">name=Docker Repository</span><br><span class="line">baseurl=https://yum.dockerproject.org/repo/main/centos/<span class="variable">$releasever</span>/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://yum.dockerproject.org/gpg</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li><li><p>安装docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-engine</span><br></pre></td></tr></table></figure></li></ol><h3 id="启动验证"><a href="#启动验证" class="headerlink" title="启动验证"></a>启动验证</h3><p>启动/重启/停止的命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br><span class="line">systemctl restart docker</span><br><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure></p><p>验证<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br><span class="line"></span><br><span class="line">Client:</span><br><span class="line">Version:      17.05.0-ce</span><br><span class="line">API version:  1.29</span><br><span class="line">Go version:   go1.7.5</span><br><span class="line">Git commit:   89658be</span><br><span class="line">Built:        Thu May  4 22:06:25 2017</span><br><span class="line">OS/Arch:      linux/amd64</span><br><span class="line">Server:</span><br><span class="line">Version:      17.05.0-ce</span><br><span class="line">API version:  1.29 (minimum version 1.12)</span><br><span class="line">Go version:   go1.7.5</span><br><span class="line">Git commit:   89658be</span><br><span class="line">Built:        Thu May  4 22:06:25 2017</span><br><span class="line">OS/Arch:      linux/amd64</span><br><span class="line">Experimental: <span class="literal">false</span></span><br></pre></td></tr></table></figure></p><h3 id="镜像管理"><a href="#镜像管理" class="headerlink" title="镜像管理"></a>镜像管理</h3><p>启动docker后可以查看此时拥有的镜像源：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image</span><br></pre></td></tr></table></figure></p><ol><li><p>下载拉取镜像源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//例：拉取tomcat镜像</span><br><span class="line">docker pull hub.c.163.com/library/tomcat:latest</span><br></pre></td></tr></table></figure></li><li><p>修改镜像名和标签</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag hub.c.163.com/library/tomcat:latest tomcat:v8.5</span><br></pre></td></tr></table></figure></li><li><p>删除原来的镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f hub.c.163.com/library/tomcat:latest</span><br></pre></td></tr></table></figure></li><li><p>将该服务在后台运行起来（并指定由服务器58080端口对其映射）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 58080:8080 tomcat:v8.5</span><br></pre></td></tr></table></figure></li><li><p>查看</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//查看运行中的容器信息</span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure></li></ol><p>此时在浏览器即可访问此时运行的tomcat了，并且是在我们指定的58080端口：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip:58080</span><br></pre></td></tr></table></figure></p><h2 id="与docker的亲密接触"><a href="#与docker的亲密接触" class="headerlink" title="与docker的亲密接触"></a>与docker的亲密接触</h2><h3 id="日常命令"><a href="#日常命令" class="headerlink" title="日常命令"></a>日常命令</h3><ol><li><p>登录（登出）一个Docker镜像仓库，如未指定仓库地址，默认为官方仓库Docker Hub</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker login [option] [server]</span><br><span class="line">docker <span class="built_in">logout</span> [option] [server]</span><br><span class="line">//例：</span><br><span class="line">docker login -u 用户名 -p 密码</span><br></pre></td></tr></table></figure></li><li><p>从Docker Hub中查找镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker search [option] team</span><br><span class="line">--automated :只列出 automated build类型的镜像；</span><br><span class="line">--no-trunc :显示完整的镜像描述；</span><br><span class="line">-s :列出收藏数不小于指定值的镜像。</span><br></pre></td></tr></table></figure></li><li><p>将本地镜像上传到镜像仓库（必须先登录）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker push [options] name[:tag]</span><br><span class="line">    --<span class="built_in">disable</span>-content-trust 忽略镜像的校验，默认开启</span><br></pre></td></tr></table></figure></li><li><p>从镜像仓库中拉取或更新指定仓库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull [options] name[:tag|@digest]</span><br></pre></td></tr></table></figure></li><li><p>列出本地镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images [options] [repository[:tag]]</span><br></pre></td></tr></table></figure></li><li><p>删除一个或多个本地镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rmi [options] image [image ...]</span><br><span class="line">    -f 强制删除</span><br><span class="line">    --no-prune 不移除该镜像的过程镜像，默认移除</span><br></pre></td></tr></table></figure></li><li><p>标记本地镜像，将其归入某一仓库（修改镜像名）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag [options] image[:tag] name[:tag]</span><br></pre></td></tr></table></figure></li><li><p>使用Dockerfile创建镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker build [options] path | url | -</span><br><span class="line">    -f 指定要使用的Dockerfile的路径</span><br><span class="line">    -m 设置内存最大值</span><br><span class="line">    -q 安静模式，成功后只输出镜像ID</span><br><span class="line">    --rm 设置镜像成功后删除中间容器</span><br><span class="line">//例：</span><br><span class="line">docker build -t /fy/tomcat:v8.5 .</span><br></pre></td></tr></table></figure></li><li><p>查看指定镜像的创建历史</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">history</span> [options] image</span><br></pre></td></tr></table></figure></li><li><p>将指定镜像保存成tar归档文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker save [options] image [image ...]</span><br><span class="line">    -o 输出到的文件</span><br></pre></td></tr></table></figure></li><li><p>从归档文件中创建镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker import [options] file|url|- [repository[:tag]]</span><br><span class="line">    -c 应用docker指令创建镜像</span><br><span class="line">    -m 提交时的说明文字</span><br><span class="line">//例：</span><br><span class="line">docker import abc.tar fy/tomcat:v8.5</span><br></pre></td></tr></table></figure></li><li><p>创建一个新的容器但不启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create [options] image [<span class="built_in">command</span>] [arg ...]</span><br></pre></td></tr></table></figure></li><li><p>创建一个新的容器并运行一个命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">docker run [options] image [<span class="built_in">command</span>] [arg ...]</span><br><span class="line">    -d: 后台运行容器，并返回容器ID；</span><br><span class="line">    -i: 以交互模式运行容器，通常与 -t 同时使用；</span><br><span class="line">    -t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；</span><br><span class="line">    --name=<span class="string">"nginx-lb"</span>: 为容器指定一个名称；</span><br><span class="line">    --dns 8.8.8.8: 指定容器使用的DNS服务器，默认和宿主一致；</span><br><span class="line">    --dns-search example.com: 指定容器DNS搜索域名，默认和宿主一致；</span><br><span class="line">    -h <span class="string">"mars"</span>: 指定容器的hostname；</span><br><span class="line">    -e username=<span class="string">"ritchie"</span>: 设置环境变量；</span><br><span class="line">    --env-file=[]: 从指定文件读入环境变量；</span><br><span class="line">    --cpuset=<span class="string">"0-2"</span> or --cpuset=<span class="string">"0,1,2"</span>: 绑定容器到指定CPU运行；</span><br><span class="line">    -m :设置容器使用内存最大值；</span><br><span class="line">    --net=<span class="string">"bridge"</span>: 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；</span><br><span class="line">    --link=[]: 添加链接到另一个容器；</span><br><span class="line">    --expose=[]: 开放一个端口或一组端口</span><br><span class="line">    -p：指定映射端口 服务器端口:容器端口</span><br><span class="line">    -P：系统自动为其分配映射端口</span><br></pre></td></tr></table></figure></li><li><p>杀掉一个运行中的容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> [options] container [container ...]</span><br><span class="line">    -s 向容器发送一个信号</span><br></pre></td></tr></table></figure></li><li><p>删除一个或多少容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker rm [options] container [container ...]</span><br><span class="line">    -f 通过SIGKILL信号强制删除一个运行中的容器</span><br><span class="line">    -l 移除容器间的网络连接，而非容器本身（后接连接名，不是容器名）</span><br><span class="line">    -v 删除容器和与容器相关联的卷</span><br></pre></td></tr></table></figure></li><li><p>暂停/恢复容器中的所有进程</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pause [options] container [container ...]</span><br><span class="line">docker unpause [options] container [container ...]</span><br></pre></td></tr></table></figure></li><li><p>在运行的容器中执行命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> [options] container <span class="built_in">command</span> [arg ...]</span><br><span class="line">    -d :分离模式: 在后台运行</span><br><span class="line">    -i :即使没有附加也保持STDIN 打开</span><br><span class="line">    -t :分配一个伪终端</span><br><span class="line">//例：在容器<span class="built_in">test</span>中以交互模式执行容器内的/root/run.sh脚本</span><br><span class="line">docker <span class="built_in">exec</span> -ti <span class="built_in">test</span> /bin/sh /root/run.sh</span><br><span class="line">//例：在容器<span class="built_in">test</span>中开启一个交互模式的终端（即进入<span class="built_in">test</span>容器）</span><br><span class="line">docker <span class="built_in">exec</span> -ti <span class="built_in">test</span> /bin/bash</span><br></pre></td></tr></table></figure></li><li><p>列出容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker ps [options]</span><br><span class="line">    -a :显示所有的容器，包括未运行的。</span><br><span class="line">    -f :根据条件过滤显示的内容。</span><br><span class="line">    --format :指定返回值的模板文件。</span><br><span class="line">    -l :显示最近创建的容器。</span><br><span class="line">    -n :列出最近创建的n个容器。</span><br><span class="line">    --no-trunc :不截断输出。</span><br><span class="line">    -q :静默模式，只显示容器编号。</span><br><span class="line">    -s :显示总的文件大小。</span><br></pre></td></tr></table></figure></li><li><p>获取容器/镜像的元数据</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker inspect [options] name|id [name|id ...]</span><br><span class="line">    -f :指定返回值的模板文件。</span><br><span class="line">    -s :显示总的文件大小。</span><br><span class="line">    --<span class="built_in">type</span> :为指定类型返回JSON。</span><br></pre></td></tr></table></figure></li><li><p>查看容器中运行的进程信息，支持ps命令参数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top [options] container [ps options]</span><br></pre></td></tr></table></figure></li><li><p>从服务器获取实时事件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker events [options]</span><br><span class="line">    -f ：根据条件过滤事件；</span><br><span class="line">    --since ：从指定的时间戳后显示所有事件;</span><br><span class="line">    --until ：流水时间显示到指定的时间为止；</span><br></pre></td></tr></table></figure></li><li><p>获取容器的日志</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker logs [options] container</span><br><span class="line">    -f : 跟踪日志输出</span><br><span class="line">    --since :显示某个开始时间的所有日志</span><br><span class="line">    -t : 显示时间戳</span><br><span class="line">    --tail :仅列出最新N条容器日志</span><br></pre></td></tr></table></figure></li><li><p>阻塞运行直到停止，最后打印它的退出代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">wait</span> [options] container [container ...]</span><br></pre></td></tr></table></figure></li><li><p>从容器创建一个新的镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker commit [options] container [repository[:tag]]</span><br><span class="line">    -a :提交的镜像作者；</span><br><span class="line">    -c :使用Dockerfile指令来创建镜像；</span><br><span class="line">    -m :提交时的说明文字；</span><br><span class="line">    -p :在commit时，将容器暂停。</span><br></pre></td></tr></table></figure></li><li><p>容器与主机之间的数据拷贝</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker cp [options] container:src_path dest_path</span><br><span class="line">docker cp [options] src_path container:dest_path</span><br><span class="line">    -L 保持源目标中的链接</span><br></pre></td></tr></table></figure></li><li><p>检查容器里文件结构的更改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker diff [options] container</span><br></pre></td></tr></table></figure></li></ol><h3 id="额外需求"><a href="#额外需求" class="headerlink" title="额外需求"></a>额外需求</h3><h4 id="给普通用户添加使用docker的权限"><a href="#给普通用户添加使用docker的权限" class="headerlink" title="给普通用户添加使用docker的权限"></a>给普通用户添加使用docker的权限</h4><p>这样普通就可以使用docker命令而无需root权限。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">usermod -a -G docker 用户名</span><br><span class="line">systemctl restart docker</span><br><span class="line">注意：该用户需要重新登录才生效</span><br></pre></td></tr></table></figure></p><h4 id="制作自己的镜像"><a href="#制作自己的镜像" class="headerlink" title="制作自己的镜像"></a>制作自己的镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">//此例为tomcat7.0</span><br><span class="line">//新建tomcat7.0的母文件夹</span><br><span class="line">mkdir dockerfile_tomcat7.0-2</span><br><span class="line">//将tomcat7.0和jdk1.7移入该文件夹</span><br><span class="line">cp tomcat7.0 dockerfile_tomcat7.0-2/tomcat7.0</span><br><span class="line">cp jdk1.7 dockerfile_tomcat7.0-2/jdk1.7</span><br><span class="line"><span class="built_in">cd</span> dockerfile_tomcat7.0-2</span><br><span class="line">//创建编辑Dockerfile文件</span><br><span class="line">vim Dockerfile</span><br><span class="line">//以下为Dockerfile文件内容-&gt;开始</span><br><span class="line"><span class="comment">#使用基础镜像centos:7.2（此镜像已拉取下来）</span></span><br><span class="line">FROM centos:v7.2</span><br><span class="line"><span class="comment">#指定镜像创建者信息</span></span><br><span class="line">MAINTAINER fy</span><br><span class="line"><span class="comment">#切换镜像的目录，进入/usr目录（基础镜像是一个linux系统，可参照linux查看相应目录）</span></span><br><span class="line">WORKDIR /usr</span><br><span class="line"><span class="comment">#在/usr/下创建java目录，用来存放jdk</span></span><br><span class="line">RUN mkdir java</span><br><span class="line"><span class="comment">#切换镜像的目录至/usr/java</span></span><br><span class="line">WORKDIR /usr/java</span><br><span class="line"><span class="comment">#在/usr/java下创建jdk目录，用来存放jdk文件</span></span><br><span class="line">RUN mkdir jdk</span><br><span class="line"><span class="comment">#切换镜像的目录至/usr/java/jdk</span></span><br><span class="line">WORKDIR /usr/java/jdk</span><br><span class="line"><span class="comment">#将宿主机的jdk1.7目录下的全部文件考入至镜像的/usr/java/jdk目录下</span></span><br><span class="line">ADD jdk1.7 /usr/java/jdk</span><br><span class="line"><span class="comment">#切换镜像的目录至/opt</span></span><br><span class="line">WORKDIR /opt</span><br><span class="line"><span class="comment">#在/opt下创建tomcat目录，用来存放tomcat文件</span></span><br><span class="line">RUN mkdir tomcat</span><br><span class="line"><span class="comment">#将宿主机的tomcat7.0目录下的全部文件考入至镜像的/opt/tomcat目录下</span></span><br><span class="line">ADD tomcat7.0 /opt/tomcat</span><br><span class="line"><span class="comment">#设置环境变量</span></span><br><span class="line">ENV JAVA_HOME=/usr/java/jdk</span><br><span class="line">ENV JAVA_BIN=/usr/java/jdk/bin</span><br><span class="line">ENV PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">ENV CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="comment">#设置容器启动时执行的操作</span></span><br><span class="line"></span><br><span class="line">CMD /opt/tomcat/bin/catalina.sh run</span><br><span class="line">//以上为Dockerfile文件的内容-&gt;结束</span><br><span class="line">//产生镜像</span><br><span class="line">docker build -t tomcat:v7.0-2 .</span><br><span class="line">//此时可以查看</span><br><span class="line">docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE</span><br><span class="line">tomcat              v7.0-2              5a9f994d6a14        About a minute ago   845MB</span><br><span class="line">//启动该tomcat（如果要看启动错误，就不要加-d后台参数）</span><br><span class="line">docker run -d -p 48080:8080 tomcat:v7.0-2</span><br></pre></td></tr></table></figure><p>报错解决：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">报错：在启动tomcat（./startup.sh）如果报</span><br><span class="line">-bash: ./startup.sh: Permission denied</span><br><span class="line">解决：解决（进入tomcat的bin目录赋权限）</span><br><span class="line">chmod u+x *.s</span><br><span class="line">报错：在启动时如果报</span><br><span class="line">The APR based Apache Tomcat Native library <span class="built_in">which</span> allows optimal</span><br><span class="line">解决：解决（下载tcnative-1.dll，放到tocat的bin目录下）</span><br><span class="line">wget http://tomcat.heanet.ie/native/1.1.12/binaries/win32/tcnative-1.dll</span><br></pre></td></tr></table></figure></p><h3 id="Dockerfile详解"><a href="#Dockerfile详解" class="headerlink" title="Dockerfile详解"></a>Dockerfile详解</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><span class="line">常用：</span><br><span class="line">FROM：base镜像</span><br><span class="line">RUN：执行命令</span><br><span class="line">ADD：添加文件</span><br><span class="line">COPY：拷贝文件</span><br><span class="line">CMD：执行命令</span><br><span class="line">EXPOSE：暴露端口</span><br><span class="line">WORKDIR：指定路径</span><br><span class="line">MAINTAINER：维护者（作者）</span><br><span class="line">ENV：设定环境变量</span><br><span class="line">ENTRYPORT：容器入口</span><br><span class="line">USER：指定用户</span><br><span class="line">VOLUME：mount point</span><br><span class="line"></span><br><span class="line">命令详解：</span><br><span class="line">FROM</span><br><span class="line">功能为指定基础镜像，并且必须是第一条指令。</span><br><span class="line">如果不以任何镜像为基础，那么写法为：FROM scratch。</span><br><span class="line">同时意味着接下来所写的指令将作为镜像的第一层开始</span><br><span class="line">语法：</span><br><span class="line">FROM <span class="tag">&lt;<span class="name">image</span>&gt;</span></span><br><span class="line">FROM <span class="tag">&lt;<span class="name">image</span>&gt;</span>:<span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">FROM <span class="tag">&lt;<span class="name">image</span>&gt;</span>:<span class="tag">&lt;<span class="name">digest</span>&gt;</span></span><br><span class="line">三种写法，其中<span class="tag">&lt;<span class="name">tag</span>&gt;</span>和<span class="tag">&lt;<span class="name">digest</span>&gt;</span> 是可选项，如果没有选择，那么默认值为latest</span><br><span class="line">RUN</span><br><span class="line"> 功能为运行指定的命令</span><br><span class="line">RUN命令有两种格式</span><br><span class="line">1. RUN <span class="tag">&lt;<span class="name">command</span>&gt;</span></span><br><span class="line">2. RUN ["executable", "param1", "param2"]</span><br><span class="line">第一种后边直接跟shell命令</span><br><span class="line"></span><br><span class="line">* 在linux操作系统上默认 /bin/sh -c</span><br><span class="line">* 在windows操作系统上默认 cmd /S /C</span><br><span class="line"></span><br><span class="line">第二种是类似于函数调用。</span><br><span class="line">可将executable理解成为可执行文件，后面就是两个参数。</span><br><span class="line">两种写法比对：</span><br><span class="line"></span><br><span class="line">* RUN /bin/bash -c 'source $HOME/.bashrc; echo $HOME</span><br><span class="line">* RUN ["/bin/bash", "-c", "echo hello"]</span><br><span class="line"></span><br><span class="line">注意：多行命令不要写多个RUN，原因是Dockerfile中每一个指令都会建立一层.</span><br><span class="line"> 多少个RUN就构建了多少层镜像，会造成镜像的臃肿、多层，不仅仅增加了构件部署的时间，还容易出错。</span><br><span class="line">RUN书写时的换行符是\</span><br><span class="line">CMD</span><br><span class="line">功能为容器启动时要运行的命令</span><br><span class="line">语法有三种写法</span><br><span class="line">1. CMD ["executable","param1","param2"]</span><br><span class="line">2. CMD ["param1","param2"]</span><br><span class="line">3. CMD command param1 param2</span><br><span class="line">第三种比较好理解了，就时shell这种执行方式和写法</span><br><span class="line">第一种和第二种其实都是可执行文件加上参数的形式</span><br><span class="line">举例说明两种写法：</span><br><span class="line"></span><br><span class="line">* CMD [ "sh", "-c", "echo $HOME"</span><br><span class="line">* CMD [ "echo", "$HOME" ]</span><br><span class="line"></span><br><span class="line">补充细节：这里边包括参数的一定要用双引号，就是",不能是单引号。千万不能写成单引号。</span><br><span class="line">原因是参数传递后，docker解析的是一个JSON array</span><br><span class="line">RUN &amp; CMD</span><br><span class="line">不要把RUN和CMD搞混了。</span><br><span class="line">RUN是构件容器时就运行的命令以及提交运行结果</span><br><span class="line">CMD是容器启动时执行的命令，在构件时并不运行，构件时紧紧指定了这个命令到底是个什么样子</span><br><span class="line">LABEL</span><br><span class="line">功能是为镜像指定标签</span><br><span class="line">语法：</span><br><span class="line">LABEL <span class="tag">&lt;<span class="name">key</span>&gt;</span>=<span class="tag">&lt;<span class="name">value</span>&gt;</span> <span class="tag">&lt;<span class="name">key</span>&gt;</span>=<span class="tag">&lt;<span class="name">value</span>&gt;</span> <span class="tag">&lt;<span class="name">key</span>&gt;</span>=<span class="tag">&lt;<span class="name">value</span>&gt;</span> ...</span><br><span class="line"> 一个Dockerfile中可以有多个LABEL，如下：</span><br><span class="line">LABEL "com.example.vendor"="ACME Incorporated"</span><br><span class="line">LABEL com.example.label-with-value="foo"</span><br><span class="line">LABEL version="1.0"</span><br><span class="line">LABEL description="This text illustrates \</span><br><span class="line">that label-values can span multiple lines."</span><br><span class="line"> 但是并不建议这样写，最好就写成一行，如太长需要换行的话则使用\符号</span><br><span class="line">如下：</span><br><span class="line">LABEL multi.label1="value1" \</span><br><span class="line">multi.label2="value2" \</span><br><span class="line">other="value3"</span><br><span class="line">说明：LABEL会继承基础镜像种的LABEL，如遇到key相同，则值覆盖</span><br><span class="line">MAINTAINER</span><br><span class="line">指定作者</span><br><span class="line">语法：</span><br><span class="line">MAINTAINER <span class="tag">&lt;<span class="name">name</span>&gt;</span></span><br><span class="line">EXPOSE</span><br><span class="line">功能为暴露容器运行时的监听端口给外部</span><br><span class="line">但是EXPOSE并不会使容器访问主机的端口</span><br><span class="line">如果想使得容器与主机的端口有映射关系，必须在容器启动的时候加上 -P参数</span><br><span class="line">ENV</span><br><span class="line">功能为设置环境变量</span><br><span class="line">语法有两种</span><br><span class="line">1. ENV <span class="tag">&lt;<span class="name">key</span>&gt;</span> <span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">2. ENV <span class="tag">&lt;<span class="name">key</span>&gt;</span>=<span class="tag">&lt;<span class="name">value</span>&gt;</span> ...</span><br><span class="line">两者的区别就是第一种是一次设置一个，第二种是一次设置多个</span><br><span class="line">ADD</span><br><span class="line"> 一个复制命令，把文件复制到镜像中。</span><br><span class="line">如果把虚拟机与容器想象成两台linux服务器的话，那么这个命令就类似于scp，只是scp需要加用户名和密码的权限验证，而ADD不用。</span><br><span class="line">语法如下：</span><br><span class="line">1. ADD <span class="tag">&lt;<span class="name">src</span>&gt;</span>... <span class="tag">&lt;<span class="name">dest</span>&gt;</span></span><br><span class="line">2. ADD ["<span class="tag">&lt;<span class="name">src</span>&gt;</span>",... "<span class="tag">&lt;<span class="name">dest</span>&gt;</span>"]</span><br><span class="line"><span class="tag">&lt;<span class="name">dest</span>&gt;</span>路径的填写可以是容器内的绝对路径，也可以是相对于工作目录的相对路径</span><br><span class="line"><span class="tag">&lt;<span class="name">src</span>&gt;</span>可以是一个本地文件或者是一个本地压缩文件，还可以是一个url</span><br><span class="line">如果把<span class="tag">&lt;<span class="name">src</span>&gt;</span>写成一个url，那么ADD就类似于wget命令</span><br><span class="line">如以下写法都是可以的：</span><br><span class="line"></span><br><span class="line">* ADD test relativeDir/</span><br><span class="line">* ADD test /relativeDir</span><br><span class="line">* ADD http://example.com/foobar /</span><br><span class="line"></span><br><span class="line">尽量不要把<span class="tag">&lt;<span class="name">scr</span>&gt;</span>写成一个文件夹，如果<span class="tag">&lt;<span class="name">src</span>&gt;</span>是一个文件夹了，复制整个目录的内容,包括文件系统元数据</span><br><span class="line">COPY</span><br><span class="line">又是一个复制命令</span><br><span class="line">语法如下：</span><br><span class="line">1. COPY <span class="tag">&lt;<span class="name">src</span>&gt;</span>... <span class="tag">&lt;<span class="name">dest</span>&gt;</span></span><br><span class="line">2. COPY ["<span class="tag">&lt;<span class="name">src</span>&gt;</span>",... "<span class="tag">&lt;<span class="name">dest</span>&gt;</span>"]</span><br><span class="line">与ADD的区别</span><br><span class="line">COPY的<span class="tag">&lt;<span class="name">src</span>&gt;</span>只能是本地文件，其他用法一致</span><br><span class="line">ENTRYPOINT</span><br><span class="line">功能是启动时的默认命令</span><br><span class="line">语法如下：</span><br><span class="line">1. ENTRYPOINT ["executable", "param1", "param2"]</span><br><span class="line">2. ENTRYPOINT command param1 param2</span><br><span class="line">第二种就是写shell</span><br><span class="line">第一种就是可执行文件加参数</span><br><span class="line">与CMD比较说明（这俩命令太像了，而且还可以配合使用）：</span><br><span class="line">1. 相同点：</span><br><span class="line"></span><br><span class="line">* 只能写一条，如果写了多条，那么只有最后一条生效</span><br><span class="line">* 容器启动时才运行，运行时机相同</span><br><span class="line"></span><br><span class="line">2. 不同点：</span><br><span class="line"></span><br><span class="line">*  ENTRYPOINT不会被运行的command覆盖，而CMD则会被覆盖</span><br><span class="line">*  如果我们在Dockerfile种同时写了ENTRYPOINT和CMD，并且CMD指令不是一个完整的可执行命令，那么CMD指定的内容将会作为ENTRYPOINT的参数</span><br><span class="line"></span><br><span class="line">如下：</span><br><span class="line">FROM ubuntu</span><br><span class="line">ENTRYPOINT ["top", "-b"]</span><br><span class="line">CMD ["-c"]</span><br><span class="line"></span><br><span class="line">* 如果我们在Dockerfile种同时写了ENTRYPOINT和CMD，并且CMD是一个完整的指令，那么它们两个会互相覆盖，谁在最后谁生效</span><br><span class="line"></span><br><span class="line">如下：</span><br><span class="line">FROM ubuntu</span><br><span class="line">ENTRYPOINT ["top", "-b"]</span><br><span class="line">CMD ls -al</span><br><span class="line">那么将执行ls -al ,top -b不会执行。</span><br><span class="line">VOLUME</span><br><span class="line">可实现挂载功能，可以将内地文件夹或者其他容器中的文件夹挂在到这个容器中</span><br><span class="line">语法为：</span><br><span class="line">VOLUME ["/data"] </span><br><span class="line">说明：</span><br><span class="line">   ["/data"]可以是一个JsonArray ，也可以是多个值。所以如下几种写法都是正确的</span><br><span class="line">VOLUME ["/var/log/"]</span><br><span class="line">VOLUME /var/log</span><br><span class="line">VOLUME /var/log /var/db</span><br><span class="line">一般的使用场景为需要持久化存储数据时</span><br><span class="line">容器使用的是AUFS，这种文件系统不能持久化数据，当容器关闭后，所有的更改都会丢失。</span><br><span class="line">所以当数据需要持久化时用这个命令。</span><br><span class="line">USER</span><br><span class="line">设置启动容器的用户，可以是用户名或UID，所以，只有下面的两种写法是正确的</span><br><span class="line"></span><br><span class="line">* USER daemo</span><br><span class="line">* USER UID</span><br><span class="line"></span><br><span class="line">注意：如果设置了容器以daemon用户去运行，那么RUN, CMD 和 ENTRYPOINT 都会以这个用户去运行</span><br><span class="line">WORKDIR</span><br><span class="line">语法：</span><br><span class="line">WORKDIR /path/to/workdir</span><br><span class="line">设置工作目录，对RUN,CMD,ENTRYPOINT,COPY,ADD生效。如果不存在则会创建，也可以设置多次。</span><br><span class="line">如：</span><br><span class="line">WORKDIR /a</span><br><span class="line">WORKDIR b</span><br><span class="line">WORKDIR c</span><br><span class="line">RUN pwd</span><br><span class="line">pwd执行的结果是/a/b/c</span><br><span class="line">WORKDIR也可以解析环境变量</span><br><span class="line">如：</span><br><span class="line">ENV DIRPATH /path</span><br><span class="line">WORKDIR $DIRPATH/$DIRNAME</span><br><span class="line">RUN pwd</span><br><span class="line">pwd的执行结果是/path/$DIRNAME</span><br><span class="line">ARG</span><br><span class="line">语法：</span><br><span class="line">ARG <span class="tag">&lt;<span class="name">name</span>&gt;</span>[=<span class="tag">&lt;<span class="name">default</span> <span class="attr">value</span>&gt;</span>]</span><br><span class="line">设置变量命令，ARG命令定义了一个变量，在docker build创建镜像的时候，使用 --build-arg <span class="tag">&lt;<span class="name">varname</span>&gt;</span>=<span class="tag">&lt;<span class="name">value</span>&gt;</span>来指定参数</span><br><span class="line">如果用户在build镜像时指定了一个参数没有定义在Dockerfile中，那么将有一个Warning</span><br><span class="line">提示如下：</span><br><span class="line">[Warning] One or more build-args [foo] were not consumed.</span><br><span class="line">我们可以定义一个或多个参数，如下：</span><br><span class="line">FROM busybox</span><br><span class="line">ARG user1</span><br><span class="line">ARG buildno</span><br><span class="line">...</span><br><span class="line">也可以给参数一个默认值：</span><br><span class="line">FROM busybox</span><br><span class="line">ARG user1=someuser</span><br><span class="line">ARG buildno=1</span><br><span class="line">...</span><br><span class="line">如果我们给了ARG定义的参数默认值，那么当build镜像时没有指定参数值，将会使用这个默认值</span><br><span class="line">ONBUILD</span><br><span class="line">语法：</span><br><span class="line">ONBUILD [INSTRUCTION]</span><br><span class="line">这个命令只对当前镜像的子镜像生效。</span><br><span class="line">比如当前镜像为A，在Dockerfile种添加：</span><br><span class="line">ONBUILD RUN ls -al</span><br><span class="line">这个 ls -al 命令不会在A镜像构建或启动的时候执行</span><br><span class="line">此时有一个镜像B是基于A镜像构建的，那么这个ls -al 命令会在B镜像构建的时候被执行。</span><br><span class="line">STOPSIGNAL</span><br><span class="line">语法：</span><br><span class="line">STOPSIGNAL signal</span><br><span class="line">STOPSIGNAL命令是的作用是当容器退出时给系统发送什么样的指令</span><br><span class="line">HEALTHCHECK</span><br><span class="line"> 容器健康状况检查命令</span><br><span class="line">语法有两种：</span><br><span class="line">1. HEALTHCHECK [OPTIONS] CMD command</span><br><span class="line">2. HEALTHCHECK NONE</span><br><span class="line">第一个的功能是在容器内部运行一个命令来检查容器的健康状况</span><br><span class="line">第二个的功能是在基础镜像中取消健康检查命令</span><br><span class="line">[OPTIONS]的选项支持以下三种选项：</span><br><span class="line">    --interval=DURATION 两次检查默认的时间间隔为30秒</span><br><span class="line">    --timeout=DURATION 健康检查命令运行超时时长，默认30秒</span><br><span class="line">    --retries=N 当连续失败指定次数后，则容器被认为是不健康的，状态为unhealthy，默认次数是3</span><br><span class="line">注意：</span><br><span class="line">HEALTHCHECK命令只能出现一次，如果出现了多次，只有最后一个生效。</span><br><span class="line">CMD后边的命令的返回值决定了本次健康检查是否成功，具体的返回值如下：</span><br><span class="line">0: success - 表示容器是健康的</span><br><span class="line">1: unhealthy - 表示容器已经不能工作了</span><br><span class="line">2: reserved - 保留值</span><br><span class="line">例子：</span><br><span class="line">HEALTHCHECK --interval=5m --timeout=3s \</span><br><span class="line">CMD curl -f http://localhost/ || exit 1</span><br><span class="line">健康检查命令是：curl -f http://localhost/ || exit 1</span><br><span class="line">两次检查的间隔时间是5秒</span><br><span class="line">命令超时时间为3秒</span><br></pre></td></tr></table></figure><p>上面知识点很多，字太多，手敲有点累，博主直接从笔记中copy出来，还望读者见谅！</p><font color="aqua">希望大家在Docker梦工厂中畅游后能有所收获，也不负博主整理编辑了半天，hhh~</font>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Docker&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;小述Docker&quot;&gt;&lt;a href=&quot;#小述Docker&quot; class=&quot;headerlink&quot; title=&quot;小述Docker&quot;&gt;
      
    
    </summary>
    
      <category term="docker" scheme="http://github.ymlsfly.xin/categories/docker/"/>
    
    
      <category term="docker" scheme="http://github.ymlsfly.xin/tags/docker/"/>
    
  </entry>
  
</feed>
